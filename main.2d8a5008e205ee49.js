"use strict";(self.webpackChunkhouse_of_cards=self.webpackChunkhouse_of_cards||[]).push([[179],{2011:(mt,Re,L)=>{L.d(Re,{Dh:()=>pe,GT:()=>be,cc:()=>Fe,hO:()=>Ge,on:()=>K,pX:()=>he,xv:()=>we});var d=L(4650),z=L(9260),P=L(2122);mt=L.hmd(mt);const le=["ngOnDestroy"],he=(_e,Xe,Je,Pe={})=>new Proxy(_e,{get:(Oe,Se)=>Je.runOutsideAngular(()=>{var We;if(_e[Se])return!(null===(We=Pe?.spy)||void 0===We)&&We.get&&Pe.spy.get(Se,_e[Se]),_e[Se];if(le.indexOf(Se)>-1)return()=>{};const ae=Xe.toPromise().then(fe=>{const Ee=fe&&fe[Se];return"function"==typeof Ee?Ee.bind(fe):Ee&&Ee.then?Ee.then(ee=>Je.run(()=>ee)):Je.run(()=>Ee)});return new Proxy(()=>{},{get:(fe,Ee)=>ae[Ee],apply:(fe,Ee,ee)=>ae.then(re=>{var me;const de=re&&re(...ee);return!(null===(me=Pe?.spy)||void 0===me)&&me.apply&&Pe.spy.apply(Se,ee,de),de})})})}),be=(_e,Xe)=>{Xe.forEach(Je=>{Object.getOwnPropertyNames(Je.prototype||Je).forEach(Pe=>{Object.defineProperty(_e.prototype,Pe,Object.getOwnPropertyDescriptor(Je.prototype||Je,Pe))})})};class ce{constructor(Xe){return Xe}}const pe=new d.OlP("angularfire2.app.options"),we=new d.OlP("angularfire2.app.name");function K(_e,Xe,Je){const Oe="object"==typeof Je&&Je||{};Oe.name=Oe.name||"string"==typeof Je&&Je||"[DEFAULT]";const We=z.Z.apps.filter(ae=>ae&&ae.name===Oe.name)[0]||Xe.runOutsideAngular(()=>z.Z.initializeApp(_e,Oe));try{JSON.stringify(_e)!==JSON.stringify(We.options)&&q("error",`${We.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(We)}const q=(_e,...Xe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[_e](...Xe)},te={provide:ce,useFactory:K,deps:[pe,d.R0b,[new d.FiY,we]]};let Ge=(()=>{class _e{constructor(Je){z.Z.registerVersion("angularfire",P.q4.full,"core"),z.Z.registerVersion("angularfire",P.q4.full,"app-compat"),z.Z.registerVersion("angular",d.q4F.full,Je.toString())}static initializeApp(Je,Pe){return{ngModule:_e,providers:[{provide:pe,useValue:Je},{provide:we,useValue:Pe}]}}}return _e.\u0275fac=function(Je){return new(Je||_e)(d.LFG(d.Lbi))},_e.\u0275mod=d.oAB({type:_e}),_e.\u0275inj=d.cJS({providers:[te]}),_e})();function Fe(_e,Xe,Je,Pe,Oe){const[,Se,We]=globalThis.\u0275AngularfireInstanceCache.find(ae=>ae[0]===_e)||[];if(Se)return function Ae(_e,Xe){try{return _e.toString()===Xe.toString()}catch{return _e===Xe}}(Oe,We)||(Ce("error",`${Xe} was already initialized on the ${Je} Firebase App with different settings.${ot?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Oe,was:We})),Se;{const ae=Pe();return globalThis.\u0275AngularfireInstanceCache.push([_e,ae,Oe]),ae}}const ot=!!mt.hot,Ce=(_e,...Xe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[_e](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(mt,Re,L)=>{L.d(Re,{q4:()=>xc,iC:()=>pr,HU:()=>Ps,vb:()=>Xi,JM:()=>fo,u3:()=>gr});var d=L(4650),z=L(259),P=L(5861),le=L(9681),he=L(2090),be=L(4859),ce=L(1877),pe=L(8766);const we="@firebase/installations",K="0.6.1",te=`w:${K}`,Ge="FIS_v2",Xe=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Je(D){return D instanceof he.ZR&&D.code.includes("request-failed")}function Pe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Oe(D){return{token:D.token,requestStatus:2,expiresIn:re(D.expiresIn),creationTime:Date.now()}}function Se(D,T){return We.apply(this,arguments)}function We(){return(We=(0,P.Z)(function*(D,T){const $=(yield T.json()).error;return Xe.create("request-failed",{requestName:D,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function ae({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function fe(D,{refreshToken:T}){const k=ae(D);return k.append("Authorization",function me(D){return`${Ge} ${D}`}(T)),k}function Ee(D){return ee.apply(this,arguments)}function ee(){return(ee=(0,P.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function re(D){return Number(D.replace("s","000"))}function de(D,T){return je.apply(this,arguments)}function je(){return(je=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:k}){const $=Pe(D),J=ae(D),ue=T.getImmediate({optional:!0});if(ue){const bt=yield ue.getHeartbeatsHeader();bt&&J.append("x-firebase-client",bt)}const Ze={method:"POST",headers:J,body:JSON.stringify({fid:k,authVersion:Ge,appId:D.appId,sdkVersion:te})},ut=yield Ee(()=>fetch($,Ze));if(ut.ok){const bt=yield ut.json();return{fid:bt.fid||k,registrationStatus:2,refreshToken:bt.refreshToken,authToken:Oe(bt.authToken)}}throw yield Se("Create Installation",ut)})).apply(this,arguments)}function He(D){return new Promise(T=>{setTimeout(T,D)})}const un=/^[cdef][\w-]{21}$/;function qe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const k=function bn(D){return function _t(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return un.test(k)?k:""}catch{return""}}function Nn(D){return`${D.appName}!${D.appId}`}const sn=new Map;function on(D,T){const k=Nn(D);Or(k,T),function $i(D,T){const k=function zn(){return!Zr&&"BroadcastChannel"in self&&(Zr=new BroadcastChannel("[Firebase] FID Change"),Zr.onmessage=D=>{Or(D.data.key,D.data.fid)}),Zr}();k&&k.postMessage({key:D,fid:T}),function zi(){0===sn.size&&Zr&&(Zr.close(),Zr=null)}()}(k,T)}function Or(D,T){const k=sn.get(D);if(k)for(const $ of k)$(T)}let Zr=null;const Kn="firebase-installations-store";let Oi=null;function Wi(){return Oi||(Oi=(0,pe.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Kn)}})),Oi}function et(D,T){return cr.apply(this,arguments)}function cr(){return(cr=(0,P.Z)(function*(D,T){const k=Nn(D),J=(yield Wi()).transaction(Kn,"readwrite"),ue=J.objectStore(Kn),Ie=yield ue.get(k);return yield ue.put(T,k),yield J.done,(!Ie||Ie.fid!==T.fid)&&on(D,T.fid),T})).apply(this,arguments)}function er(D){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,P.Z)(function*(D){const T=Nn(D),$=(yield Wi()).transaction(Kn,"readwrite");yield $.objectStore(Kn).delete(T),yield $.done})).apply(this,arguments)}function Ar(D,T){return qs.apply(this,arguments)}function qs(){return(qs=(0,P.Z)(function*(D,T){const k=Nn(D),J=(yield Wi()).transaction(Kn,"readwrite"),ue=J.objectStore(Kn),Ie=yield ue.get(k),Ze=T(Ie);return void 0===Ze?yield ue.delete(k):yield ue.put(Ze,k),yield J.done,Ze&&(!Ie||Ie.fid!==Ze.fid)&&on(D,Ze.fid),Ze})).apply(this,arguments)}function xn(D){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,P.Z)(function*(D){let T;const k=yield Ar(D.appConfig,$=>{const J=Sn($),ue=yt(D,J);return T=ue.registrationPromise,ue.installationEntry});return""===k.fid?{installationEntry:yield T}:{installationEntry:k,registrationPromise:T}})).apply(this,arguments)}function Sn(D){return xt(D||{fid:qe(),registrationStatus:0})}function yt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Xe.create("app-offline"))};const k={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},$=function vt(D,T){return Ft.apply(this,arguments)}(D,k);return{installationEntry:k,registrationPromise:$}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:ri(D)}:{installationEntry:T}}function Ft(){return(Ft=(0,P.Z)(function*(D,T){try{const k=yield de(D,T);return et(D.appConfig,k)}catch(k){throw Je(k)&&409===k.customData.serverCode?yield er(D.appConfig):yield et(D.appConfig,{fid:T.fid,registrationStatus:0}),k}})).apply(this,arguments)}function ri(D){return tr.apply(this,arguments)}function tr(){return(tr=(0,P.Z)(function*(D){let T=yield jr(D.appConfig);for(;1===T.registrationStatus;)yield He(100),T=yield jr(D.appConfig);if(0===T.registrationStatus){const{installationEntry:k,registrationPromise:$}=yield xn(D);return $||k}return T})).apply(this,arguments)}function jr(D){return Ar(D,T=>{if(!T)throw Xe.create("installation-not-found");return xt(T)})}function xt(D){return function Xr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Ut(D,T){return ii.apply(this,arguments)}function ii(){return(ii=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:T},k){const $=en(D,k),J=fe(D,k),ue=T.getImmediate({optional:!0});if(ue){const bt=yield ue.getHeartbeatsHeader();bt&&J.append("x-firebase-client",bt)}const Ze={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:te,appId:D.appId}})},ut=yield Ee(()=>fetch($,Ze));if(ut.ok)return Oe(yield ut.json());throw yield Se("Generate Auth Token",ut)})).apply(this,arguments)}function en(D,{fid:T}){return`${Pe(D)}/${T}/authTokens:generate`}function wr(D){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,P.Z)(function*(D,T=!1){let k;const $=yield Ar(D.appConfig,ue=>{if(!rn(ue))throw Xe.create("not-registered");const Ie=ue.authToken;if(!T&&W(Ie))return ue;if(1===Ie.requestStatus)return k=nt(D,T),ue;{if(!navigator.onLine)throw Xe.create("app-offline");const Ze=X(ue);return k=Tt(D,Ze),Ze}});return k?yield k:$.authToken})).apply(this,arguments)}function nt(D,T){return Me.apply(this,arguments)}function Me(){return(Me=(0,P.Z)(function*(D,T){let k=yield rt(D.appConfig);for(;1===k.authToken.requestStatus;)yield He(100),k=yield rt(D.appConfig);const $=k.authToken;return 0===$.requestStatus?wr(D,T):$})).apply(this,arguments)}function rt(D){return Ar(D,T=>{if(!rn(T))throw Xe.create("not-registered");return function j(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Tt(D,T){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,P.Z)(function*(D,T){try{const k=yield Ut(D,T),$=Object.assign(Object.assign({},T),{authToken:k});return yield et(D.appConfig,$),k}catch(k){if(!Je(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const $=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield et(D.appConfig,$)}else yield er(D.appConfig);throw k}})).apply(this,arguments)}function rn(D){return void 0!==D&&2===D.registrationStatus}function W(D){return 2===D.requestStatus&&!function G(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function X(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function U(){return(U=(0,P.Z)(function*(D){const T=D,{installationEntry:k,registrationPromise:$}=yield xn(T);return $?$.catch(console.error):wr(T).catch(console.error),k.fid})).apply(this,arguments)}function Ve(){return(Ve=(0,P.Z)(function*(D,T=!1){const k=D;return yield at(k),(yield wr(k,T)).token})).apply(this,arguments)}function at(D){return ft.apply(this,arguments)}function ft(){return(ft=(0,P.Z)(function*(D){const{registrationPromise:T}=yield xn(D);T&&(yield T)})).apply(this,arguments)}function Ks(D){return Xe.create("missing-app-config-values",{valueName:D})}const Ro="installations",Ys=D=>{const T=D.getProvider("app").getImmediate(),k=function Fn(D){if(!D||!D.options)throw Ks("App Configuration");if(!D.name)throw Ks("App Name");const T=["projectId","apiKey","appId"];for(const k of T)if(!D.options[k])throw Ks(k);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:k,heartbeatServiceProvider:(0,le._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Zs=D=>{const T=D.getProvider("app").getImmediate(),k=(0,le._getProvider)(T,Ro).getImmediate();return{getId:()=>function O(D){return U.apply(this,arguments)}(k),getToken:J=>function oe(D){return Ve.apply(this,arguments)}(k,J)}};(function bl(){(0,le._registerComponent)(new be.wA(Ro,Ys,"PUBLIC")),(0,le._registerComponent)(new be.wA("installations-internal",Zs,"PRIVATE"))})(),(0,le.registerVersion)(we,K),(0,le.registerVersion)(we,K,"esm2017");const os="@firebase/remote-config",rr=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class El{constructor(T,k,$,J){this.client=T,this.storage=k,this.storageCache=$,this.logger=J}isCachedDataFresh(T,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-k,J=$<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${J}.`),J}fetch(T){var k=this;return(0,P.Z)(function*(){const[$,J]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(J&&k.isCachedDataFresh(T.cacheMaxAgeMillis,$))return J;T.eTag=J&&J.eTag;const ue=yield k.client.fetch(T),Ie=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ie.push(k.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ie),ue})()}}function Ma(D=navigator){return D.languages&&D.languages[0]||D.language}class to{constructor(T,k,$,J,ue,Ie){this.firebaseInstallations=T,this.sdkVersion=k,this.namespace=$,this.projectId=J,this.apiKey=ue,this.appId=Ie}fetch(T){var k=this;return(0,P.Z)(function*(){const[$,J]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ut={sdk_version:k.sdkVersion,app_instance_id:$,app_instance_id_token:J,app_id:k.appId,language_code:Ma()},bt={method:"POST",headers:Ze,body:JSON.stringify(ut)},zt=fetch(Ie,bt),Mt=new Promise((xr,di)=>{T.signal.addEventListener(()=>{const bh=new Error("The operation was aborted.");bh.name="AbortError",di(bh)})});let Lr;try{yield Promise.race([zt,Mt]),Lr=yield zt}catch(xr){let di="fetch-client-network";throw"AbortError"===xr?.name&&(di="fetch-timeout"),rr.create(di,{originalErrorMessage:xr?.message})}let mr=Lr.status;const Fs=Lr.headers.get("ETag")||void 0;let Gt,Gr;if(200===Lr.status){let xr;try{xr=yield Lr.json()}catch(di){throw rr.create("fetch-client-parse",{originalErrorMessage:di?.message})}Gt=xr.entries,Gr=xr.state}if("INSTANCE_STATE_UNSPECIFIED"===Gr?mr=500:"NO_CHANGE"===Gr?mr=304:("NO_TEMPLATE"===Gr||"EMPTY_CONFIG"===Gr)&&(Gt={}),304!==mr&&200!==mr)throw rr.create("fetch-status",{httpStatus:mr});return{status:mr,eTag:Fs,config:Gt}})()}}class cs{constructor(T,k){this.client=T,this.storage=k}fetch(T){var k=this;return(0,P.Z)(function*(){const $=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(T,$)})()}attemptFetch(T,{throttleEndTimeMillis:k,backoffCount:$}){var J=this;return(0,P.Z)(function*(){yield function _i(D,T){return new Promise((k,$)=>{const J=Math.max(T-Date.now(),0),ue=setTimeout(k,J);D.addEventListener(()=>{clearTimeout(ue),$(rr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,k);try{const ue=yield J.client.fetch(T);return yield J.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function Sp(D){if(!(D instanceof he.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ue))throw ue;const Ie={throttleEndTimeMillis:Date.now()+(0,he.$s)($),backoffCount:$+1};return yield J.storage.setThrottleMetadata(Ie),J.attemptFetch(T,Ie)}})()}}class Ap{constructor(T,k,$,J,ue){this.app=T,this._client=k,this._storageCache=$,this._storage=J,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xa(D,T){const k=D.target.error||void 0;return rr.create(T,{originalErrorMessage:k&&k?.message})}const ko="app_namespace_store";class mu{constructor(T,k,$,J=function xp(){return new Promise((D,T)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=$=>{T(xa($,"storage-open"))},k.onsuccess=$=>{D($.target.result)},k.onupgradeneeded=$=>{0===$.oldVersion&&$.target.result.createObjectStore(ko,{keyPath:"compositeKey"})}}catch(k){T(rr.create("storage-open",{originalErrorMessage:k?.message}))}})}()){this.appId=T,this.appName=k,this.namespace=$,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var k=this;return(0,P.Z)(function*(){const $=yield k.openDbPromise;return new Promise((J,ue)=>{const Ze=$.transaction([ko],"readonly").objectStore(ko),ut=k.createCompositeKey(T);try{const bt=Ze.get(ut);bt.onerror=zt=>{ue(xa(zt,"storage-get"))},bt.onsuccess=zt=>{const Mt=zt.target.result;J(Mt?Mt.value:void 0)}}catch(bt){ue(rr.create("storage-get",{originalErrorMessage:bt?.message}))}})})()}set(T,k){var $=this;return(0,P.Z)(function*(){const J=yield $.openDbPromise;return new Promise((ue,Ie)=>{const ut=J.transaction([ko],"readwrite").objectStore(ko),bt=$.createCompositeKey(T);try{const zt=ut.put({compositeKey:bt,value:k});zt.onerror=Mt=>{Ie(xa(Mt,"storage-set"))},zt.onsuccess=()=>{ue()}}catch(zt){Ie(rr.create("storage-set",{originalErrorMessage:zt?.message}))}})})()}delete(T){var k=this;return(0,P.Z)(function*(){const $=yield k.openDbPromise;return new Promise((J,ue)=>{const Ze=$.transaction([ko],"readwrite").objectStore(ko),ut=k.createCompositeKey(T);try{const bt=Ze.delete(ut);bt.onerror=zt=>{ue(xa(zt,"storage-delete"))},bt.onsuccess=()=>{J()}}catch(bt){ue(rr.create("storage-delete",{originalErrorMessage:bt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Oo{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,P.Z)(function*(){const k=T.storage.getLastFetchStatus(),$=T.storage.getLastSuccessfulFetchTimestampMillis(),J=T.storage.getActiveConfig(),ue=yield k;ue&&(T.lastFetchStatus=ue);const Ie=yield $;Ie&&(T.lastSuccessfulFetchTimestampMillis=Ie);const Ze=yield J;Ze&&(T.activeConfig=Ze)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function d_(){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,P.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}!function _u(){(0,le._registerComponent)(new be.wA("remote-config",function D(T,{instanceIdentifier:k}){const $=T.getProvider("app").getImmediate(),J=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw rr.create("registration-window");if(!(0,he.hl)())throw rr.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ie,appId:Ze}=$.options;if(!ue)throw rr.create("registration-project-id");if(!Ie)throw rr.create("registration-api-key");if(!Ze)throw rr.create("registration-app-id");const ut=new mu(Ze,$.name,k=k||"firebase"),bt=new Oo(ut),zt=new ce.Yd(os);zt.logLevel=ce.in.ERROR;const Mt=new to(J,le.SDK_VERSION,k,ue,Ie,Ze),Lr=new cs(Mt,ut),mr=new El(Lr,ut,bt,zt),Fs=new Ap($,mr,bt,ut,zt);return function ir(D){const T=(0,he.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Fs),Fs},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(os,"0.4.1"),(0,le.registerVersion)(os,"0.4.1","esm2017")}();const Nr="/firebase-messaging-sw.js",Po="/firebase-cloud-messaging-push-scope",As="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Il="google.c.a.c_id",fc="google.c.a.c_l",bu="google.c.a.ts",Fo="google.c.a.e";var yi=(()=>{return(D=yi||(yi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",yi;var D})();function us(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ai(D){const k=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(k),J=new Uint8Array($.length);for(let ue=0;ue<$.length;++ue)J[ue]=$.charCodeAt(ue);return J}const no="fcm_token_details_db",Lo="fcm_token_object_Store";function Rp(D){return pc.apply(this,arguments)}function pc(){return pc=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(no))return null;let T=null;return(yield(0,pe.X3)(no,5,{upgrade:($=(0,P.Z)(function*(J,ue,Ie,Ze){var ut;if(ue<2||!J.objectStoreNames.contains(Lo))return;const bt=Ze.objectStore(Lo),zt=yield bt.index("fcmSenderId").get(D);if(yield bt.clear(),zt)if(2===ue){const Mt=zt;if(!Mt.auth||!Mt.p256dh||!Mt.endpoint)return;T={token:Mt.fcmToken,createTime:null!==(ut=Mt.createTime)&&void 0!==ut?ut:Date.now(),subscriptionOptions:{auth:Mt.auth,p256dh:Mt.p256dh,endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:"string"==typeof Mt.vapidKey?Mt.vapidKey:us(Mt.vapidKey)}}}else if(3===ue){const Mt=zt;T={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:us(Mt.auth),p256dh:us(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:us(Mt.vapidKey)}}}else if(4===ue){const Mt=zt;T={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:us(Mt.auth),p256dh:us(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:us(Mt.vapidKey)}}}}),function(ue,Ie,Ze,ut){return $.apply(this,arguments)})})).close(),yield(0,pe.Lj)(no),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),Gn(T)?T:null;var $}),pc.apply(this,arguments)}function Gn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Ni="firebase-messaging-store";let Pr=null;function Dl(){return Pr||(Pr=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Ni)}})),Pr}function Vo(D){return qi.apply(this,arguments)}function qi(){return(qi=(0,P.Z)(function*(D){const T=bi(D),$=yield(yield Dl()).transaction(Ni).objectStore(Ni).get(T);if($)return $;{const J=yield Rp(D.appConfig.senderId);if(J)return yield dn(D,J),J}})).apply(this,arguments)}function dn(D,T){return gc.apply(this,arguments)}function gc(){return(gc=(0,P.Z)(function*(D,T){const k=bi(D),J=(yield Dl()).transaction(Ni,"readwrite");return yield J.objectStore(Ni).put(T,k),yield J.done,T})).apply(this,arguments)}function Ms(D){return mc.apply(this,arguments)}function mc(){return(mc=(0,P.Z)(function*(D){const T=bi(D),$=(yield Dl()).transaction(Ni,"readwrite");yield $.objectStore(Ni).delete(T),yield $.done})).apply(this,arguments)}function bi({appConfig:D}){return D.appId}const Yn=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vt(D,T){return ka.apply(this,arguments)}function ka(){return(ka=(0,P.Z)(function*(D,T){const k=yield Pa(D),$=Ne(T),J={method:"POST",headers:k,body:JSON.stringify($)};let ue;try{ue=yield(yield fetch(ro(D.appConfig),J)).json()}catch(Ie){throw Yn.create("token-subscribe-failed",{errorInfo:Ie?.toString()})}if(ue.error)throw Yn.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw Yn.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function kp(D,T){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,P.Z)(function*(D,T){const k=yield Pa(D),$=Ne(T.subscriptionOptions),J={method:"PATCH",headers:k,body:JSON.stringify($)};let ue;try{ue=yield(yield fetch(`${ro(D.appConfig)}/${T.token}`,J)).json()}catch(Ie){throw Yn.create("token-update-failed",{errorInfo:Ie?.toString()})}if(ue.error)throw Yn.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw Yn.create("token-update-no-token");return ue.token})).apply(this,arguments)}function Eu(D,T){return Na.apply(this,arguments)}function Na(){return(Na=(0,P.Z)(function*(D,T){const $={method:"DELETE",headers:yield Pa(D)};try{const ue=yield(yield fetch(`${ro(D.appConfig)}/${T}`,$)).json();if(ue.error)throw Yn.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(J){throw Yn.create("token-unsubscribe-failed",{errorInfo:J?.toString()})}})).apply(this,arguments)}function ro({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Pa(D){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,P.Z)(function*({appConfig:D,installations:T}){const k=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Ne({p256dh:D,auth:T,endpoint:k,vapidKey:$}){const J={web:{endpoint:k,auth:T,p256dh:D}};return $!==As&&(J.web.applicationPubKey=$),J}const Qt=6048e5;function ih(D){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,P.Z)(function*(D){const T=yield sh(D.swRegistration,D.vapidKey),k={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:us(T.getKey("auth")),p256dh:us(T.getKey("p256dh"))},$=yield Vo(D.firebaseDependencies);if($){if(Op($.subscriptionOptions,k))return Date.now()>=$.createTime+Qt?Sl(D,{token:$.token,createTime:Date.now(),subscriptionOptions:k}):$.token;try{yield Eu(D.firebaseDependencies,$.token)}catch(J){console.warn(J)}return Tl(D.firebaseDependencies,k)}return Tl(D.firebaseDependencies,k)})).apply(this,arguments)}function dr(D){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,P.Z)(function*(D){const T=yield Vo(D.firebaseDependencies);T&&(yield Eu(D.firebaseDependencies,T.token),yield Ms(D.firebaseDependencies));const k=yield D.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Sl(D,T){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,P.Z)(function*(D,T){try{const k=yield kp(D.firebaseDependencies,T),$=Object.assign(Object.assign({},T),{token:k,createTime:Date.now()});return yield dn(D.firebaseDependencies,$),k}catch(k){throw yield dr(D),k}})).apply(this,arguments)}function Tl(D,T){return jo.apply(this,arguments)}function jo(){return(jo=(0,P.Z)(function*(D,T){const $={token:yield Vt(D,T),createTime:Date.now(),subscriptionOptions:T};return yield dn(D,$),$.token})).apply(this,arguments)}function sh(D,T){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,P.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ai(T)})})).apply(this,arguments)}function Op(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function io(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function hr(D,T){if(!T.notification)return;D.notification={};const k=T.notification.title;k&&(D.notification.title=k);const $=T.notification.body;$&&(D.notification.body=$);const J=T.notification.image;J&&(D.notification.image=J);const ue=T.notification.icon;ue&&(D.notification.icon=ue)}(T,D),function Ki(D,T){!T.data||(D.data=T.data)}(T,D),function La(D,T){var k,$,J,ue,Ie;if(!(T.fcmOptions||null!==(k=T.notification)&&void 0!==k&&k.click_action))return;D.fcmOptions={};const Ze=null!==(J=null===($=T.fcmOptions)||void 0===$?void 0:$.link)&&void 0!==J?J:null===(ue=T.notification)||void 0===ue?void 0:ue.click_action;Ze&&(D.fcmOptions.link=Ze);const ut=null===(Ie=T.fcmOptions)||void 0===Ie?void 0:Ie.analytics_label;ut&&(D.fcmOptions.analyticsLabel=ut)}(T,D),T}function Va(D){return"object"==typeof D&&!!D&&Il in D}function ds(D,T){const k=[];for(let $=0;$<D.length;$++)k.push(D.charAt($)),$<T.length&&k.push(T.charAt($));return k.join("")}function _c(D){return Yn.create("missing-app-config-values",{valueName:D})}ds("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ds("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Iu{constructor(T,k,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Cu(D){if(!D||!D.options)throw _c("App Configuration Object");if(!D.name)throw _c("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:k}=D;for(const $ of T)if(!k[$])throw _c($);return{appName:D.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:J,installations:k,analyticsProvider:$}}_delete(){return Promise.resolve()}}function oh(D){return $o.apply(this,arguments)}function $o(){return($o=(0,P.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Nr,{scope:Po}),D.swRegistration.update().catch(()=>{})}catch(T){throw Yn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function yc(D,T){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,P.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield oh(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Yn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function vc(D,T){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,P.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=As)})).apply(this,arguments)}function zo(){return(zo=(0,P.Z)(function*(D,T){if(!navigator)throw Yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yn.create("permission-blocked");return yield vc(D,T?.vapidKey),yield yc(D,T?.serviceWorkerRegistration),ih(D)})).apply(this,arguments)}function ah(D,T,k){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,P.Z)(function*(D,T,k){const $=lh(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:k[Il],message_name:k[fc],message_time:k[bu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function lh(D){switch(D){case yi.NOTIFICATION_CLICKED:return"notification_open";case yi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function xs(){return(xs=(0,P.Z)(function*(D,T){const k=T.data;if(!k.isFirebaseMessaging)return;D.onMessageHandler&&k.messageType===yi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(io(k)):D.onMessageHandler.next(io(k)));const $=k.data;Va($)&&"1"===$[Fo]&&(yield ah(D,k.messageType,$))})).apply(this,arguments)}const Rs="@firebase/messaging",Un=D=>{const T=new Iu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Su(D,T){return xs.apply(this,arguments)}(T,k)),T},hs=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:$=>function Du(D,T){return zo.apply(this,arguments)}(T,$)}};function Au(){return bc.apply(this,arguments)}function bc(){return(bc=(0,P.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Hn(){(0,le._registerComponent)(new be.wA("messaging",Un,"PUBLIC")),(0,le._registerComponent)(new be.wA("messaging-internal",hs,"PRIVATE")),(0,le.registerVersion)(Rs,"0.12.1"),(0,le.registerVersion)(Rs,"0.12.1","esm2017")}();const qo="analytics",xu="firebase_id",Ic="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ru="https://www.googletagmanager.com/gtag/js",Zn=new ce.Yd("@firebase/analytics");function Ml(D){return Promise.all(D.map(T=>T.catch(k=>k)))}function xl(D,T){const k=document.createElement("script");k.src=`${Ru}?l=${D}&id=${T}`,k.async=!0,document.head.appendChild(k)}function uh(D,T,k,$,J,ue){return ja.apply(this,arguments)}function ja(){return(ja=(0,P.Z)(function*(D,T,k,$,J,ue){const Ie=$[J];try{if(Ie)yield T[Ie];else{const ut=(yield Ml(k)).find(bt=>bt.measurementId===J);ut&&(yield T[ut.appId])}}catch(Ze){Zn.error(Ze)}D("config",J,ue)})).apply(this,arguments)}function fs(D,T,k,$,J){return $a.apply(this,arguments)}function $a(){return($a=(0,P.Z)(function*(D,T,k,$,J){try{let ue=[];if(J&&J.send_to){let Ie=J.send_to;Array.isArray(Ie)||(Ie=[Ie]);const Ze=yield Ml(k);for(const ut of Ie){const bt=Ze.find(Mt=>Mt.measurementId===ut),zt=bt&&T[bt.appId];if(!zt){ue=[];break}ue.push(zt)}}0===ue.length&&(ue=Object.values(T)),yield Promise.all(ue),D("event",$,J||{})}catch(ue){Zn.error(ue)}})).apply(this,arguments)}function ku(D){const T=window.document.getElementsByTagName("script");for(const k of Object.values(T))if(k.src&&k.src.includes(Ru)&&k.src.includes(D))return k;return null}const fr=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ga=new class Sc{constructor(T={},k=1e3){this.throttleMetadata=T,this.intervalMillis=k}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,k){this.throttleMetadata[T]=k}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ko(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function fh(D){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,P.Z)(function*(D){var T;const{appId:k,apiKey:$}=D,J={method:"GET",headers:Ko($)},ue=Ic.replace("{app-id}",k),Ie=yield fetch(ue,J);if(200!==Ie.status&&304!==Ie.status){let Ze="";try{const ut=yield Ie.json();null!==(T=ut.error)&&void 0!==T&&T.message&&(Ze=ut.error.message)}catch{}throw fr.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:Ze})}return Ie.json()})).apply(this,arguments)}function Ou(D){return li.apply(this,arguments)}function li(){return(li=(0,P.Z)(function*(D,T=Ga,k){const{appId:$,apiKey:J,measurementId:ue}=D.options;if(!$)throw fr.create("no-app-id");if(!J){if(ue)return{measurementId:ue,appId:$};throw fr.create("no-api-key")}const Ie=T.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new Wa;return setTimeout((0,P.Z)(function*(){Ze.abort()}),void 0!==k?k:6e4),Nu({appId:$,apiKey:J,measurementId:ue},Ie,Ze,T)})).apply(this,arguments)}function Nu(D,T,k){return ps.apply(this,arguments)}function ps(){return(ps=(0,P.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:k},$,J=Ga){var ue;const{appId:Ie,measurementId:Ze}=D;try{yield Tc($,T)}catch(ut){if(Ze)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${ut?.message}]`),{appId:Ie,measurementId:Ze};throw ut}try{const ut=yield fh(D);return J.deleteThrottleMetadata(Ie),ut}catch(ut){const bt=ut;if(!kl(bt)){if(J.deleteThrottleMetadata(Ie),Ze)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:Ie,measurementId:Ze};throw ut}const zt=503===Number(null===(ue=bt?.customData)||void 0===ue?void 0:ue.httpStatus)?(0,he.$s)(k,J.intervalMillis,30):(0,he.$s)(k,J.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+zt,backoffCount:k+1};return J.setThrottleMetadata(Ie,Mt),Zn.debug(`Calling attemptFetch again in ${zt} millis`),Nu(D,Mt,$,J)}})).apply(this,arguments)}function Tc(D,T){return new Promise((k,$)=>{const J=Math.max(T-Date.now(),0),ue=setTimeout(k,J);D.addEventListener(()=>{clearTimeout(ue),$(fr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function kl(D){if(!(D instanceof he.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Wa{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let so,Nl;function Yo(){return(Yo=(0,P.Z)(function*(D,T,k,$,J){if(J&&J.global)D("event",k,$);else{const ue=yield T;D("event",k,Object.assign(Object.assign({},$),{send_to:ue}))}})).apply(this,arguments)}function Xo(D){Nl=D}function Ac(D){so=D}function Os(){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,P.Z)(function*(){if(!(0,he.hl)())return Zn.warn(fr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(D){return Zn.warn(fr.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function ea(){return(ea=(0,P.Z)(function*(D,T,k,$,J,ue,Ie){var Ze;const ut=Ou(D);ut.then(mr=>{k[mr.measurementId]=mr.appId,D.options.measurementId&&mr.measurementId!==D.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mr=>Zn.error(mr)),T.push(ut);const bt=Os().then(mr=>{if(mr)return $.getId()}),[zt,Mt]=yield Promise.all([ut,bt]);ku(ue)||xl(ue,zt.measurementId),Nl&&(J("consent","default",Nl),Xo(void 0)),J("js",new Date);const Lr=null!==(Ze=Ie?.config)&&void 0!==Ze?Ze:{};return Lr.origin="firebase",Lr.update=!0,null!=Mt&&(Lr[xu]=Mt),J("config",zt.measurementId,Lr),so&&(J("set",so),Ac(void 0)),zt.measurementId})).apply(this,arguments)}class Pl{constructor(T){this.app=T}_delete(){return delete $r[this.app.options.appId],Promise.resolve()}}let $r={},ta=[];const ao={};let ra,Zi,na="dataLayer",Fu=!1;function mh(D,T,k){!function Np(){const D=[];if((0,he.ru)()&&D.push("This is a browser extension environment."),(0,he.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map(($,J)=>`(${J+1}) ${$}`).join(" "),k=fr.create("invalid-analytics-context",{errorInfo:T});Zn.warn(k.message)}}();const $=D.options.appId;if(!$)throw fr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw fr.create("no-api-key");Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$r[$])throw fr.create("already-exists",{id:$});if(!Fu){!function Rl(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(na);const{wrappedGtag:ue,gtagCore:Ie}=function za(D,T,k,$,J){let ue=function(...Ie){window[$].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ue=window[J]),window[J]=function Dc(D,T,k,$){function ue(){return(ue=(0,P.Z)(function*(Ie,Ze,ut){try{"event"===Ie?yield fs(D,T,k,Ze,ut):"config"===Ie?yield uh(D,T,k,$,Ze,ut):"consent"===Ie?D("consent","update",ut):D("set",Ze)}catch(bt){Zn.error(bt)}})).apply(this,arguments)}return function J(Ie,Ze,ut){return ue.apply(this,arguments)}}(ue,D,T,k),{gtagCore:ue,wrappedGtag:window[J]}}($r,ta,ao,na,"gtag");Zi=ue,ra=Ie,Fu=!0}return $r[$]=function gh(D,T,k,$,J,ue,Ie){return ea.apply(this,arguments)}(D,ta,ao,T,ra,na,k),new Pl(D)}function f_(){return _h.apply(this,arguments)}function _h(){return(_h=(0,P.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const st="@firebase/analytics";!function Rn(){(0,le._registerComponent)(new be.wA(qo,(T,{options:k})=>mh(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,le._registerComponent)(new be.wA("analytics-internal",function D(T){try{const k=T.getProvider(qo).getImmediate();return{logEvent:($,J,ue)=>function yn(D,T,k,$){D=(0,he.m9)(D),function qa(D,T,k,$,J){return Yo.apply(this,arguments)}(Zi,$r[D.app.options.appId],T,k,$).catch(J=>Zn.error(J))}(k,$,J,ue)}}catch(k){throw fr.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,le.registerVersion)(st,"0.9.1"),(0,le.registerVersion)(st,"0.9.1","esm2017")}();var ms=L(4408),sr=L(7565);const Lu=new class uo extends sr.v{}(class co extends ms.o{constructor(T,k){super(T,k),this.scheduler=T,this.work=k}schedule(T,k=0){return k>0?super.schedule(T,k):(this.delay=k,this.state=T,this.scheduler.flush(this),this)}execute(T,k){return k>0||this.closed?super.execute(T,k):this._execute(T,k)}requestAsyncId(T,k,$=0){return null!=$&&$>0||null==$&&this.delay>0?super.requestAsyncId(T,k,$):(T.flush(this),0)}});var yh=L(4986),Ns=L(9751),Bu=L(8505),ho=L(9468),it=L(5363);const xc=new d.GfV("7.5.0"),Qi="__angularfire_symbol__analyticsIsSupportedValue",Ya="__angularfire_symbol__analyticsIsSupported",Za="__angularfire_symbol__remoteConfigIsSupportedValue",Wn="__angularfire_symbol__remoteConfigIsSupported",Qa="__angularfire_symbol__messagingIsSupportedValue",Xa="__angularfire_symbol__messagingIsSupported";function fo(D,T,k){if(T){if(1===T.length)return T[0];const ue=T.filter(Ie=>Ie.app===k);if(1===ue.length)return ue[0]}return k.container.getProvider(D).getImmediate({optional:!0})}globalThis[Ya]||(globalThis[Ya]=f_().then(D=>globalThis[Qi]=D).catch(()=>globalThis[Qi]=!1)),globalThis[Xa]||(globalThis[Xa]=Au().then(D=>globalThis[Qa]=D).catch(()=>globalThis[Qa]=!1)),globalThis[Wn]||(globalThis[Wn]=d_().then(D=>globalThis[Za]=D).catch(()=>globalThis[Za]=!1));const Xi=(D,T)=>{const k=T?[T]:(0,z.C6)(),$=[];return k.forEach(J=>{J.container.getProvider(D).instances.forEach(Ie=>{$.includes(Ie)||$.push(Ie)})}),$};function ci(){}class Ll{constructor(T,k=Lu){this.zone=T,this.delegate=k}now(){return this.delegate.now()}schedule(T,k,$){const J=this.zone;return this.delegate.schedule(function(Ie){J.runGuarded(()=>{T.apply(this,[Ie])})},k,$)}}class zr{constructor(T){this.zone=T,this.task=null}call(T,k){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ci,{},ci,ci)),k.pipe((0,Bu.b)({next:$,complete:$,error:$})).subscribe(T).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ps=(()=>{class D{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Ll(Zone.current)),this.insideAngular=k.run(()=>new Ll(Zone.current,yh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(k){return new(k||D)(d.LFG(d.R0b))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Fr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function sa(D){return Fr().ngZone.runOutsideAngular(()=>D())}function kn(D){return Fr().ngZone.run(()=>D())}function pr(D){return Fr(),function hn(D){return function(k){return(k=k.lift(new zr(D.ngZone))).pipe((0,ho.R)(D.outsideAngular),(0,it.Q)(D.insideAngular))}}(Fr())(D)}const ui=(D,T)=>function(){const $=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),kn(()=>D.apply(void 0,$))},gr=(D,T)=>function(){let k;const $=arguments;for(let ue=0;ue<arguments.length;ue++)"function"==typeof $[ue]&&(T&&(k||(k=kn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ci,{},ci,ci)))),$[ue]=ui($[ue],k));const J=sa(()=>D.apply(this,$));if(!T){if(J instanceof Ns.y){const ue=Fr();return J.pipe((0,ho.R)(ue.outsideAngular),(0,it.Q)(ue.insideAngular))}return kn(()=>J)}return J instanceof Ns.y?J.pipe(pr):J instanceof Promise?kn(()=>new Promise((ue,Ie)=>J.then(Ze=>kn(()=>ue(Ze)),Ze=>kn(()=>Ie(Ze))))):"function"==typeof J&&k?function(){return setTimeout(()=>{k&&"scheduled"===k.state&&k.invoke()},10),J.apply(this,arguments)}:kn(()=>J)}},1808:(mt,Re,L)=>{L.d(Re,{$:()=>ro,A:()=>q,B:()=>Fe,G:()=>Zs,H:()=>si,J:()=>cs,L:()=>W,M:()=>Cl,N:()=>vu,P:()=>yh,Q:()=>Il,R:()=>Pp,T:()=>fc,U:()=>As,V:()=>yi,W:()=>us,X:()=>Rp,Y:()=>Ra,Z:()=>Vt,_:()=>kp,a:()=>ks,a0:()=>ih,a1:()=>dr,a2:()=>Sl,a3:()=>Tl,a4:()=>sh,a5:()=>Op,a6:()=>hr,a7:()=>Ki,a8:()=>Va,a9:()=>ds,aA:()=>G,aB:()=>Ze,aC:()=>kn,aD:()=>sa,aE:()=>Et,aI:()=>Ko,aL:()=>Fo,aa:()=>oh,ab:()=>yc,ac:()=>vc,af:()=>ah,ag:()=>lh,ah:()=>Su,ak:()=>Ni,al:()=>wc,an:()=>Ru,ao:()=>ja,ap:()=>Ee,aq:()=>Ue,ar:()=>at,as:()=>Je,at:()=>Vl,au:()=>Gr,av:()=>Lt,aw:()=>Pe,ax:()=>ae,ay:()=>Lr,az:()=>re,b:()=>fr,c:()=>Wn,d:()=>vh,e:()=>Xa,f:()=>pr,g:()=>k,h:()=>gr,i:()=>Jo,j:()=>ue,k:()=>Sh,l:()=>an,m:()=>_s,n:()=>w_,o:()=>pe,r:()=>ms,s:()=>gs,u:()=>Lu});var d=L(5861),z=L(2090),P=L(9681),le=L(1877),he=L(655),be=L(4859);const pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Fe=function te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ae=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ot=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new le.Yd("@firebase/auth");function Xe(b,...m){_e.logLevel<=le.in.ERROR&&_e.error(`Auth (${P.SDK_VERSION}): ${b}`,...m)}function Je(b,...m){throw We(b,...m)}function Pe(b,...m){return We(b,...m)}function Oe(b,m,_){const E=Object.assign(Object.assign({},Ae()),{[m]:_});return new z.LL("auth","Firebase",E).create(m,{appName:b.name})}function Se(b,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Je(b,"argument-error"),Oe(b,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(b,...m){if("string"!=typeof b){const _=m[0],E=[...m.slice(1)];return E[0]&&(E[0].appName=b.name),b._errorFactory.create(_,...E)}return ot.create(b,...m)}function ae(b,m,..._){if(!b)throw We(m,..._)}function fe(b){const m="INTERNAL ASSERTION FAILED: "+b;throw Xe(m),new Error(m)}function Ee(b,m){b||fe(m)}const ee=new Map;function re(b){Ee(b instanceof Function,"Expected a class definition");let m=ee.get(b);return m?(Ee(m instanceof b,"Instance stored in cache mismatched with class"),m):(m=new b,ee.set(b,m),m)}function je(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function He(){return"http:"===_t()||"https:"===_t()}function _t(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class qe{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ee(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function un(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(He()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bn(b,m){Ee(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class Nn{static initialize(m,_,E){this.fetchImpl=m,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},on=new qe(3e4,6e4);function Zt(b,m){return b.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:b.tenantId}):m}function jt(b,m,_,E){return Or.apply(this,arguments)}function Or(){return(Or=(0,d.Z)(function*(b,m,_,E,x={}){return $i(b,x,(0,d.Z)(function*(){let F={},se={};E&&("GET"===m?se=E:F={body:JSON.stringify(E)});const Le=(0,z.xO)(Object.assign({key:b.config.apiKey},se)).slice(1),lt=yield b._getAdditionalHeaders();return lt["Content-Type"]="application/json",b.languageCode&&(lt["X-Firebase-Locale"]=b.languageCode),Nn.fetch()(Gi(b,b.config.apiHost,_,Le),Object.assign({method:m,headers:lt,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function $i(b,m,_){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,d.Z)(function*(b,m,_){b._canInitEmulator=!1;const E=Object.assign(Object.assign({},sn),m);try{const x=new Qr(b),F=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const se=yield F.json();if("needConfirmation"in se)throw Kn(b,"account-exists-with-different-credential",se);if(F.ok&&!("errorMessage"in se))return se;{const Le=F.ok?se.errorMessage:se.error.message,[lt,Dt]=Le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===lt)throw Kn(b,"credential-already-in-use",se);if("EMAIL_EXISTS"===lt)throw Kn(b,"email-already-in-use",se);if("USER_DISABLED"===lt)throw Kn(b,"user-disabled",se);const Xt=E[lt]||lt.toLowerCase().replace(/[_\s]+/g,"-");if(Dt)throw Oe(b,Xt,Dt);Je(b,Xt)}}catch(x){if(x instanceof z.ZR)throw x;Je(b,"network-request-failed")}})).apply(this,arguments)}function zn(b,m,_,E){return zi.apply(this,arguments)}function zi(){return(zi=(0,d.Z)(function*(b,m,_,E,x={}){const F=yield jt(b,m,_,E,x);return"mfaPendingCredential"in F&&Je(b,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Gi(b,m,_,E){const x=`${m}${_}?${E}`;return b.config.emulator?bn(b.config,x):`${b.config.apiScheme}://${x}`}class Qr{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Pe(this.auth,"network-request-failed")),on.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(b,m,_){const E={appName:b.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const x=Pe(b,m,E);return x.customData._tokenResponse=_,x}function Wi(){return(Wi=(0,d.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function et(b,m){return cr.apply(this,arguments)}function cr(){return(cr=(0,d.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function er(b,m){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,d.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Ar(b){if(b)try{const m=new Date(Number(b));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Pn(){return(Pn=(0,d.Z)(function*(b,m=!1){const _=(0,z.m9)(b),E=yield _.getIdToken(m),x=yt(E);ae(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const F="object"==typeof x.firebase?x.firebase:void 0,se=F?.sign_in_provider;return{claims:x,token:E,authTime:Ar(Sn(x.auth_time)),issuedAtTime:Ar(Sn(x.iat)),expirationTime:Ar(Sn(x.exp)),signInProvider:se||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function Sn(b){return 1e3*Number(b)}function yt(b){const[m,_,E]=b.split(".");if(void 0===m||void 0===_||void 0===E)return Xe("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,z.tV)(_);return x?JSON.parse(x):(Xe("Failed to decode base64 JWT payload"),null)}catch(x){return Xe("Caught error parsing JWT payload as JSON",x?.toString()),null}}function Ft(b,m){return ri.apply(this,arguments)}function ri(){return(ri=(0,d.Z)(function*(b,m,_=!1){if(_)return m;try{return yield m}catch(E){throw E instanceof z.ZR&&tr(E)&&b.auth.currentUser===b&&(yield b.auth.signOut()),E}})).apply(this,arguments)}function tr({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class jr{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(m);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),E)}iteration(){var m=this;return(0,d.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class xt{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ar(this.lastLoginAt),this.creationTime=Ar(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xr(b){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,d.Z)(function*(b){var m;const _=b.auth,E=yield b.getIdToken(),x=yield Ft(b,er(_,{idToken:E}));ae(x?.users.length,_,"internal-error");const F=x.users[0];b._notifyReloadListener(F);const se=null!==(m=F.providerUserInfo)&&void 0!==m&&m.length?Vn(F.providerUserInfo):[],Le=wr(b.providerData,se),Xt=!!b.isAnonymous&&!(b.email&&F.passwordHash||Le?.length),Cn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:Le,metadata:new xt(F.createdAt,F.lastLoginAt),isAnonymous:Xt};Object.assign(b,Cn)})).apply(this,arguments)}function en(){return(en=(0,d.Z)(function*(b){const m=(0,z.m9)(b);yield Xr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function wr(b,m){return[...b.filter(E=>!m.some(x=>x.providerId===E.providerId)),...m]}function Vn(b){return b.map(m=>{var{providerId:_}=m,E=(0,he._T)(m,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Me(){return(Me=(0,d.Z)(function*(b,m){const _=yield $i(b,{},(0,d.Z)(function*(){const E=(0,z.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:x,apiKey:F}=b.config,se=Gi(b,x,"/v1/token",`key=${F}`),Le=yield b._getAdditionalHeaders();return Le["Content-Type"]="application/x-www-form-urlencoded",Nn.fetch()(se,{method:"POST",headers:Le,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ae(m.idToken,"internal-error"),ae(typeof m.idToken<"u","internal-error"),ae(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function vt(b){const m=yt(b);return ae(m,"internal-error"),ae(typeof m.exp<"u","internal-error"),ae(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var E=this;return(0,d.Z)(function*(){return ae(!E.accessToken||E.refreshToken,m,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(m,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var E=this;return(0,d.Z)(function*(){const{accessToken:x,refreshToken:F,expiresIn:se}=yield function nt(b,m){return Me.apply(this,arguments)}(m,_);E.updateTokensAndExpiration(x,F,Number(se))})()}updateTokensAndExpiration(m,_,E){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(m,_){const{refreshToken:E,accessToken:x,expirationTime:F}=_,se=new rt;return E&&(ae("string"==typeof E,"internal-error",{appName:m}),se.refreshToken=E),x&&(ae("string"==typeof x,"internal-error",{appName:m}),se.accessToken=x),F&&(ae("number"==typeof F,"internal-error",{appName:m}),se.expirationTime=F),se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new rt,this.toJSON())}_performRefresh(){return fe("not implemented")}}function Tt(b,m){ae("string"==typeof b||typeof b>"u","internal-error",{appName:m})}class Rt{constructor(m){var{uid:_,auth:E,stsTokenManager:x}=m,F=(0,he._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new xt(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,d.Z)(function*(){const E=yield Ft(_,_.stsTokenManager.getToken(_.auth,m));return ae(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(m){return function xn(b){return Pn.apply(this,arguments)}(this,m)}reload(){return function ii(b){return en.apply(this,arguments)}(this)}_assign(m){this!==m&&(ae(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Rt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var E=this;return(0,d.Z)(function*(){let x=!1;m.idToken&&m.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(m),x=!0),_&&(yield Xr(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var m=this;return(0,d.Z)(function*(){const _=yield m.getIdToken();return yield Ft(m,function Oi(b,m){return Wi.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var E,x,F,se,Le,lt,Dt,Xt;const Cn=null!==(E=_.displayName)&&void 0!==E?E:void 0,ei=null!==(x=_.email)&&void 0!==x?x:void 0,es=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,Gu=null!==(se=_.photoURL)&&void 0!==se?se:void 0,Wu=null!==(Le=_.tenantId)&&void 0!==Le?Le:void 0,qu=null!==(lt=_._redirectEventId)&&void 0!==lt?lt:void 0,nl=null!==(Dt=_.createdAt)&&void 0!==Dt?Dt:void 0,jp=null!==(Xt=_.lastLoginAt)&&void 0!==Xt?Xt:void 0,{uid:xh,emailVerified:Ku,isAnonymous:Nc,providerData:Ul,stsTokenManager:oa}=_;ae(xh&&oa,m,"internal-error");const E_=rt.fromJSON(this.name,oa);ae("string"==typeof xh,m,"internal-error"),Tt(Cn,m.name),Tt(ei,m.name),ae("boolean"==typeof Ku,m,"internal-error"),ae("boolean"==typeof Nc,m,"internal-error"),Tt(es,m.name),Tt(Gu,m.name),Tt(Wu,m.name),Tt(qu,m.name),Tt(nl,m.name),Tt(jp,m.name);const jn=new Rt({uid:xh,auth:m,email:ei,emailVerified:Ku,displayName:Cn,isAnonymous:Nc,photoURL:Gu,phoneNumber:es,tenantId:Wu,stsTokenManager:E_,createdAt:nl,lastLoginAt:jp});return Ul&&Array.isArray(Ul)&&(jn.providerData=Ul.map(C_=>Object.assign({},C_))),qu&&(jn._redirectEventId=qu),jn}static _fromIdTokenResponse(m,_,E=!1){return(0,d.Z)(function*(){const x=new rt;x.updateFromServerResponse(_);const F=new Rt({uid:_.localId,auth:m,stsTokenManager:x,isAnonymous:E});return yield Xr(F),F})()}}const W=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,E){var x=this;return(0,d.Z)(function*(){x.storage[_]=E})()}_get(_){var E=this;return(0,d.Z)(function*(){const x=E.storage[_];return void 0===x?null:x})()}_remove(_){var E=this;return(0,d.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return b.type="NONE",b})();function G(b,m,_){return`firebase:${b}:${m}:${_}`}class X{constructor(m,_,E){this.persistence=m,this.auth=_,this.userKey=E;const{config:x,name:F}=this.auth;this.fullUserKey=G(this.userKey,x.apiKey,F),this.fullPersistenceKey=G("persistence",x.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,d.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?Rt._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,d.Z)(function*(){if(_.persistence===m)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,E="authUser"){return(0,d.Z)(function*(){if(!_.length)return new X(re(W),m,E);const x=(yield Promise.all(_.map(function(){var Dt=(0,d.Z)(function*(Xt){if(yield Xt._isAvailable())return Xt});return function(Xt){return Dt.apply(this,arguments)}}()))).filter(Dt=>Dt);let F=x[0]||re(W);const se=G(E,m.config.apiKey,m.name);let Le=null;for(const Dt of _)try{const Xt=yield Dt._get(se);if(Xt){const Cn=Rt._fromJSON(m,Xt);Dt!==F&&(Le=Cn),F=Dt;break}}catch{}const lt=x.filter(Dt=>Dt._shouldAllowMigration);return F._shouldAllowMigration&&lt.length?(F=lt[0],Le&&(yield F._set(se,Le.toJSON())),yield Promise.all(_.map(function(){var Dt=(0,d.Z)(function*(Xt){if(Xt!==F)try{yield Xt._remove(se)}catch{}});return function(Xt){return Dt.apply(this,arguments)}}())),new X(F,m,E)):new X(F,m,E)})()}}function j(b){const m=b.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Ve(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(ft(m))return"Blackberry";if(ke(m))return"Webos";if(U(m))return"Safari";if((m.includes("chrome/")||oe(m))&&!m.includes("edge/"))return"Chrome";if(at(m))return"Android";{const E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function O(b=(0,z.z$)()){return/firefox\//i.test(b)}function U(b=(0,z.z$)()){const m=b.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function oe(b=(0,z.z$)()){return/crios\//i.test(b)}function Ve(b=(0,z.z$)()){return/iemobile/i.test(b)}function at(b=(0,z.z$)()){return/android/i.test(b)}function ft(b=(0,z.z$)()){return/blackberry/i.test(b)}function ke(b=(0,z.z$)()){return/webos/i.test(b)}function Ue(b=(0,z.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Lt(b=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function En(b=(0,z.z$)()){return Ue(b)||at(b)||ke(b)||ft(b)||/windows phone/i.test(b)||Ve(b)}function Fn(b,m=[]){let _;switch(b){case"Browser":_=j((0,z.z$)());break;case"Worker":_=`${j((0,z.z$)())}-${b}`;break;default:_=b}const E=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${P.SDK_VERSION}/${E}`}class Ks{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const E=F=>new Promise((se,Le)=>{try{se(m(F))}catch(lt){Le(lt)}});E.onAbort=_,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===m)return;const E=[];try{for(const x of _.queue)yield x(m),x.onAbort&&E.push(x.onAbort)}catch(x){E.reverse();for(const F of E)try{F()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}class Ro{constructor(m,_,E){this.app=m,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ys(this),this.idTokenSubscription=new Ys(this),this.beforeStateQueue=new Ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(m,_){var E=this;return _&&(this._popupRedirectResolver=re(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var x,F;if(!E._deleted&&(E.persistenceManager=yield X.create(E,m),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(F=E.currentUser)||void 0===F?void 0:F.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,d.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,d.Z)(function*(){var E;const x=yield _.assertedPersistence.getCurrentUser();let F=x,se=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Le=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,lt=F?._redirectEventId,Dt=yield _.tryRedirectSignIn(m);(!Le||Le===lt)&&Dt?.user&&(F=Dt.user,se=!0)}if(!F)return _.directlySetCurrentUser(null);if(!F._redirectEventId){if(se)try{yield _.beforeStateQueue.runMiddleware(F)}catch(Le){F=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Le))}return F?_.reloadAndSetCurrentUserOrClear(F):_.directlySetCurrentUser(null)}return ae(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===F._redirectEventId?_.directlySetCurrentUser(F):_.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(m){var _=this;return(0,d.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,d.Z)(function*(){try{yield Xr(m)}catch(E){if("auth/network-request-failed"!==E?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Kt(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var m=this;return(0,d.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,d.Z)(function*(){const E=m?(0,z.m9)(m):null;return E&&ae(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(m,_=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return m&&ae(E.tenantId===m.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(m)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(m),E.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,d.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(re(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new z.LL("auth","Firebase",m())}onAuthStateChanged(m,_,E){return this.registerStateListener(this.authStateSubscription,m,_,E)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,E){return this.registerStateListener(this.idTokenSubscription,m,_,E)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var E=this;return(0,d.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(_);return null===m?x.removeCurrentUser():x.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const E=m&&re(m)||_._popupRedirectResolver;ae(E,_,"argument-error"),_.redirectPersistenceManager=yield X.create(_,[re(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,d.Z)(function*(){var E,x;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===m?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,d.Z)(function*(){if(m===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,E,x){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_),se=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(se,this,"internal-error"),se.then(()=>F(this.currentUser)),"function"==typeof _?m.addObserver(_,E,x):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Fn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,d.Z)(function*(){var _;const E={"X-Client-Version":m.clientVersion};m.app.options.appId&&(E["X-Firebase-gmpid"]=m.app.options.appId);const x=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function Et(b){return(0,z.m9)(b)}class Ys{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,z.ne)(_=>this.observer=_)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zs(b,m,_){const E=Et(b);ae(E._canInitEmulator,E,"emulator-config-failed"),ae(/^https?:\/\//.test(m),E,"invalid-emulator-scheme");const x=!!_?.disableWarnings,F=bl(m),{host:se,port:Le}=function os(b){const m=bl(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(m.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const F=x[1];return{host:F,port:nr(E.substr(F.length+1))}}{const[F,se]=E.split(":");return{host:F,port:nr(se)}}}(m);E.config.emulator={url:`${F}//${se}${null===Le?"":`:${Le}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:se,port:Le,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Qs(){function b(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function bl(b){const m=b.indexOf(":");return m<0?"":b.substr(0,m+1)}function nr(b){if(!b)return null;const m=Number(b);return isNaN(m)?null:m}class si{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return fe("not implemented")}_getIdTokenResponse(m){return fe("not implemented")}_linkToIdToken(m,_){return fe("not implemented")}_getReauthenticationResolver(m){return fe("not implemented")}}function gi(b,m){return rr.apply(this,arguments)}function rr(){return(rr=(0,d.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:resetPassword",Zt(b,m))})).apply(this,arguments)}function dc(b,m){return _n.apply(this,arguments)}function _n(){return(_n=(0,d.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function eh(b,m){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,d.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:update",Zt(b,m))})).apply(this,arguments)}function Xs(){return(Xs=(0,d.Z)(function*(b,m){return zn(b,"POST","/v1/accounts:signInWithPassword",Zt(b,m))})).apply(this,arguments)}function as(b,m){return Js.apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:sendOobCode",Zt(b,m))})).apply(this,arguments)}function ls(b,m){return ir.apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(b,m){return as(b,m)})).apply(this,arguments)}function th(b,m){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(b,m){return as(b,m)})).apply(this,arguments)}function mi(b,m){return eo.apply(this,arguments)}function eo(){return(eo=(0,d.Z)(function*(b,m){return as(b,m)})).apply(this,arguments)}function wl(b,m){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(b,m){return as(b,m)})).apply(this,arguments)}function hc(){return(hc=(0,d.Z)(function*(b,m){return zn(b,"POST","/v1/accounts:signInWithEmailLink",Zt(b,m))})).apply(this,arguments)}function El(){return(El=(0,d.Z)(function*(b,m){return zn(b,"POST","/v1/accounts:signInWithEmailLink",Zt(b,m))})).apply(this,arguments)}class Ma extends si{constructor(m,_,E,x=null){super("password",E),this._email=m,this._password=_,this._tenantId=x}static _fromEmailAndPassword(m,_){return new Ma(m,_,"password")}static _fromEmailAndCode(m,_,E=null){return new Ma(m,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function Ta(b,m){return Xs.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function oi(b,m){return hc.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Je(m,"internal-error")}})()}_linkToIdToken(m,_){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return dc(m,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Dp(b,m){return El.apply(this,arguments)}(m,{idToken:_,email:E._email,oobCode:E._password});default:Je(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function to(b,m){return _i.apply(this,arguments)}function _i(){return(_i=(0,d.Z)(function*(b,m){return zn(b,"POST","/v1/accounts:signInWithIdp",Zt(b,m))})).apply(this,arguments)}class cs extends si{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new cs(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Je("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:x}=_,F=(0,he._T)(_,["providerId","signInMethod"]);if(!E||!x)return null;const se=new cs(E,x);return se.idToken=F.idToken||void 0,se.accessToken=F.accessToken||void 0,se.secret=F.secret,se.nonce=F.nonce,se.pendingToken=F.pendingToken||null,se}_getIdTokenResponse(m){return to(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,to(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,to(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,z.xO)(_)}return m}}function Tp(b,m){return pu.apply(this,arguments)}function pu(){return(pu=(0,d.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:sendVerificationCode",Zt(b,m))})).apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(b,m){return zn(b,"POST","/v1/accounts:signInWithPhoneNumber",Zt(b,m))})).apply(this,arguments)}function gu(){return(gu=(0,d.Z)(function*(b,m){const _=yield zn(b,"POST","/v1/accounts:signInWithPhoneNumber",Zt(b,m));if(_.temporaryProof)throw Kn(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Mp={USER_NOT_FOUND:"user-not-found"};function mu(){return(mu=(0,d.Z)(function*(b,m){return zn(b,"POST","/v1/accounts:signInWithPhoneNumber",Zt(b,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Mp)})).apply(this,arguments)}class Oo extends si{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new Oo({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new Oo({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Ap(b,m){return xa.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function ko(b,m){return gu.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function xp(b,m){return mu.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:E,verificationCode:x}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:E,code:x}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:F}=m;return E||_||x||F?new Oo({verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:F}):null}}class No{constructor(m){var _,E,x,F,se,Le;const lt=(0,z.zd)((0,z.pd)(m)),Dt=null!==(_=lt.apiKey)&&void 0!==_?_:null,Xt=null!==(E=lt.oobCode)&&void 0!==E?E:null,Cn=function _u(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=lt.mode)&&void 0!==x?x:null);ae(Dt&&Xt&&Cn,"argument-error"),this.apiKey=Dt,this.operation=Cn,this.code=Xt,this.continueUrl=null!==(F=lt.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(se=lt.languageCode)&&void 0!==se?se:null,this.tenantId=null!==(Le=lt.tenantId)&&void 0!==Le?Le:null}static parseLink(m){const _=function yu(b){const m=(0,z.zd)((0,z.pd)(b)).link,_=m?(0,z.zd)((0,z.pd)(m)).deep_link_id:null,E=(0,z.zd)((0,z.pd)(b)).deep_link_id;return(E?(0,z.zd)((0,z.pd)(E)).link:null)||E||_||m||b}(m);try{return new No(_)}catch{return null}}}let Cl=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,E){return Ma._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const x=No.parseLink(E);return ae(x,"argument-error"),Ma._fromEmailAndCode(_,x.code,x.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Nr{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Po extends Nr{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class As extends Po{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return ae("providerId"in _&&"signInMethod"in _,"argument-error"),cs._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ae(m.idToken||m.accessToken,"argument-error"),cs._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return As.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return As.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:F,nonce:se,providerId:Le}=m;if(!E&&!x&&!_&&!F||!Le)return null;try{return new As(Le)._credential({idToken:_,accessToken:E,nonce:se,pendingToken:F})}catch{return null}}}let vu=(()=>{class b extends Po{constructor(){super("facebook.com")}static credential(_){return cs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Il=(()=>{class b extends Po{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return cs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:x}=_;if(!E&&!x)return null;try{return b.credential(E,x)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),fc=(()=>{class b extends Po{constructor(){super("github.com")}static credential(_){return cs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Fo extends si{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return to(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,to(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,to(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:x,pendingToken:F}=_;return E&&x&&F&&E===x?new Fo(E,F):null}static _create(m,_){return new Fo(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yi extends Nr{constructor(m){ae(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return yi.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return yi.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Fo.fromJSON(m);return ae(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:E}=m;if(!_||!E)return null;try{return Fo._create(E,_)}catch{return null}}}let us=(()=>{class b extends Po{constructor(){super("twitter.com")}static credential(_,E){return cs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=_;if(!E||!x)return null;try{return b.credential(E,x)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function ai(b,m){return no.apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(b,m){return zn(b,"POST","/v1/accounts:signUp",Zt(b,m))})).apply(this,arguments)}class vi{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,E,x=!1){return(0,d.Z)(function*(){const F=yield Rt._fromIdTokenResponse(m,E,x),se=Lo(E);return new vi({user:F,providerId:se,_tokenResponse:E,operationType:_})})()}static _forOperation(m,_,E){return(0,d.Z)(function*(){yield m._updateTokensIfNecessary(E,!0);const x=Lo(E);return new vi({user:m,providerId:x,_tokenResponse:E,operationType:_})})()}}function Lo(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Rp(b){return pc.apply(this,arguments)}function pc(){return(pc=(0,d.Z)(function*(b){var m;const _=Et(b);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new vi({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield ai(_,{returnSecureToken:!0}),x=yield vi._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Gn extends z.ZR{constructor(m,_,E,x){var F;super(_.code,_.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Gn.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(m,_,E,x){return new Gn(m,_,E,x)}}function wu(b,m,_,E){return("reauthenticate"===m?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Gn._fromErrorAndOperation(b,F,m,E):F})}function rh(b){return new Set(b.map(({providerId:m})=>m).filter(m=>!!m))}function Ni(b,m){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,d.Z)(function*(b,m){const _=(0,z.m9)(b);yield qi(!0,_,m);const{providerUserInfo:E}=yield et(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),x=rh(E||[]);return _.providerData=_.providerData.filter(F=>x.has(F.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Dl(b,m){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,d.Z)(function*(b,m,_=!1){const E=yield Ft(b,m._linkToIdToken(b.auth,yield b.getIdToken()),_);return vi._forOperation(b,"link",E)})).apply(this,arguments)}function qi(b,m,_){return dn.apply(this,arguments)}function dn(){return(dn=(0,d.Z)(function*(b,m,_){yield Xr(m);const x=!1===b?"provider-already-linked":"no-such-provider";ae(rh(m.providerData).has(_)===b,m.auth,x)})).apply(this,arguments)}function gc(b,m){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,d.Z)(function*(b,m,_=!1){const{auth:E}=b,x="reauthenticate";try{const F=yield Ft(b,wu(E,x,m,b),_);ae(F.idToken,E,"internal-error");const se=yt(F.idToken);ae(se,E,"internal-error");const{sub:Le}=se;return ae(b.uid===Le,E,"user-mismatch"),vi._forOperation(b,x,F)}catch(F){throw"auth/user-not-found"===F?.code&&Je(E,"user-mismatch"),F}})).apply(this,arguments)}function mc(b,m){return bi.apply(this,arguments)}function bi(){return(bi=(0,d.Z)(function*(b,m,_=!1){const E="signIn",x=yield wu(b,E,m),F=yield vi._fromIdTokenResponse(b,E,x);return _||(yield b._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Ra(b,m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(b,m){return mc(Et(b),m)})).apply(this,arguments)}function Vt(b,m){return ka.apply(this,arguments)}function ka(){return(ka=(0,d.Z)(function*(b,m){const _=(0,z.m9)(b);return yield qi(!1,_,m.providerId),Dl(_,m)})).apply(this,arguments)}function kp(b,m){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,d.Z)(function*(b,m){return gc((0,z.m9)(b),m)})).apply(this,arguments)}function Eu(b,m){return Na.apply(this,arguments)}function Na(){return(Na=(0,d.Z)(function*(b,m){return zn(b,"POST","/v1/accounts:signInWithCustomToken",Zt(b,m))})).apply(this,arguments)}function ro(b,m){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(b,m){const _=Et(b),E=yield Eu(_,{token:m,returnSecureToken:!0}),x=yield vi._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Bo{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Ne._fromServerResponse(m,_):Je(m,"internal-error")}}class Ne extends Bo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Ne(_)}}function Qt(b,m,_){var E;ae((null===(E=_.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),ae(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ae(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(ae(_.android.packageName.length>0,b,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function ih(b,m,_){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,d.Z)(function*(b,m,_){const E=(0,z.m9)(b),x={requestType:"PASSWORD_RESET",email:m};_&&Qt(E,x,_),yield th(E,x)})).apply(this,arguments)}function dr(b,m,_){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,d.Z)(function*(b,m,_){yield gi((0,z.m9)(b),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Sl(b,m){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,d.Z)(function*(b,m){yield eh((0,z.m9)(b),{oobCode:m})})).apply(this,arguments)}function Tl(b,m){return jo.apply(this,arguments)}function jo(){return(jo=(0,d.Z)(function*(b,m){const _=(0,z.m9)(b),E=yield gi(_,{oobCode:m}),x=E.requestType;switch(ae(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(E.mfaInfo,_,"internal-error");default:ae(E.email,_,"internal-error")}let F=null;return E.mfaInfo&&(F=Bo._fromServerResponse(Et(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:F},operation:x}})).apply(this,arguments)}function sh(b,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,d.Z)(function*(b,m){const{data:_}=yield Tl((0,z.m9)(b),m);return _.email})).apply(this,arguments)}function Op(b,m,_){return io.apply(this,arguments)}function io(){return(io=(0,d.Z)(function*(b,m,_){const E=Et(b),x=yield ai(E,{returnSecureToken:!0,email:m,password:_}),F=yield vi._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(F.user),F})).apply(this,arguments)}function hr(b,m,_){return Ra((0,z.m9)(b),Cl.credential(m,_))}function Ki(b,m,_){return La.apply(this,arguments)}function La(){return(La=(0,d.Z)(function*(b,m,_){const E=(0,z.m9)(b),x={requestType:"EMAIL_SIGNIN",email:m};ae(_.handleCodeInApp,E,"argument-error"),_&&Qt(E,x,_),yield mi(E,x)})).apply(this,arguments)}function Va(b,m){return"EMAIL_SIGNIN"===No.parseLink(m)?.operation}function ds(b,m,_){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,d.Z)(function*(b,m,_){const E=(0,z.m9)(b),x=Cl.credentialWithLink(m,_||je());return ae(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ra(E,x)})).apply(this,arguments)}function _c(b,m){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,d.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:createAuthUri",Zt(b,m))})).apply(this,arguments)}function oh(b,m){return $o.apply(this,arguments)}function $o(){return($o=(0,d.Z)(function*(b,m){const E={identifier:m,continueUri:He()?je():"http://localhost"},{signinMethods:x}=yield _c((0,z.m9)(b),E);return x||[]})).apply(this,arguments)}function yc(b,m){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,d.Z)(function*(b,m){const _=(0,z.m9)(b),x={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};m&&Qt(_.auth,x,m);const{email:F}=yield ls(_.auth,x);F!==b.email&&(yield b.reload())})).apply(this,arguments)}function vc(b,m,_){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,d.Z)(function*(b,m,_){const E=(0,z.m9)(b),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:m};_&&Qt(E.auth,F,_);const{email:se}=yield wl(E.auth,F);se!==b.email&&(yield b.reload())})).apply(this,arguments)}function Du(b,m){return zo.apply(this,arguments)}function zo(){return(zo=(0,d.Z)(function*(b,m){return jt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ah(b,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,d.Z)(function*(b,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const E=(0,z.m9)(b),F={idToken:yield E.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},se=yield Ft(E,Du(E.auth,F));E.displayName=se.displayName||null,E.photoURL=se.photoUrl||null;const Le=E.providerData.find(({providerId:lt})=>"password"===lt);Le&&(Le.displayName=E.displayName,Le.photoURL=E.photoURL),yield E._updateTokensIfNecessary(se)})).apply(this,arguments)}function lh(b,m){return xs((0,z.m9)(b),m,null)}function Su(b,m){return xs((0,z.m9)(b),null,m)}function xs(b,m,_){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,d.Z)(function*(b,m,_){const{auth:E}=b,F={idToken:yield b.getIdToken(),returnSecureToken:!0};m&&(F.email=m),_&&(F.password=_);const se=yield Ft(b,dc(E,F));yield b._updateTokensIfNecessary(se,!0)})).apply(this,arguments)}class Un{constructor(m,_,E={}){this.isNewUser=m,this.providerId=_,this.profile=E}}class hs extends Un{constructor(m,_,E,x){super(m,_,E),this.username=x}}class Hn extends Un{constructor(m,_){super(m,"facebook.com",_)}}class Au extends hs{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class bc extends Un{constructor(m,_){super(m,"google.com",_)}}class ch extends hs{constructor(m,_,E){super(m,"twitter.com",_,E)}}function wc(b){const{user:m,_tokenResponse:_}=b;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Tu(b){var m,_;if(!b)return null;const{providerId:E}=b,x=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},F=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&b?.idToken){const se=null===(_=null===(m=yt(b.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(se)return new Un(F,"anonymous"!==se&&"custom"!==se?se:null)}if(!E)return null;switch(E){case"facebook.com":return new Hn(F,x);case"github.com":return new Au(F,x);case"google.com":return new bc(F,x);case"twitter.com":return new ch(F,x,b.screenName||null);case"custom":case"anonymous":return new Un(F,null);default:return new Un(F,E,x)}}(_)}class wi{constructor(m,_,E){this.type=m,this.credential=_,this.auth=E}static _fromIdtoken(m,_){return new wi("enroll",m,_)}static _fromMfaPendingCredential(m){return new wi("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,E;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return wi._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(E=m.multiFactorSession)&&void 0!==E&&E.idToken)return wi._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Ic{constructor(m,_,E){this.session=m,this.hints=_,this.signInResolver=E}static _fromError(m,_){const E=Et(m),x=_.customData._serverResponse,F=(x.mfaInfo||[]).map(Le=>Bo._fromServerResponse(E,Le));ae(x.mfaPendingCredential,E,"internal-error");const se=wi._fromMfaPendingCredential(x.mfaPendingCredential);return new Ic(se,F,function(){var Le=(0,d.Z)(function*(lt){const Dt=yield lt._process(E,se);delete x.mfaInfo,delete x.mfaPendingCredential;const Xt=Object.assign(Object.assign({},x),{idToken:Dt.idToken,refreshToken:Dt.refreshToken});switch(_.operationType){case"signIn":const Cn=yield vi._fromIdTokenResponse(E,_.operationType,Xt);return yield E._updateCurrentUser(Cn.user),Cn;case"reauthenticate":return ae(_.user,E,"internal-error"),vi._forOperation(_.user,_.operationType,Xt);default:Je(E,"internal-error")}});return function(lt){return Le.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,d.Z)(function*(){return _.signInResolver(m)})()}}function Ru(b,m){var _;const E=(0,z.m9)(b),x=m;return ae(m.customData.operationType,E,"argument-error"),ae(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Ic._fromError(E,x)}function Zn(b,m){return jt(b,"POST","/v2/accounts/mfaEnrollment:start",Zt(b,m))}class Rl{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Bo._fromServerResponse(m.auth,E)))})}static _fromUser(m){return new Rl(m)}getSession(){var m=this;return(0,d.Z)(function*(){return wi._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var E=this;return(0,d.Z)(function*(){const x=m,F=yield E.getSession(),se=yield Ft(E.user,x._process(E.user.auth,F,_));return yield E.user._updateTokensIfNecessary(se),E.user.reload()})()}unenroll(m){var _=this;return(0,d.Z)(function*(){const E="string"==typeof m?m:m.uid,x=yield _.user.getIdToken(),F=yield Ft(_.user,function xl(b,m){return jt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(b,m))}(_.user.auth,{idToken:x,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:se})=>se!==E),yield _.user._updateTokensIfNecessary(F);try{yield _.user.reload()}catch(se){if("auth/user-token-expired"!==se?.code)throw se}})()}}const uh=new WeakMap;function ja(b){const m=(0,z.m9)(b);return uh.has(m)||uh.set(m,Rl._fromUser(m)),uh.get(m)}const fs="__sak";class $a{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(fs,"1"),this.storage.removeItem(fs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const fr=(()=>{class b extends $a{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Dc(){const b=(0,z.z$)();return U(b)||Ue(b)}()&&function ss(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=En(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),F=this.localCache[E];x!==F&&_(E,F,x)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((Le,lt,Dt)=>{this.notifyListeners(Le,Dt)});const x=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Le=this.storage.getItem(x);if(_.newValue!==Le)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!E)return}const F=()=>{const Le=this.storage.getItem(x);!E&&this.localCache[x]===Le||this.notifyListeners(x,Le)},se=this.storage.getItem(x);!function Ht(){return(0,z.w1)()&&10===document.documentMode}()||se===_.newValue||_.newValue===_.oldValue?F():setTimeout(F,10)}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const F of Array.from(x))F(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var x=()=>super._set,F=this;return(0,d.Z)(function*(){yield x().call(F,_,E),F.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,x=this;return(0,d.Z)(function*(){const F=yield E().call(x,_);return x.localCache[_]=JSON.stringify(F),F})()}_remove(_){var E=()=>super._remove,x=this;return(0,d.Z)(function*(){yield E().call(x,_),delete x.localCache[_]})()}}return b.type="LOCAL",b})(),ks=(()=>{class b extends $a{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return b.type="SESSION",b})();let Ga=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(F=>F.isListeningto(_));if(E)return E;const x=new b(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,d.Z)(function*(){const x=_,{eventId:F,eventType:se,data:Le}=x.data,lt=E.handlersMap[se];if(!lt?.size)return;x.ports[0].postMessage({status:"ack",eventId:F,eventType:se});const Dt=Array.from(lt).map(function(){var Cn=(0,d.Z)(function*(ei){return ei(x.origin,Le)});return function(ei){return Cn.apply(this,arguments)}}()),Xt=yield function Sc(b){return Promise.all(b.map(function(){var m=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return m.apply(this,arguments)}}()))}(Dt);x.ports[0].postMessage({status:"done",eventId:F,eventType:se,response:Xt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Ko(b="",m=10){let _="";for(let E=0;E<m;E++)_+=Math.floor(10*Math.random());return b+_}class fh{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,E=50){var x=this;return(0,d.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let se,Le;return new Promise((lt,Dt)=>{const Xt=Ko("",20);F.port1.start();const Cn=setTimeout(()=>{Dt(new Error("unsupported_event"))},E);Le={messageChannel:F,onMessage(ei){const es=ei;if(es.data.eventId===Xt)switch(es.data.status){case"ack":clearTimeout(Cn),se=setTimeout(()=>{Dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(se),lt(es.data.response);break;default:clearTimeout(Cn),clearTimeout(se),Dt(new Error("invalid_response"))}}},x.handlers.add(Le),F.port1.addEventListener("message",Le.onMessage),x.target.postMessage({eventType:m,eventId:Xt,data:_},[F.port2])}).finally(()=>{Le&&x.removeMessageHandler(Le)})})()}}function Qn(){return window}function li(){return typeof Qn().WorkerGlobalScope<"u"&&"function"==typeof Qn().importScripts}function ps(){return(ps=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Wa="firebaseLocalStorageDb",qa="firebaseLocalStorage",Yo="fbase_key";class oo{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Zo(b,m){return b.transaction([qa],m?"readwrite":"readonly").objectStore(qa)}function Ol(){const b=indexedDB.open(Wa,1);return new Promise((m,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const E=b.result;try{E.createObjectStore(qa,{keyPath:Yo})}catch(x){_(x)}}),b.addEventListener("success",(0,d.Z)(function*(){const E=b.result;E.objectStoreNames.contains(qa)?m(E):(E.close(),yield function Pu(){const b=indexedDB.deleteDatabase(Wa);return new oo(b).toPromise()}(),m(yield Ol()))}))})}function Ka(b,m,_){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(b,m,_){const E=Zo(b,!0).put({[Yo]:m,value:_});return new oo(E).toPromise()})).apply(this,arguments)}function Qo(){return(Qo=(0,d.Z)(function*(b,m){const _=Zo(b,!1).get(m),E=yield new oo(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Nl(b,m){const _=Zo(b,!0).delete(m);return new oo(_).toPromise()}const Jo=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Ol()),_.db})()}_withRetries(_){var E=this;return(0,d.Z)(function*(){let x=0;for(;;)try{const F=yield E._openDb();return yield _(F)}catch(F){if(x++>3)throw F;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return li()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=Ga._getInstance(function kl(){return li()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(x,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(x,F){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(x,F){return["keyChanged"]});return function(x,F){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var E,x;if(_.activeServiceWorker=yield function Nu(){return ps.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new fh(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);!F||(null===(E=F[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=F[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Tc(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ol();return yield Ka(_,fs,"1"),yield Nl(_,fs),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var x=this;return(0,d.Z)(function*(){return x._withPendingWrite((0,d.Z)(function*(){return yield x._withRetries(F=>Ka(F,_,E)),x.localCache[_]=E,x.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,d.Z)(function*(){const x=yield E._withRetries(F=>function ph(b,m){return Qo.apply(this,arguments)}(F,_));return E.localCache[_]=x,x})()}_remove(_){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(x=>Nl(x,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const E=yield _._withRetries(se=>{const Le=Zo(se,!1).getAll();return new oo(Le).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const x=[],F=new Set;for(const{fbase_key:se,value:Le}of E)F.add(se),JSON.stringify(_.localCache[se])!==JSON.stringify(Le)&&(_.notifyListeners(se,Le),x.push(se));for(const se of Object.keys(_.localCache))_.localCache[se]&&!F.has(se)&&(_.notifyListeners(se,null),x.push(se));return x})()}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const F of Array.from(x))F(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function gh(b,m){return jt(b,"POST","/v2/accounts/mfaSignIn:start",Zt(b,m))}function $r(){return($r=(0,d.Z)(function*(b){return(yield jt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ao(b){return new Promise((m,_)=>{const E=document.createElement("script");E.setAttribute("src",b),E.onload=m,E.onerror=x=>{const F=Pe("internal-error");F.customData=x,_(F)},E.type="text/javascript",E.charset="UTF-8",function ta(){var b,m;return null!==(m=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==m?m:document}().appendChild(E)})}function na(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Zi=1e12;class Fu{constructor(m){this.auth=m,this.counter=Zi,this._widgets=new Map}render(m,_){const E=this.counter;return this._widgets.set(E,new Ln(m,this.auth.name,_||{})),this.counter++,E}reset(m){var _;const E=m||Zi;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Zi))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,d.Z)(function*(){var E;return null===(E=_._widgets.get(m||Zi))||void 0===E||E.execute(),""})()}}class Ln{constructor(m,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof m?document.getElementById(m):m;ae(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Np(b){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<b;E++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const mh=na("rcb"),kw=new qe(3e4,6e4);class f_{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Qn().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return ae(function _h(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Qn().grecaptcha):new Promise((E,x)=>{const F=Qn().setTimeout(()=>{x(Pe(m,"network-request-failed"))},kw.get());Qn()[mh]=()=>{Qn().clearTimeout(F),delete Qn()[mh];const Le=Qn().grecaptcha;if(!Le)return void x(Pe(m,"internal-error"));const lt=Le.render;Le.render=(Dt,Xt)=>{const Cn=lt(Dt,Xt);return this.counter++,Cn},this.hostLanguage=_,E(Le)},ao(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:mh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),x(Pe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Qn().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ow{load(m){return(0,d.Z)(function*(){return new Fu(m)})()}clearedOneInstance(){}}const lo="recaptcha",p_={theme:"light",type:"image"};class Pp{constructor(m,_=Object.assign({},p_),E){this.parameters=_,this.type=lo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Et(E),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof m?document.getElementById(m):m;ae(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ow:new f_,this.validateStartingState()}verify(){var m=this;return(0,d.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),E=m.getAssertedRecaptcha();return E.getResponse(_)||new Promise(F=>{const se=Le=>{!Le||(m.tokenChangeListeners.delete(se),F(Le))};m.tokenChangeListeners.add(se),m.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof m)m(_);else if("string"==typeof m){const E=Qn()[m];"function"==typeof E&&E(_)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,d.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,d.Z)(function*(){ae(He()&&!li(),m.auth,"internal-error"),yield function Mr(){let b=null;return new Promise(m=>{"complete"!==document.readyState?(b=()=>m(),window.addEventListener("load",b)):m()}).catch(m=>{throw b&&window.removeEventListener("load",b),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Pl(b){return $r.apply(this,arguments)}(m.auth);ae(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yn{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=Oo._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function gs(b,m,_){return st.apply(this,arguments)}function st(){return(st=(0,d.Z)(function*(b,m,_){const E=Et(b),x=yield sr(E,m,(0,z.m9)(_));return new yn(x,F=>Ra(E,F))})).apply(this,arguments)}function an(b,m,_){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,d.Z)(function*(b,m,_){const E=(0,z.m9)(b);yield qi(!1,E,"phone");const x=yield sr(E.auth,m,(0,z.m9)(_));return new yn(x,F=>Vt(E,F))})).apply(this,arguments)}function ms(b,m,_){return co.apply(this,arguments)}function co(){return(co=(0,d.Z)(function*(b,m,_){const E=(0,z.m9)(b),x=yield sr(E.auth,m,(0,z.m9)(_));return new yn(x,F=>kp(E,F))})).apply(this,arguments)}function sr(b,m,_){return uo.apply(this,arguments)}function uo(){return(uo=(0,d.Z)(function*(b,m,_){var E;const x=yield _.verify();try{let F;if(ae("string"==typeof x,b,"argument-error"),ae(_.type===lo,b,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const se=F.session;if("phoneNumber"in F)return ae("enroll"===se.type,b,"internal-error"),(yield Zn(b,{idToken:se.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ae("signin"===se.type,b,"internal-error");const Le=(null===(E=F.multiFactorHint)||void 0===E?void 0:E.uid)||F.multiFactorUid;return ae(Le,b,"missing-multi-factor-info"),(yield gh(b,{mfaPendingCredential:se.credential,mfaEnrollmentId:Le,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:se}=yield Tp(b,{phoneNumber:F.phoneNumber,recaptchaToken:x});return se}}finally{_._reset()}})).apply(this,arguments)}function Lu(b,m){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,d.Z)(function*(b,m){yield Dl((0,z.m9)(b),m)})).apply(this,arguments)}let yh=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=Et(_)}verifyPhoneNumber(_,E){return sr(this.auth,_,(0,z.m9)(E))}static credential(_,E){return Oo._fromVerification(_,E)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:x}=_;return E&&x?Oo._fromTokenResponse(E,x):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Ns(b,m){return m?re(m):(ae(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Bu extends si{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return to(m,this._buildIdpRequest())}_linkToIdToken(m,_){return to(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return to(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function ho(b){return mc(b.auth,new Bu(b),b.bypassAuthState)}function it(b){const{auth:m,user:_}=b;return ae(_,m,"internal-error"),gc(_,new Bu(b),b.bypassAuthState)}function xc(b){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,d.Z)(function*(b){const{auth:m,user:_}=b;return ae(_,m,"internal-error"),Dl(_,new Bu(b),b.bypassAuthState)})).apply(this,arguments)}class Ya{constructor(m,_,E,x,F=!1){this.auth=m,this.resolver=E,this.user=x,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,d.Z)(function*(E,x){m.pendingPromise={resolve:E,reject:x};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(E,x){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:F,tenantId:se,error:Le,type:lt}=m;if(Le)return void _.reject(Le);const Dt={auth:_.auth,requestUri:E,sessionId:x,tenantId:se||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(lt)(Dt))}catch(Xt){_.reject(Xt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return ho;case"linkViaPopup":case"linkViaRedirect":return xc;case"reauthViaPopup":case"reauthViaRedirect":return it;default:Je(this.auth,"internal-error")}}resolve(m){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Za=new qe(2e3,1e4);function Wn(b,m,_){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,d.Z)(function*(b,m,_){const E=Et(b);Se(b,m,Nr);const x=Ns(E,_);return new Fl(E,"signInViaPopup",m,x).executeNotNull()})).apply(this,arguments)}function Xa(b,m,_){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,d.Z)(function*(b,m,_){const E=(0,z.m9)(b);Se(E.auth,m,Nr);const x=Ns(E.auth,_);return new Fl(E.auth,"reauthViaPopup",m,x,E).executeNotNull()})).apply(this,arguments)}function vh(b,m,_){return ia.apply(this,arguments)}function ia(){return(ia=(0,d.Z)(function*(b,m,_){const E=(0,z.m9)(b);Se(E.auth,m,Nr);const x=Ns(E.auth,_);return new Fl(E.auth,"linkViaPopup",m,x,E).executeNotNull()})).apply(this,arguments)}let Fl=(()=>{class b extends Ya{constructor(_,E,x,F,se){super(_,E,F,se),this.provider=x,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const E=yield _.execute();return ae(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,d.Z)(function*(){Ee(1===_.filter.length,"Popup operations only handle one event");const E=Ko();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Pe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Za.get())};_()}}return b.currentPopupAction=null,b})();const Xi=new Map;class ci extends Ya{constructor(m,_,E=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,d.Z)(function*(){let E=Xi.get(_.auth._key());if(!E){try{const F=(yield function Ll(b,m){return zr.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;E=()=>Promise.resolve(F)}catch(x){E=()=>Promise.reject(x)}Xi.set(_.auth._key(),E)}return _.bypassAuthState||Xi.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(E,m);if("unknown"!==m.type){if(m.eventId){const x=yield E.auth._redirectUserForId(m.eventId);if(x)return E.user=x,_().call(E,m);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function zr(){return(zr=(0,d.Z)(function*(b,m){const _=go(m),E=po(b);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(_));return yield E._remove(_),x})).apply(this,arguments)}function Ps(b,m){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,d.Z)(function*(b,m){return po(b)._set(go(m),"true")})).apply(this,arguments)}function sa(){Xi.clear()}function kn(b,m){Xi.set(b._key(),m)}function po(b){return re(b._redirectPersistence)}function go(b){return G("pendingRedirect",b.config.apiKey,b.name)}function pr(b,m,_){return function hn(b,m,_){return ui.apply(this,arguments)}(b,m,_)}function ui(){return(ui=(0,d.Z)(function*(b,m,_){const E=Et(b);Se(b,m,Nr),yield E._initializationPromise;const x=Ns(E,_);return yield Ps(x,E),x._openRedirect(E,m,"signInViaRedirect")})).apply(this,arguments)}function gr(b,m,_){return function D(b,m,_){return T.apply(this,arguments)}(b,m,_)}function T(){return(T=(0,d.Z)(function*(b,m,_){const E=(0,z.m9)(b);Se(E.auth,m,Nr),yield E.auth._initializationPromise;const x=Ns(E.auth,_);yield Ps(x,E.auth);const F=yield bt(E);return x._openRedirect(E.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function k(b,m,_){return function $(b,m,_){return J.apply(this,arguments)}(b,m,_)}function J(){return(J=(0,d.Z)(function*(b,m,_){const E=(0,z.m9)(b);Se(E.auth,m,Nr),yield E.auth._initializationPromise;const x=Ns(E.auth,_);yield qi(!1,E,m.providerId),yield Ps(x,E.auth);const F=yield bt(E);return x._openRedirect(E.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function ue(b,m){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,d.Z)(function*(b,m){return yield Et(b)._initializationPromise,Ze(b,m,!1)})).apply(this,arguments)}function Ze(b,m){return ut.apply(this,arguments)}function ut(){return(ut=(0,d.Z)(function*(b,m,_=!1){const E=Et(b),x=Ns(E,m),se=yield new ci(E,x,_).execute();return se&&!_&&(delete se.user._redirectEventId,yield E._persistUserIfCurrent(se.user),yield E._setRedirectUser(null,m)),se})).apply(this,arguments)}function bt(b){return zt.apply(this,arguments)}function zt(){return(zt=(0,d.Z)(function*(b){const m=Ko(`${b.uid}:::`);return b._redirectEventId=m,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),m})).apply(this,arguments)}class Lr{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(m,E)&&(_=!0,this.sendToConsumer(m,E),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Gt(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fs(b);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var E;if(m.error&&!Fs(m)){const x=(null===(E=m.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Pe(this.auth,x))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const E=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&E}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mr(m))}saveEventToCache(m){this.cachedEventUids.add(mr(m)),this.lastProcessedEventTime=Date.now()}}function mr(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(m=>m).join("-")}function Fs({type:b,error:m}){return"unknown"===b&&"auth/no-auth-event"===m?.code}function Gr(b){return xr.apply(this,arguments)}function xr(){return(xr=(0,d.Z)(function*(b,m={}){return jt(b,"GET","/v1/projects",m)})).apply(this,arguments)}const di=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bh=/^https?/;function Ji(){return(Ji=(0,d.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:m}=yield Gr(b);for(const _ of m)try{if(g_(_))return}catch{}Je(b,"unauthorized-domain")})).apply(this,arguments)}function g_(b){const m=je(),{protocol:_,hostname:E}=new URL(m);if(b.startsWith("chrome-extension://")){const se=new URL(b);return""===se.hostname&&""===E?"chrome-extension:"===_&&b.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&se.hostname===E}if(!bh.test(_))return!1;if(di.test(b))return E===b;const x=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const Lp=new qe(3e4,6e4);function wh(){const b=Qn().___jsl;if(b?.H)for(const m of Object.keys(b.H))if(b.H[m].r=b.H[m].r||[],b.H[m].L=b.H[m].L||[],b.H[m].r=[...b.H[m].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let Xn=null;function mo(b){return Xn=Xn||function Nw(b){return new Promise((m,_)=>{var E,x,F;function se(){wh(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{wh(),_(Pe(b,"network-request-failed"))},timeout:Lp.get()})}if(null!==(x=null===(E=Qn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)m(gapi.iframes.getContext());else{if(null===(F=Qn().gapi)||void 0===F||!F.load){const Le=na("iframefcb");return Qn()[Le]=()=>{gapi.load?se():_(Pe(b,"network-request-failed"))},ao(`https://apis.google.com/js/api.js?onload=${Le}`).catch(lt=>_(lt))}se()}}).catch(m=>{throw Xn=null,m})}(b),Xn}const Eh=new qe(5e3,15e3),Ch={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ih(b){const m=b.config;ae(m.authDomain,b,"auth-domain-config-required");const _=m.emulator?bn(m,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,E={apiKey:m.apiKey,appName:b.name,v:P.SDK_VERSION},x=m_.get(b.config.apiHost);x&&(E.eid=x);const F=b._getFrameworks();return F.length&&(E.fw=F.join(",")),`${_}?${(0,z.xO)(E).slice(1)}`}function Uu(){return Uu=(0,d.Z)(function*(b){const m=yield mo(b),_=Qn().gapi;return ae(_,b,"internal-error"),m.open({where:document.body,url:Ih(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ch,dontclear:!0},E=>new Promise(function(){var x=(0,d.Z)(function*(F,se){yield E.restyle({setHideOnLeave:!1});const Le=Pe(b,"network-request-failed"),lt=Qn().setTimeout(()=>{se(Le)},Eh.get());function Dt(){Qn().clearTimeout(lt),F(E)}E.ping(Dt).then(Dt,()=>{se(Le)})});return function(F,se){return x.apply(this,arguments)}}()))}),Uu.apply(this,arguments)}const Rc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class kc{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Vl(b,m,_,E,x,F){ae(b.config.authDomain,b,"auth-domain-config-required"),ae(b.config.apiKey,b,"invalid-api-key");const se={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:E,v:P.SDK_VERSION,eventId:x};if(m instanceof Nr){m.setDefaultLanguage(b.languageCode),se.providerId=m.providerId||"",(0,z.xb)(m.getCustomParameters())||(se.customParameters=JSON.stringify(m.getCustomParameters()));for(const[lt,Dt]of Object.entries(F||{}))se[lt]=Dt}if(m instanceof Po){const lt=m.getScopes().filter(Dt=>""!==Dt);lt.length>0&&(se.scopes=lt.join(","))}b.tenantId&&(se.tid=b.tenantId);const Le=se;for(const lt of Object.keys(Le))void 0===Le[lt]&&delete Le[lt];return`${function tl({config:b}){return b.emulator?bn(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,z.xO)(Le).slice(1)}`}const Bl="webStorageSupport",Sh=class Oc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ks,this._completeRedirectFn=Ze,this._overrideRedirectResult=kn}_openPopup(m,_,E,x){var F=this;return(0,d.Z)(function*(){var se;Ee(null===(se=F.eventManagers[m._key()])||void 0===se?void 0:se.manager,"_initialize() not called before _openPopup()");const Le=Vl(m,_,E,je(),x);return function ju(b,m,_,E=500,x=600){const F=Math.max((window.screen.availHeight-x)/2,0).toString(),se=Math.max((window.screen.availWidth-E)/2,0).toString();let Le="";const lt=Object.assign(Object.assign({},Rc),{width:E.toString(),height:x.toString(),top:F,left:se}),Dt=(0,z.z$)().toLowerCase();_&&(Le=oe(Dt)?"_blank":_),O(Dt)&&(m=m||"http://localhost",lt.scrollbars="yes");const Xt=Object.entries(lt).reduce((ei,[es,Gu])=>`${ei}${es}=${Gu},`,"");if(function wn(b=(0,z.z$)()){var m;return Ue(b)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Dt)&&"_self"!==Le)return function yo(b,m){const _=document.createElement("a");_.href=b,_.target=m;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(m||"",Le),new kc(null);const Cn=window.open(m||"",Le,Xt);ae(Cn,b,"popup-blocked");try{Cn.focus()}catch{}return new kc(Cn)}(m,Le,Ko())})()}_openRedirect(m,_,E,x){var F=this;return(0,d.Z)(function*(){return yield F._originValidation(m),function Ou(b){Qn().location.href=b}(Vl(m,_,E,je(),x)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:x,promise:F}=this.eventManagers[_];return x?Promise.resolve(x):(Ee(F,"If manager is not set, promise should be"),F)}const E=this.initAndGetManager(m);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(m){var _=this;return(0,d.Z)(function*(){const E=yield function Bp(b){return Uu.apply(this,arguments)}(m),x=new Lr(m);return E.register("authEvent",F=>(ae(F?.authEvent,m,"invalid-auth-event"),{status:x.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:x},_.iframes[m._key()]=E,x})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Bl,{type:Bl},x=>{var F;const se=null===(F=x?.[0])||void 0===F?void 0:F[Bl];void 0!==se&&_(!!se),Je(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Fp(b){return Ji.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return En()||U()||Ue()}};class Th extends class $u{constructor(m){this.factorId=m}_process(m,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,E);case"signin":return this._finalizeSignIn(m,_.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Th(m)}_finalizeEnroll(m,_,E){return function Ml(b,m){return jt(b,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(b,m))}(m,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function ea(b,m){return jt(b,"POST","/v2/accounts/mfaSignIn:finalize",Zt(b,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let _s=(()=>{class b{constructor(){}static assertion(_){return Th._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var Ls="@firebase/auth";class Hp{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(E=>{m(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const zu=(0,z.Pz)("authIdTokenMaxAge")||300;let Mh=null;const b_=b=>function(){var m=(0,d.Z)(function*(_){const E=_&&(yield _.getIdTokenResult()),x=E&&((new Date).getTime()-Date.parse(E.issuedAtTime))/1e3;if(x&&x>zu)return;const F=E?.token;Mh!==F&&(Mh=F,yield fetch(b,{method:F?"POST":"DELETE",headers:F?{Authorization:`Bearer ${F}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function w_(b=(0,P.getApp)()){const m=(0,P._getProvider)(b,"auth");if(m.isInitialized())return m.getImmediate();const _=function me(b,m){const _=(0,P._getProvider)(b,"auth");if(_.isInitialized()){const x=_.getImmediate(),F=_.getOptions();if((0,z.vZ)(F,m??{}))return x;Je(x,"already-initialized")}return _.initialize({options:m})}(b,{popupRedirectResolver:Sh,persistence:[Jo,fr,ks]}),E=(0,z.Pz)("authTokenSyncURL");if(E){const F=b_(E);(function Al(b,m,_){(0,z.m9)(b).beforeAuthStateChanged(m,_)})(_,F,()=>F(_.currentUser)),function Cc(b,m,_,E){(0,z.m9)(b).onIdTokenChanged(m,_,E)}(_,se=>F(se))}const x=(0,z.q4)("auth");return x&&Zs(_,`http://${x}`),_}!function y_(b){(0,P._registerComponent)(new be.wA("auth",(m,{options:_})=>{const E=m.getProvider("app").getImmediate(),x=m.getProvider("heartbeat"),{apiKey:F,authDomain:se}=E.options;return((Le,lt)=>{ae(F&&!F.includes(":"),"invalid-api-key",{appName:Le.name}),ae(!se?.includes(":"),"argument-error",{appName:Le.name});const Dt={apiKey:F,authDomain:se,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fn(b)},Xt=new Ro(Le,lt,Dt);return function de(b,m){const _=m?.persistence||[],E=(Array.isArray(_)?_:[_]).map(re);m?.errorMap&&b._updateErrorMap(m.errorMap),b._initializeWithPersistence(E,m?.popupRedirectResolver)}(Xt,_),Xt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,E)=>{m.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new be.wA("auth-internal",m=>{const _=Et(m.getProvider("auth").getImmediate());return new Hp(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Ls,"0.21.1",function __(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,P.registerVersion)(Ls,"0.21.1","esm2017")}("Browser")},2090:(mt,Re,L)=>{L.d(Re,{$s:()=>rt,BH:()=>Oe,DV:()=>Kn,G6:()=>_t,GJ:()=>Gi,L:()=>pe,LL:()=>sn,P0:()=>Xe,Pz:()=>Pe,Sg:()=>Se,UG:()=>fe,UI:()=>Wi,US:()=>be,Wl:()=>Or,Yr:()=>He,ZB:()=>q,ZR:()=>Nn,aH:()=>Je,b$:()=>re,cI:()=>jt,dS:()=>Ut,eu:()=>Kt,g5:()=>P,gK:()=>tr,gQ:()=>xn,h$:()=>ce,hl:()=>un,hu:()=>z,jU:()=>Ee,m9:()=>rn,ne:()=>Pn,p$:()=>K,pd:()=>qs,q4:()=>_e,r3:()=>Qr,ru:()=>ee,tV:()=>we,uI:()=>ae,ug:()=>ii,vZ:()=>et,w1:()=>de,w9:()=>zi,xO:()=>Mn,xb:()=>Oi,z$:()=>We,zI:()=>qe,zd:()=>Ar});const z=function(W,G){if(!W)throw P(G)},P=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},le=function(W){const G=[];let X=0;for(let j=0;j<W.length;j++){let O=W.charCodeAt(j);O<128?G[X++]=O:O<2048?(G[X++]=O>>6|192,G[X++]=63&O|128):55296==(64512&O)&&j+1<W.length&&56320==(64512&W.charCodeAt(j+1))?(O=65536+((1023&O)<<10)+(1023&W.charCodeAt(++j)),G[X++]=O>>18|240,G[X++]=O>>12&63|128,G[X++]=O>>6&63|128,G[X++]=63&O|128):(G[X++]=O>>12|224,G[X++]=O>>6&63|128,G[X++]=63&O|128)}return G},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,G){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const X=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let O=0;O<W.length;O+=3){const U=W[O],oe=O+1<W.length,Ve=oe?W[O+1]:0,at=O+2<W.length,ft=at?W[O+2]:0;let Lt=(15&Ve)<<2|ft>>6,wn=63&ft;at||(wn=64,oe||(Lt=64)),j.push(X[U>>2],X[(3&U)<<4|Ve>>4],X[Lt],X[wn])}return j.join("")},encodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(W):this.encodeByteArray(le(W),G)},decodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(W):function(W){const G=[];let X=0,j=0;for(;X<W.length;){const O=W[X++];if(O<128)G[j++]=String.fromCharCode(O);else if(O>191&&O<224){const U=W[X++];G[j++]=String.fromCharCode((31&O)<<6|63&U)}else if(O>239&&O<365){const at=((7&O)<<18|(63&W[X++])<<12|(63&W[X++])<<6|63&W[X++])-65536;G[j++]=String.fromCharCode(55296+(at>>10)),G[j++]=String.fromCharCode(56320+(1023&at))}else{const U=W[X++],oe=W[X++];G[j++]=String.fromCharCode((15&O)<<12|(63&U)<<6|63&oe)}}return G.join("")}(this.decodeStringToByteArray(W,G))},decodeStringToByteArray(W,G){this.init_();const X=G?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let O=0;O<W.length;){const U=X[W.charAt(O++)],Ve=O<W.length?X[W.charAt(O)]:0;++O;const ft=O<W.length?X[W.charAt(O)]:64;++O;const Ue=O<W.length?X[W.charAt(O)]:64;if(++O,null==U||null==Ve||null==ft||null==Ue)throw Error();j.push(U<<2|Ve>>4),64!==ft&&(j.push(Ve<<4&240|ft>>2),64!==Ue&&j.push(ft<<6&192|Ue))}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},ce=function(W){const G=le(W);return be.encodeByteArray(G,!0)},pe=function(W){return ce(W).replace(/\./g,"")},we=function(W){try{return be.decodeString(W,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function K(W){return q(void 0,W)}function q(W,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return G}for(const X in G)!G.hasOwnProperty(X)||!te(X)||(W[X]=q(W[X],G[X]));return W}function te(W){return"__proto__"!==W}const Ce=()=>{try{return function Ge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=W&&we(W[1]);return G&&JSON.parse(G)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},_e=W=>{var G,X;return null===(X=null===(G=Ce())||void 0===G?void 0:G.emulatorHosts)||void 0===X?void 0:X[W]},Xe=W=>{const G=_e(W);if(!G)return;const X=G.lastIndexOf(":");if(X<=0||X+1===G.length)throw new Error(`Invalid host ${G} with no separate hostname and port!`);const j=parseInt(G.substring(X+1),10);return"["===G[0]?[G.substring(1,X-1),j]:[G.substring(0,X),j]},Je=()=>{var W;return null===(W=Ce())||void 0===W?void 0:W.config},Pe=W=>{var G;return null===(G=Ce())||void 0===G?void 0:G[`_${W}`]};class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,X)=>{this.resolve=G,this.reject=X})}wrapCallback(G){return(X,j)=>{X?this.reject(X):this.resolve(j),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(X):G(X,j))}}}function Se(W,G){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const j=G||"demo-project",O=W.iat||0,U=W.sub||W.user_id;if(!U)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const oe=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:O,exp:O+3600,auth_time:O,sub:U,user_id:U,firebase:{sign_in_provider:"custom",identities:{}}},W);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(oe)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function fe(){var W;const G=null===(W=Ce())||void 0===W?void 0:W.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ee(){return"object"==typeof self&&self.self===self}function ee(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function de(){const W=We();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function He(){return!1}function _t(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function un(){try{return"object"==typeof indexedDB}catch{return!1}}function Kt(){return new Promise((W,G)=>{try{let X=!0;const j="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(j);O.onsuccess=()=>{O.result.close(),X||self.indexedDB.deleteDatabase(j),W(!0)},O.onupgradeneeded=()=>{X=!1},O.onerror=()=>{var U;G((null===(U=O.error)||void 0===U?void 0:U.message)||"")}}catch(X){G(X)}})}function qe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Nn extends Error{constructor(G,X,j){super(X),this.code=G,this.customData=j,this.name="FirebaseError",Object.setPrototypeOf(this,Nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}}class sn{constructor(G,X,j){this.service=G,this.serviceName=X,this.errors=j}create(G,...X){const j=X[0]||{},O=`${this.service}/${G}`,U=this.errors[G],oe=U?function on(W,G){return W.replace(Zt,(X,j)=>{const O=G[j];return null!=O?String(O):`<${j}?>`})}(U,j):"Error";return new Nn(O,`${this.serviceName}: ${oe} (${O}).`,j)}}const Zt=/\{\$([^}]+)}/g;function jt(W){return JSON.parse(W)}function Or(W){return JSON.stringify(W)}const $i=function(W){let G={},X={},j={},O="";try{const U=W.split(".");G=jt(we(U[0])||""),X=jt(we(U[1])||""),O=U[2],j=X.d||{},delete X.d}catch{}return{header:G,claims:X,data:j,signature:O}},zi=function(W){const X=$i(W).claims;return!!X&&"object"==typeof X&&X.hasOwnProperty("iat")},Gi=function(W){const G=$i(W).claims;return"object"==typeof G&&!0===G.admin};function Qr(W,G){return Object.prototype.hasOwnProperty.call(W,G)}function Kn(W,G){if(Object.prototype.hasOwnProperty.call(W,G))return W[G]}function Oi(W){for(const G in W)if(Object.prototype.hasOwnProperty.call(W,G))return!1;return!0}function Wi(W,G,X){const j={};for(const O in W)Object.prototype.hasOwnProperty.call(W,O)&&(j[O]=G.call(X,W[O],O,W));return j}function et(W,G){if(W===G)return!0;const X=Object.keys(W),j=Object.keys(G);for(const O of X){if(!j.includes(O))return!1;const U=W[O],oe=G[O];if(cr(U)&&cr(oe)){if(!et(U,oe))return!1}else if(U!==oe)return!1}for(const O of j)if(!X.includes(O))return!1;return!0}function cr(W){return null!==W&&"object"==typeof W}function Mn(W){const G=[];for(const[X,j]of Object.entries(W))Array.isArray(j)?j.forEach(O=>{G.push(encodeURIComponent(X)+"="+encodeURIComponent(O))}):G.push(encodeURIComponent(X)+"="+encodeURIComponent(j));return G.length?"&"+G.join("&"):""}function Ar(W){const G={};return W.replace(/^\?/,"").split("&").forEach(j=>{if(j){const[O,U]=j.split("=");G[decodeURIComponent(O)]=decodeURIComponent(U)}}),G}function qs(W){const G=W.indexOf("?");if(!G)return"";const X=W.indexOf("#",G);return W.substring(G,X>0?X:void 0)}class xn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,X){X||(X=0);const j=this.W_;if("string"==typeof G)for(let Ue=0;Ue<16;Ue++)j[Ue]=G.charCodeAt(X)<<24|G.charCodeAt(X+1)<<16|G.charCodeAt(X+2)<<8|G.charCodeAt(X+3),X+=4;else for(let Ue=0;Ue<16;Ue++)j[Ue]=G[X]<<24|G[X+1]<<16|G[X+2]<<8|G[X+3],X+=4;for(let Ue=16;Ue<80;Ue++){const Lt=j[Ue-3]^j[Ue-8]^j[Ue-14]^j[Ue-16];j[Ue]=4294967295&(Lt<<1|Lt>>>31)}let ft,ke,O=this.chain_[0],U=this.chain_[1],oe=this.chain_[2],Ve=this.chain_[3],at=this.chain_[4];for(let Ue=0;Ue<80;Ue++){Ue<40?Ue<20?(ft=Ve^U&(oe^Ve),ke=1518500249):(ft=U^oe^Ve,ke=1859775393):Ue<60?(ft=U&oe|Ve&(U|oe),ke=2400959708):(ft=U^oe^Ve,ke=3395469782);const Lt=(O<<5|O>>>27)+ft+at+ke+j[Ue]&4294967295;at=Ve,Ve=oe,oe=4294967295&(U<<30|U>>>2),U=O,O=Lt}this.chain_[0]=this.chain_[0]+O&4294967295,this.chain_[1]=this.chain_[1]+U&4294967295,this.chain_[2]=this.chain_[2]+oe&4294967295,this.chain_[3]=this.chain_[3]+Ve&4294967295,this.chain_[4]=this.chain_[4]+at&4294967295}update(G,X){if(null==G)return;void 0===X&&(X=G.length);const j=X-this.blockSize;let O=0;const U=this.buf_;let oe=this.inbuf_;for(;O<X;){if(0===oe)for(;O<=j;)this.compress_(G,O),O+=this.blockSize;if("string"==typeof G){for(;O<X;)if(U[oe]=G.charCodeAt(O),++oe,++O,oe===this.blockSize){this.compress_(U),oe=0;break}}else for(;O<X;)if(U[oe]=G[O],++oe,++O,oe===this.blockSize){this.compress_(U),oe=0;break}}this.inbuf_=oe,this.total_+=X}digest(){const G=[];let X=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let O=this.blockSize-1;O>=56;O--)this.buf_[O]=255&X,X/=256;this.compress_(this.buf_);let j=0;for(let O=0;O<5;O++)for(let U=24;U>=0;U-=8)G[j]=this.chain_[O]>>U&255,++j;return G}}function Pn(W,G){const X=new Sn(W,G);return X.subscribe.bind(X)}class Sn{constructor(G,X){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=X,this.task.then(()=>{G(this)}).catch(j=>{this.error(j)})}next(G){this.forEachObserver(X=>{X.next(G)})}error(G){this.forEachObserver(X=>{X.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,X,j){let O;if(void 0===G&&void 0===X&&void 0===j)throw new Error("Missing Observer.");O=function vt(W,G){if("object"!=typeof W||null===W)return!1;for(const X of G)if(X in W&&"function"==typeof W[X])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:X,complete:j},void 0===O.next&&(O.next=Ft),void 0===O.error&&(O.error=Ft),void 0===O.complete&&(O.complete=Ft);const U=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch{}}),this.observers.push(O),U}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let X=0;X<this.observers.length;X++)this.sendOne(X,G)}sendOne(G,X){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{X(this.observers[G])}catch(j){typeof console<"u"&&console.error&&console.error(j)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ft(){}function tr(W,G){return`${W} failed: ${G} argument `}const Ut=function(W){const G=[];let X=0;for(let j=0;j<W.length;j++){let O=W.charCodeAt(j);if(O>=55296&&O<=56319){const U=O-55296;j++,z(j<W.length,"Surrogate pair missing trail surrogate."),O=65536+(U<<10)+(W.charCodeAt(j)-56320)}O<128?G[X++]=O:O<2048?(G[X++]=O>>6|192,G[X++]=63&O|128):O<65536?(G[X++]=O>>12|224,G[X++]=O>>6&63|128,G[X++]=63&O|128):(G[X++]=O>>18|240,G[X++]=O>>12&63|128,G[X++]=O>>6&63|128,G[X++]=63&O|128)}return G},ii=function(W){let G=0;for(let X=0;X<W.length;X++){const j=W.charCodeAt(X);j<128?G++:j<2048?G+=2:j>=55296&&j<=56319?(G+=4,X++):G+=3}return G};function rt(W,G=1e3,X=2){const j=G*Math.pow(X,W),O=Math.round(.5*j*(Math.random()-.5)*2);return Math.min(144e5,j+O)}function rn(W){return W&&W._delegate?W._delegate:W}},3499:(mt,Re,L)=>{var d=L(4650);let z=null;function P(){return z}const ce=new d.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function we(){return(0,d.LFG)(q)}()},providedIn:"platform"}),n})();const K=new d.OlP("Location Initialized");let q=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ge(){return new q((0,d.LFG)(ce))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Fe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ot(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Xe)},providedIn:"root"}),n})();const _e=new d.OlP("appBaseHref");let Xe=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Fe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ot(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const c=this.prepareExternalUrl(i+ot(s));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){const c=this.prepareExternalUrl(i+ot(s));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(_e,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Je=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Fe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let c=this.prepareExternalUrl(i+ot(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){let c=this.prepareExternalUrl(i+ot(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(_e,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ae(We(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ot(r))}normalize(t){return n.stripTrailingSlash(function Se(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,We(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ot(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ot(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ot,n.joinWithSlash=Fe,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(d.LFG(Ce))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Oe(){return new Pe((0,d.LFG)(Ce))}()},providedIn:"root"}),n})();function We(n){return n.replace(/\/index.html$/,"")}let _n=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Xs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let as=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Xs(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,c),Js(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Js(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Js(n,e){n.context.$implicit=e.item}let ir=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new th,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ur("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ur("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class th{constructor(){this.$implicit=null,this.ngIf=null}}function ur(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class mi{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let eo=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),wl=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new mi(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(eo,9))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),El=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),c=-1===i.indexOf("-")?void 0:d.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,c):this._renderer.removeStyle(this._ngEl.nativeElement,i,c)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.aQg),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),nh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const yi="browser";function Lo(n){return"server"===n}let wu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new rh((0,d.LFG)(ce),window)}),n})();class rh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Pr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ni(this.window.history)||Ni(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ni(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xs extends class Su extends class be{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){z||(z=n)}(new xs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Tu(){return Rs=Rs||document.querySelector("base"),Rs?Rs.getAttribute("href"):null}();return null==t?null:function hs(n){Un=Un||document.createElement("a"),Un.setAttribute("href",n);const e=Un.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Rs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function dc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Un,Rs=null;const Hn=new d.OlP("TRANSITION_ID"),bc=[{provide:d.ip1,useFactory:function Au(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Hn,ce,d.zs3],multi:!0}];let wc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ec=new d.OlP("EventManagerPlugins");let Cc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const c=i[s];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ec),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Al{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Go=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Wo=(()=>{class n extends Go{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Mu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Mu))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Mu(n){P().remove(n)}const qo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xu=/%COMP%/g;function xl(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?xl(n,i,t):(i=i.replace(xu,n),t.push(i))}return t}function Rl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ja=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new fs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ku(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new dh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=xl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Cc),d.LFG(Wo),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class fs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(qo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(za(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(za(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=qo[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=qo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Rl(r)):this.eventManager.addEventListener(e,t,Rl(r))}}function za(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ku extends fs{constructor(e,t,r,i){super(e),this.component=r;const s=xl(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Zn(n){return"_ngcontent-%COMP%".replace(xu,n)}(i+"-"+r.id),this.hostAttr=function Ml(n){return"_nghost-%COMP%".replace(xu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class dh extends fs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=xl(i.id,i.styles,[]);for(let c=0;c<s.length;c++){const h=document.createElement("style");h.textContent=s[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let fr=(()=>{class n extends Al{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const hh=["alt","control","meta","shift"],ks={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ga=(()=>{class n extends Al{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,s.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),hh.forEach(y=>{const C=r.indexOf(y);C>-1&&(r.splice(C,1),c+=y+".")}),c+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static matchEventFullKeyCode(t,r){let i=ks[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),hh.forEach(c=>{c!==i&&(0,Sc[c])(t)&&(s+=c+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Wa=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:yi},{provide:d.g9A,useValue:function Nu(){xs.makeCurrent()},multi:!0},{provide:ce,useFactory:function Tc(){return(0,d.RDi)(document),document},deps:[]}]),so=new d.OlP(""),qa=[{provide:d.rWj,useClass:class ch{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let s=i.length,c=!1;const h=function(p){c=c||p,s--,0==s&&r(c)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Yo=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function ps(){return new d.qLn},deps:[]},{provide:Ec,useClass:fr,multi:!0,deps:[ce,d.R0b,d.Lbi]},{provide:Ec,useClass:Ga,multi:!0,deps:[ce]},{provide:ja,useClass:ja,deps:[Cc,Wo,d.AFp]},{provide:d.FYo,useExisting:ja},{provide:Go,useExisting:Wo},{provide:Wo,useClass:Wo,deps:[ce]},{provide:Cc,useClass:Cc,deps:[Ec,d.R0b]},{provide:class Vo{},useClass:wc,deps:[]},[]];let oo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Hn,useExisting:d.AFp},bc]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(so,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Yo,...qa],imports:[nh,d.hGG]}),n})(),Yi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ka(){return new Yi((0,d.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let lo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):d.LFG(Pp),r},providedIn:"root"}),n})(),Pp=(()=>{class n extends lo{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function p_(n){return new Pp(n.get(ce))}(d.LFG(d.zs3)),r},providedIn:"root"}),n})();var yn=L(8996),gs=L(3269);function st(...n){const e=(0,gs.yG)(n);return(0,yn.D)(n,e)}var an=L(7579);class Rn extends an.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const co=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var sr=L(9751);const{isArray:uo}=Array,{getPrototypeOf:Lu,prototype:Vu,keys:yh}=Object;function Ns(n){if(1===n.length){const e=n[0];if(uo(e))return{args:e,keys:null};if(function Bu(n){return n&&"object"==typeof n&&Lu(n)===Vu}(e)){const t=yh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ho=L(4671),it=L(4004);const{isArray:xc}=Array;function Ya(n){return(0,it.U)(e=>function Qi(n,e){return xc(e)?n(...e):n(e)}(n,e))}function Za(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Wn=L(5403),Qa=L(9672);function Xa(...n){const e=(0,gs.yG)(n),t=(0,gs.jO)(n),{args:r,keys:i}=Ns(n);if(0===r.length)return(0,yn.D)([],e);const s=new sr.y(function Ja(n,e,t=ho.y){return r=>{vh(e,()=>{const{length:i}=n,s=new Array(i);let c=i,h=i;for(let p=0;p<i;p++)vh(e,()=>{const y=(0,yn.D)(n[p],e);let C=!1;y.subscribe((0,Wn.x)(r,S=>{s[p]=S,C||(C=!0,h--),h||r.next(t(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Za(i,c):ho.y));return t?s.pipe(Ya(t)):s}function vh(n,e,t){n?(0,Qa.f)(t,n,e):e()}var ia=L(8189);function fo(...n){return function Fl(){return(0,ia.J)(1)}()((0,yn.D)(n,(0,gs.yG)(n)))}var Xi=L(8421);function ci(n){return new sr.y(e=>{(0,Xi.Xf)(n()).subscribe(e)})}var Ll=L(9635),zr=L(576);function Ps(n,e){const t=(0,zr.m)(n)?n:()=>n,r=i=>i.error(t());return new sr.y(e?i=>e.schedule(r,0,i):r)}var Fr=L(515),sa=L(727),kn=L(4482);function po(){return(0,kn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Wn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class go extends sr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,kn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Wn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sa.w0.EMPTY)}return e}refCount(){return po()(this)}}function pr(n,e){return(0,kn.e)((t,r)=>{let i=null,s=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,Wn.x)(r,p=>{i?.unsubscribe();let y=0;const C=s++;(0,Xi.Xf)(n(p,C)).subscribe(i=(0,Wn.x)(r,S=>r.next(e?e(p,S,C,y++):S),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function hn(n){return n<=0?()=>Fr.E:(0,kn.e)((e,t)=>{let r=0;e.subscribe((0,Wn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ui(...n){const e=(0,gs.yG)(n);return(0,kn.e)((t,r)=>{(e?fo(n,t,e):fo(n,t)).subscribe(r)})}function gr(n,e){return(0,kn.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var D=L(5577);function T(n){return(0,kn.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function k(n=$){return(0,kn.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function $(){return new co}function J(n,e){const t=arguments.length>=2;return r=>r.pipe(n?gr((i,s)=>n(i,s,r)):ho.y,hn(1),t?T(e):k(()=>new co))}function ue(n,e){return(0,zr.m)(e)?(0,D.z)(n,e,1):(0,D.z)(n,1)}var Ie=L(8505);function Ze(n){return(0,kn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,Wn.x)(t,void 0,void 0,c=>{s=(0,Xi.Xf)(n(c,Ze(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function ut(n,e,t,r,i){return(s,c)=>{let h=t,p=e,y=0;s.subscribe((0,Wn.x)(c,C=>{const S=y++;p=h?n(p,C,S):(h=!0,C),r&&c.next(p)},i&&(()=>{h&&c.next(p),c.complete()})))}}function bt(n,e){return(0,kn.e)(ut(n,e,arguments.length>=2,!0))}function zt(n){return n<=0?()=>Fr.E:(0,kn.e)((e,t)=>{let r=[];e.subscribe((0,Wn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Mt(n,e){const t=arguments.length>=2;return r=>r.pipe(n?gr((i,s)=>n(i,s,r)):ho.y,zt(1),t?T(e):k(()=>new co))}function Fs(n){return(0,kn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Gt="primary",Gr=Symbol("RouteTitle");class xr{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function di(n){return new xr(n)}function bh(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const c=r[s],h=n[s];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ji(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!g_(n[i],e[i]))return!1;return!0}function g_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Lp(n){return Array.prototype.concat.apply([],n)}function wh(n){return n.length>0?n[n.length-1]:null}function Xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function mo(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,yn.D)(Promise.resolve(n)):st(n)}const Pw={exact:function Bp(n,e,t){if(!yo(n.segments,e.segments)||!_o(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Bp(n.children[r],e.children[r],t))return!1;return!0},subset:Rc},Ch={exact:function Ih(n,e){return Ji(n,e)},subset:function Uu(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>g_(n[t],e[t]))},ignored:()=>!0};function m_(n,e,t){return Pw[t.paths](n.root,e.root,t.matrixParams)&&Ch[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Rc(n,e,t){return Hu(n,e,e.segments,t)}function Hu(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!yo(i,t)||e.hasChildren()||!_o(i,t,r))}if(n.segments.length===t.length){if(!yo(n.segments,t)||!_o(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Rc(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(yo(n.segments,i)&&_o(n.segments,i,r)&&n.children[Gt])&&Hu(n.children[Gt],e,s,r)}}function _o(n,e,t){return e.every((r,i)=>Ch[t](n[i].parameters,r.parameters))}class el{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=di(this.queryParams)),this._queryParamMap}toString(){return tl.serialize(this)}}class tn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bl(this)}}class kc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=di(this.parameters)),this._parameterMap}toString(){return Hp(this)}}function yo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Dh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Vl},providedIn:"root"}),n})();class Vl{parse(e){const t=new m(e);return new el(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Oc(e.root,!0)}`,r=function y_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${$u(t)}=${$u(i)}`).join("&"):`${$u(t)}=${$u(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Th(n){return encodeURI(n)}(e.fragment)}`:""}`}}const tl=new Vl;function Bl(n){return n.segments.map(e=>Hp(e)).join("/")}function Oc(n,e){if(!n.hasChildren())return Bl(n);if(e){const t=n.children[Gt]?Oc(n.children[Gt],!1):"",r=[];return Xn(n.children,(i,s)=>{s!==Gt&&r.push(`${s}:${Oc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Up(n,e){let t=[];return Xn(n.children,(r,i)=>{i===Gt&&(t=t.concat(e(r,i)))}),Xn(n.children,(r,i)=>{i!==Gt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Gt?[Oc(n.children[Gt],!1)]:[`${i}:${Oc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${Bl(n)}/${t[0]}`:`${Bl(n)}/(${t.join("//")})`}}function Sh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $u(n){return Sh(n).replace(/%3B/gi,";")}function _s(n){return Sh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ls(n){return decodeURIComponent(n)}function Ah(n){return Ls(n.replace(/\+/g,"%20"))}function Hp(n){return`${_s(n.path)}${function __(n){return Object.keys(n).map(e=>`;${_s(e)}=${_s(n[e])}`).join("")}(n.parameters)}`}const v_=/^[^\/()?;=#]+/;function zu(n){const e=n.match(v_);return e?e[0]:""}const Mh=/^[^=?&#]+/,w_=/^[^&#]+/;class m{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Gt]=new tn(e,t)),r}parseSegment(){const e=zu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new kc(Ls(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=zu(this.remaining);i&&(r=i,this.capture(r))}e[Ls(t)]=Ls(r)}parseQueryParam(e){const t=function b_(n){const e=n.match(Mh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function b(n){const e=n.match(w_);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Ah(t),s=Ah(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Gt);const c=this.parseChildren();t[s]=1===Object.keys(c).length?c[Gt]:new tn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function _(n){return n.segments.length>0?new tn([],{[Gt]:n}):n}function E(n){const e={};for(const r of Object.keys(n.children)){const s=E(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function x(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new tn(n.segments.concat(e.segments),e.children)}return n}(new tn(n.segments,e))}function F(n){return n instanceof el}function Xt(n,e,t,r,i){if(0===t.length)return es(e.root,e.root,e.root,r,i);const s=function qu(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Wu(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Xn(s.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===c?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new Wu(t,e,r)}(t);return s.toRoot()?es(e.root,e.root,new tn([],{}),r,i):function c(p){const y=function xh(n,e,t,r){if(n.isAbsolute)return new nl(e.root,!0,0);if(-1===r)return new nl(t,t===e.root,0);return function Ku(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new nl(r,!1,i-s)}(t,r+(Cn(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),C=y.processChildren?oa(y.segmentGroup,y.index,s.commands):Ul(y.segmentGroup,y.index,s.commands);return es(e.root,y.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function Cn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ei(n){return"object"==typeof n&&null!=n&&n.outlets}function es(n,e,t,r,i){let c,s={};r&&Xn(r,(p,y)=>{s[y]=Array.isArray(p)?p.map(C=>`${C}`):`${p}`}),c=n===e?t:Gu(n,e,t);const h=_(E(c));return new el(h,s,i)}function Gu(n,e,t){const r={};return Xn(n.children,(i,s)=>{r[s]=i===e?t:Gu(i,e,t)}),new tn(n.segments,r)}class Wu{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Cn(r[0]))throw new d.vHH(4003,!1);const i=r.find(ei);if(i&&i!==wh(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ul(n,e,t){if(n||(n=new tn([],{})),0===n.segments.length&&n.hasChildren())return oa(n,e,t);const r=function E_(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const c=n.segments[i],h=t[r];if(ei(h))break;const p=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!$p(p,y,c))return s;r+=2}else{if(!$p(p,{},c))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new tn(n.segments.slice(0,r.pathIndex),{});return s.children[Gt]=new tn(n.segments.slice(r.pathIndex),n.children),oa(s,0,i)}return r.match&&0===i.length?new tn(n.segments,{}):r.match&&!n.hasChildren()?jn(n,e,t):r.match?oa(n,0,i):jn(n,e,t)}function oa(n,e,t){if(0===t.length)return new tn(n.segments,{});{const r=function Nc(n){return ei(n[0])?n[0].outlets:{[Gt]:n}}(t),i={};return Xn(r,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[c]=Ul(n.children[c],e,s))}),Xn(n.children,(s,c)=>{void 0===r[c]&&(i[c]=s)}),new tn(n.segments,i)}}function jn(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(ei(s)){const p=C_(s.outlets);return new tn(r,p)}if(0===i&&Cn(t[0])){r.push(new kc(n.segments[e].path,Fw(t[0]))),i++;continue}const c=ei(s)?s.outlets[Gt]:`${s}`,h=i<t.length-1?t[i+1]:null;c&&h&&Cn(h)?(r.push(new kc(c,Fw(h))),i+=2):(r.push(new kc(c,{})),i++)}return new tn(r,{})}function C_(n){const e={};return Xn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=jn(new tn([],{}),0,t))}),e}function Fw(n){const e={};return Xn(n,(t,r)=>e[r]=`${t}`),e}function $p(n,e,t){return n==t.path&&Ji(e,t.parameters)}class aa{constructor(e,t){this.id=e,this.url=t}}class I_ extends aa{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pc extends aa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zp extends aa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Lw extends aa{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class BS extends aa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JP extends aa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eF extends aa{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Rh extends aa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D_ extends aa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vw{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bw{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Uw{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class US{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hw{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jw{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gp{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $w{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=kh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=kh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Wp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wp(e,this._root).map(t=>t.value)}}function kh(n,e){if(n===e.value)return e;for(const t of e.children){const r=kh(n,t);if(r)return r}return null}function Wp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Wp(n,t);if(r.length)return r.unshift(e),r}return[]}class la{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class zw extends $w{constructor(e,t){super(e),this.snapshot=t,Oh(this,e)}toString(){return this.snapshot.toString()}}function qp(n,e){const t=function Kp(n,e){const c=new ca([],{},{},"",{},Gt,e,null,n.root,-1,{});return new S_("",new la(c,[]))}(n,e),r=new Rn([new kc("",{})]),i=new Rn({}),s=new Rn({}),c=new Rn({}),h=new Rn(""),p=new Hl(r,i,c,h,s,Gt,e,t.root);return p.snapshot=t.root,new zw(new la(p,[]),t)}class Hl{constructor(e,t,r,i,s,c,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,it.U)(y=>y[Gr]))??st(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(e=>di(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(e=>di(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Zp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ca{constructor(e,t,r,i,s,c,h,p,y,C,S,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this.title=this.data?.[Gr],this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=C,this._correctedLastPathIndex=R??C,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=di(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=di(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class S_ extends $w{constructor(e,t){super(t),this.url=e,Oh(this,t)}toString(){return Gw(this._root)}}function Oh(n,e){e.value._routerState=n,e.children.forEach(t=>Oh(n,t))}function Gw(n){const e=n.children.length>0?` { ${n.children.map(Gw).join(", ")} } `:"";return`${n.value}${e}`}function T_(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ji(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ji(e.params,t.params)||n.params.next(t.params),function Fp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ji(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ji(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Qp(n,e){const t=Ji(n.params,e.params)&&function ju(n,e){return yo(n,e)&&n.every((t,r)=>Ji(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Qp(n.parent,e.parent))}function Nh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function HS(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Nh(n,r,i);return Nh(n,r)})}(n,e,t);return new la(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>Nh(n,h)),c}}const r=function jS(n){return new Hl(new Rn(n.url),new Rn(n.params),new Rn(n.queryParams),new Rn(n.fragment),new Rn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Nh(n,s));return new la(r,i)}}const A_="ngNavigationCancelingError";function Xp(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=F(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Ww(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Ww(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[A_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function M_(n){return qw(n)&&F(n.url)}function qw(n){return n&&n[A_]}class Kw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Jp,this.attachRef=null}}let Jp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Kw,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eg=!1;let Fc=(()=>{class n{constructor(t,r,i,s,c){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Gt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,eg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,eg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,eg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,eg);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new $S(t,h,i.injector);if(r&&function Zu(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(c);this.activated=i.createComponent(y,i.length,p)}else this.activated=i.createComponent(c,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jp),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class $S{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Hl?this.route:e===Jp?this.childContexts:this.parent.get(e,t)}}let Lc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Fc],encapsulation:2}),n})();function Yw(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function k_(n){const e=n.children&&n.children.map(k_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=Lc),t}function Bs(n){return n.outlet||Gt}function tg(n,e){const t=n.filter(r=>Bs(r)===e);return t.push(...n.filter(r=>Bs(r)!==e)),t}function ng(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class O_{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),T_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Vs(t);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,i[c],r),delete i[c]}),Xn(i,(s,c)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Vs(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Vs(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Vs(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new jw(s.value.snapshot))}),e.children.length&&this.forwardEvent(new US(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(T_(i),i===s)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),T_(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=ng(i.snapshot),p=h?.get(d._Vd)??null;c.attachRef=null,c.route=i,c.resolver=p,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class GS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class N_{constructor(e,t){this.component=e,this.route=t}}function sF(n,e,t){const r=n._root;return Fh(r,e?e._root:null,t,[r.value])}function Ph(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Fh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Vs(e);return n.children.forEach(c=>{(function Xw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function P_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!yo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yo(n.url,e.url)||!Ji(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qp(n,e)||!Ji(n.queryParams,e.queryParams);default:return!Qp(n,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new GS(r)):(s.data=c.data,s._resolvedData=c._resolvedData),Fh(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new N_(h.outlet.component,c))}else c&&Qu(e,h,i),i.canActivateChecks.push(new GS(r)),Fh(n,null,s.component?h?h.children:null:t,r,i)})(c,s[c.value.outlet],t,r.concat([c.value]),i),delete s[c.value.outlet]}),Xn(s,(c,h)=>Qu(c,t.getContext(h),i)),i}function Qu(n,e,t){const r=Vs(n),i=n.value;Xn(r,(s,c)=>{Qu(s,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new N_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Xu(n){return"function"==typeof n}function rg(n){return n instanceof co||"EmptyError"===n?.name}const ig=Symbol("INITIAL_VALUE");function Ju(){return pr(n=>Xa(n.map(e=>e.pipe(hn(1),ui(ig)))).pipe((0,it.U)(e=>{for(const t of e)if(!0!==t){if(t===ig)return ig;if(!1===t||t instanceof el)return t}return!0}),gr(e=>e!==ig),hn(1)))}function Ei(n){return(0,Ll.z)((0,Ie.b)(e=>{if(F(e))throw Xp(0,e)}),(0,it.U)(e=>!0===e))}const sg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function og(n,e,t,r,i){const s=ti(n,e,t);return s.matched?function B_(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?st(i.map(c=>{const h=Ph(c,n);return mo(function qS(n){return n&&Xu(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Ju(),Ei()):st(!0)}(r=Yw(e,r),e,t).pipe((0,it.U)(c=>!0===c?s:{...sg})):st(s)}function ti(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...sg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||bh)(t,n,e);if(!i)return{...sg};const s={};Xn(i.posParams,(h,p)=>{s[p]=h.path});const c=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function jl(n,e,t,r,i="corrected"){if(t.length>0&&function rT(n,e,t){return t.some(r=>ag(n,e,r)&&Bs(r)!==Gt)}(n,t,r)){const c=new tn(e,function nT(n,e,t,r){const i={};i[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Bs(s)!==Gt){const c=new tn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Bs(s)]=c}return i}(n,e,r,new tn(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function n0(n,e,t){return t.some(r=>ag(n,e,r))}(n,t,r)){const c=new tn(n.segments,function t0(n,e,t,r,i,s){const c={};for(const h of r)if(ag(n,t,h)&&!i[Bs(h)]){const p=new tn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,c[Bs(h)]=p}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const s=new tn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function ag(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function U_(n,e,t,r){return!!(Bs(n)===r||r!==Gt&&ag(e,t,n))&&("**"===n.path||ti(e,n,t).matched)}function r0(n,e,t){return 0===e.length&&!n.children[t]}const Vh=!1;class lg{constructor(e){this.segmentGroup=e||null}}class s0{constructor(e){this.urlTree=e}}function Bh(n){return Ps(new lg(n))}function o0(n){return Ps(new s0(n))}class sT{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=jl(this.urlTree.root,[],[],this.config).segmentGroup,t=new tn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Gt).pipe((0,it.U)(s=>this.createUrlTree(E(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ze(s=>{if(s instanceof s0)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof lg?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Gt).pipe((0,it.U)(i=>this.createUrlTree(E(i),e.queryParams,e.fragment))).pipe(Ze(i=>{throw i instanceof lg?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Vh)}createUrlTree(e,t,r){const i=_(e);return new el(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,it.U)(s=>new tn([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,yn.D)(i).pipe(ue(s=>{const c=r.children[s],h=tg(t,s);return this.expandSegmentGroup(e,h,c,s).pipe((0,it.U)(p=>({segment:p,outlet:s})))}),bt((s,c)=>(s[c.outlet]=c.segment,s),{}),Mt())}expandSegment(e,t,r,i,s,c){return(0,yn.D)(r).pipe(ue(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,c).pipe(Ze(y=>{if(y instanceof lg)return st(null);throw y}))),J(h=>!!h),Ze((h,p)=>{if(rg(h))return r0(t,i,s)?st(new tn([],{})):Bh(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,c,h){return U_(i,t,s,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c):Bh(t):Bh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?o0(s):this.lineralizeSegments(r,s).pipe((0,D.z)(c=>{const h=new tn(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:C}=ti(t,i,s);if(!h)return Bh(t);const S=this.applyRedirectCommands(p,i.redirectTo,C);return i.redirectTo.startsWith("/")?o0(S):this.lineralizeSegments(i,S).pipe((0,D.z)(R=>this.expandSegment(e,t,r,R.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=Yw(r,e),r.loadChildren?(r._loadedRoutes?st({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,it.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new tn(i,{})))):st(new tn(i,{}))):og(t,r,i,e).pipe(pr(({matched:c,consumedSegments:h,remainingSegments:p})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,D.z)(C=>{const S=C.injector??e,R=C.routes,{segmentGroup:V,slicedSegments:H}=jl(t,h,p,R),Q=new tn(V.segments,V.children);if(0===H.length&&Q.hasChildren())return this.expandChildren(S,R,Q).pipe((0,it.U)(pt=>new tn(h,pt)));if(0===R.length&&0===H.length)return st(new tn(h,{}));const ye=Bs(r)===s;return this.expandSegment(S,Q,R,H,ye?Gt:s,!0).pipe((0,it.U)(ct=>new tn(h.concat(ct.segments),ct.children)))})):Bh(t)))}getChildConfig(e,t,r){return t.children?st({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?st({routes:t._loadedRoutes,injector:t._loadedInjector}):function tT(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?st(!0):st(i.map(c=>{const h=Ph(c,n);return mo(function F_(n){return n&&Xu(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Ju(),Ei())}(e,t,r).pipe((0,D.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ie.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function ed(n){return Ps(Ww(Vh,3))}())):st({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[Gt])return Ps(new d.vHH(4e3,Vh));i=i.children[Gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new el(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Xn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let c={};return Xn(t.children,(h,p)=>{c[p]=this.createSegmentGroup(e,h,r,i)}),new tn(s,c)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Vh);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class lF{}class ua{constructor(e,t,r,i,s,c,h,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h,this.urlSerializer=p}recognize(){const e=jl(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Gt).pipe((0,it.U)(t=>{if(null===t)return null;const r=new ca([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new la(r,t),s=new S_(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=Yp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,yn.D)(Object.keys(r.children)).pipe(ue(i=>{const s=r.children[i],c=tg(t,i);return this.processSegmentGroup(e,c,s,i)}),bt((i,s)=>i&&s?(i.push(...s),i):null),function Lr(n,e=!1){return(0,kn.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,s=>{const c=n(s,i++);(c||e)&&r.next(s),!c&&r.complete()}))})}(i=>null!==i),T(null),Mt(),(0,it.U)(i=>{if(null===i)return null;const s=z_(i);return function j_(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,yn.D)(t).pipe(ue(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,s)),J(c=>!!c),Ze(c=>{if(rg(c))return r0(r,i,s)?st([]):st(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!U_(t,r,i,s))return st(null);let c;if("**"===t.path){const h=i.length>0?wh(i).parameters:{},p=l0(r)+i.length;c=st({snapshot:new ca(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cg(t),Bs(t),t.component??t._loadedComponent??null,t,td(r),p,ug(t),p),consumedSegments:[],remainingSegments:[]})}else c=og(r,t,i,e).pipe((0,it.U)(({matched:h,consumedSegments:p,remainingSegments:y,parameters:C})=>{if(!h)return null;const S=l0(r)+p.length;return{snapshot:new ca(p,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cg(t),Bs(t),t.component??t._loadedComponent??null,t,td(r),S,ug(t),S),consumedSegments:p,remainingSegments:y}}));return c.pipe(pr(h=>{if(null===h)return st(null);const{snapshot:p,consumedSegments:y,remainingSegments:C}=h;e=t._injector??e;const S=t._loadedInjector??e,R=function $_(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:H}=jl(r,y,C,R.filter(ye=>void 0===ye.redirectTo),this.relativeLinkResolution);if(0===H.length&&V.hasChildren())return this.processChildren(S,R,V).pipe((0,it.U)(ye=>null===ye?null:[new la(p,ye)]));if(0===R.length&&0===H.length)return st([new la(p,[])]);const Q=Bs(t)===s;return this.processSegment(S,R,V,H,Q?Gt:s).pipe((0,it.U)(ye=>null===ye?null:[new la(p,ye)]))}))}}function aT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function z_(n){const e=[],t=new Set;for(const r of n){if(!aT(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=z_(r.children);e.push(new la(r.value,i))}return e.filter(r=>!t.has(r))}function td(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function l0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function cg(n){return n.data||{}}function ug(n){return n.resolve||{}}function dg(n){return"string"==typeof n.title||null===n.title}function W_(n){return pr(e=>{const t=n(e);return t?(0,yn.D)(t).pipe((0,it.U)(()=>e)):st(e)})}let h0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Gt);return r}getResolvedTitleForRoute(t){return t.data[Gr]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(f0)},providedIn:"root"}),n})(),f0=(()=>{class n extends h0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Yi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uT{}class p0 extends class dT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Uh=new d.OlP("",{providedIn:"root",factory:()=>({})}),K_=new d.OlP("ROUTES");let Y_=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=mo(t.loadComponent()).pipe((0,Ie.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Fs(()=>{this.componentLoaders.delete(t)})),i=new go(r,()=>new an.x).pipe(po());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,it.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,y,C=!1;Array.isArray(h)?y=h:(p=h.create(t).injector,y=Lp(p.get(K_,[],d.XFs.Self|d.XFs.Optional)));return{routes:y.map(k_),injector:p}}),Fs(()=>{this.childrenLoaders.delete(r)})),c=new go(s,()=>new an.x).pipe(po());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return mo(t()).pipe((0,D.z)(r=>r instanceof d.YKP||Array.isArray(r)?st(r):(0,yn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class g0{}class m0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function _0(n){throw n}function y0(n,e,t){return e.parse("/")}const hT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function v0(){const n=(0,d.f3M)(Dh),e=(0,d.f3M)(Jp),t=(0,d.f3M)(Pe),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),s=(0,d.f3M)(K_,{optional:!0})??[],c=(0,d.f3M)(Uh,{optional:!0})??{},h=(0,d.f3M)(f0),p=(0,d.f3M)(h0,{optional:!0}),y=(0,d.f3M)(g0,{optional:!0}),C=(0,d.f3M)(uT,{optional:!0}),S=new Wr(null,n,e,t,r,i,Lp(s));return y&&(S.urlHandlingStrategy=y),C&&(S.routeReuseStrategy=C),S.titleStrategy=p??h,function fg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,S),S}let Wr=(()=>{class n{constructor(t,r,i,s,c,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new an.x,this.errorHandler=_0,this.malformedUriErrorHandler=y0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>st(void 0),this.urlHandlingStrategy=new m0,this.routeReuseStrategy=new p0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(Y_),this.configLoader.onLoadEndListener=R=>this.triggerEvent(new Bw(R)),this.configLoader.onLoadStartListener=R=>this.triggerEvent(new Vw(R)),this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const S=c.get(d.R0b);this.isNgZoneEnabled=S instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function Vp(){return new el(new tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=qp(this.currentUrlTree,this.rootComponentType),this.transitions=new Rn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(gr(i=>0!==i.id),(0,it.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),pr(i=>{let s=!1,c=!1;return st(i).pipe((0,Ie.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pr(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Z_(h.source)&&(this.browserUrlTree=h.extractedUrl),st(h).pipe(pr(S=>{const R=this.transitions.getValue();return r.next(new I_(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),R!==this.transitions.getValue()?Fr.E:Promise.resolve(S)}),function oT(n,e,t,r){return pr(i=>function rl(n,e,t,r,i){return new sT(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,it.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ie.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function u0(n,e,t,r,i,s){return(0,D.z)(c=>function cF(n,e,t,r,i,s,c="emptyOnly",h="legacy"){return new ua(n,e,t,r,i,c,h,s).recognize().pipe(pr(p=>null===p?function a0(n){return new sr.y(e=>e.error(n))}(new lF):st(p)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,s).pipe((0,it.U)(h=>({...c,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ie.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const R=new BS(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(R)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:V,source:H,restoredState:Q,extras:ye}=h,Ye=new I_(R,this.serializeUrl(V),H,Q);r.next(Ye);const ct=qp(V,this.rootComponentType).snapshot;return st(i={...h,targetSnapshot:ct,urlAfterRedirects:V,extras:{...ye,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Fr.E}),(0,Ie.b)(h=>{const p=new JP(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,it.U)(h=>i={...h,guards:sF(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function YS(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:c}}=t;return 0===c.length&&0===s.length?st({...t,guardsResult:!0}):function ZS(n,e,t,r){return(0,yn.D)(n).pipe((0,D.z)(i=>function eT(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?st(s.map(h=>{const p=ng(e)??i,y=Ph(h,p);return mo(function Lh(n){return n&&Xu(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):p.runInContext(()=>y(n,e,t,r))).pipe(J())})).pipe(Ju()):st(!0)}(i.component,i.route,t,e,r)),J(i=>!0!==i,!0))}(c,r,i,n).pipe((0,D.z)(h=>h&&function Jw(n){return"boolean"==typeof n}(h)?function V_(n,e,t,r){return(0,yn.D)(e).pipe(ue(i=>fo(function XS(n,e){return null!==n&&e&&e(new Uw(n)),st(!0)}(i.route.parent,r),function QS(n,e){return null!==n&&e&&e(new Hw(n)),st(!0)}(i.route,r),function e0(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function oF(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ci(()=>st(c.guards.map(p=>{const y=ng(c.node)??t,C=Ph(p,y);return mo(function L_(n){return n&&Xu(n.canActivateChild)}(C)?C.canActivateChild(r,n):y.runInContext(()=>C(r,n))).pipe(J())})).pipe(Ju())));return st(s).pipe(Ju())}(n,i.path,t),function JS(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(s=>ci(()=>{const c=ng(e)??t,h=Ph(s,c);return mo(function WS(n){return n&&Xu(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(J())}));return st(i).pipe(Ju())}(n,i.route,t))),J(i=>!0!==i,!0))}(r,s,n,e):st(h)),(0,it.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Ie.b)(h=>{if(i.guardsResult=h.guardsResult,F(h.guardsResult))throw Xp(0,h.guardsResult);const p=new eF(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),gr(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),W_(h=>{if(h.guards.canActivateChecks.length)return st(h).pipe((0,Ie.b)(p=>{const y=new Rh(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),pr(p=>{let y=!1;return st(p).pipe(function uF(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);let s=0;return(0,yn.D)(i).pipe(ue(c=>function nd(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!dg(i)&&(s[Gr]=i.title),function G_(n,e,t,r){const i=function d0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return st({});const s={};return(0,yn.D)(i).pipe((0,D.z)(c=>function cT(n,e,t,r){const i=ng(e)??r,s=Ph(n,i);return mo(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[c],e,t,r).pipe(J(),(0,Ie.b)(h=>{s[c]=h}))),zt(1),function mr(n){return(0,it.U)(()=>n)}(s),Ze(c=>rg(c)?Fr.E:Ps(c)))}(s,n,e,r).pipe((0,it.U)(c=>(n._resolvedData=c,n.data=Yp(n,t).resolve,i&&dg(i)&&(n.data[Gr]=i.title),null)))}(c.route,r,n,e)),(0,Ie.b)(()=>s++),zt(1),(0,D.z)(c=>s===i.length?st(t):Fr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ie.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,Ie.b)(p=>{const y=new D_(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),W_(h=>{const p=y=>{const C=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Ie.b)(S=>{y.component=S}),(0,it.U)(()=>{})));for(const S of y.children)C.push(...p(S));return C};return Xa(p(h.targetSnapshot.root)).pipe(T(),hn(1))}),W_(()=>this.afterPreactivation()),(0,it.U)(h=>{const p=function Yu(n,e,t){const r=Nh(n,e._root,t?t._root:void 0);return new zw(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:p}}),(0,Ie.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,it.U)(r=>(new O_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Ie.b)({next(){s=!0},complete(){s=!0}}),Fs(()=>{s||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ze(h=>{if(c=!0,qw(h)){M_(h)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new zp(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(p),M_(h)){const y=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Z_(i.source)};this.scheduleNavigation(y,"imperative",null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new Lw(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return Fr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const h={...s};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(k_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,y=i||this.routerState.root,C=p?this.currentUrlTree.fragment:c;let S=null;switch(h){case"merge":S={...this.currentUrlTree.queryParams,...s};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=s||null}return null!==S&&(S=this.removeEmptyProps(S)),Xt(y,this.currentUrlTree,t,S,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=F(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function b0(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...hT}:!1===r?{...hF}:r,F(t))return m_(this.currentUrlTree,t,i);const s=this.parseUrl(t);return m_(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Pc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,c){if(this.disposed)return Promise.resolve(!1);let h,p,y;c?(h=c.resolve,p=c.reject,y=c.promise):y=new Promise((R,V)=>{h=R,p=V});const C=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:C,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:h,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new zp(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return v0()},providedIn:"root"}),n})();function Z_(n){return"imperative"!==n}class Q_{}let X_=(()=>{class n{constructor(t,r,i,s,c){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(gr(t=>t instanceof Pc),ue(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,d.MMx)(s.providers,t,`Route: ${s.path}`));const c=s._injector??t,h=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,yn.D)(i).pipe((0,ia.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):st(null);const s=i.pipe((0,D.z)(c=>null===c?st(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,yn.D)([s,c]).pipe((0,ia.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Wr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Q_),d.LFG(Y_))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vc=new d.OlP("");let E0=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof I_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Gp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Bc(n,e){return{\u0275kind:n,\u0275providers:e}}function $h(n){return[{provide:K_,multi:!0,useValue:n}]}function gT(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Wr),i=n.get(J_);1===n.get(ey)&&r.initialNavigation(),n.get(Us,null,d.XFs.Optional)?.setUpPreloading(),n.get(Vc,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const J_=new d.OlP("",{factory:()=>new an.x}),ey=new d.OlP("",{providedIn:"root",factory:()=>1});const Us=new d.OlP("");function yT(n){return Bc(0,[{provide:Us,useExisting:X_},{provide:Q_,useExisting:n}])}const D0=new d.OlP("ROUTER_FORROOT_GUARD"),bT=[Pe,{provide:Dh,useClass:Vl},{provide:Wr,useFactory:v0},Jp,{provide:Hl,useFactory:function C0(n){return n.routerState.root},deps:[Wr]},Y_];function S0(){return new d.PXZ("Router",Wr)}let T0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[bT,[],$h(t),{provide:D0,useFactory:A0,deps:[[Wr,new d.FiY,new d.tp0]]},{provide:Uh,useValue:r||{}},r?.useHash?{provide:Ce,useClass:Je}:{provide:Ce,useClass:Xe},{provide:Vc,useFactory:()=>{const n=(0,d.f3M)(Wr),e=(0,d.f3M)(wu),t=(0,d.f3M)(Uh);return t.scrollOffset&&e.setOffset(t.scrollOffset),new E0(n,e,t)}},r?.preloadingStrategy?yT(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:S0},r?.initialNavigation?M0(r):[],[{provide:ty,useFactory:gT},{provide:d.tb,multi:!0,useExisting:ty}]]}}static forChild(t){return{ngModule:n,providers:[$h(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(D0,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Lc]}),n})();function A0(n){return"guarded"}function M0(n){return["disabled"===n.initialNavigation?Bc(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Wr);return()=>{e.setUpLocationChangeListener()}}},{provide:ey,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Bc(2,[{provide:ey,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(K,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const c=e.get(Wr),h=e.get(J_);(function i(s){e.get(Wr).events.pipe(gr(h=>h instanceof Pc||h instanceof zp||h instanceof Lw),(0,it.U)(h=>h instanceof Pc||h instanceof zp&&(0===h.code||1===h.code)&&null),gr(h=>null!==h),hn(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),c.afterPreactivation=()=>(s(!0),r||h.closed?st(void 0):h),c.initialNavigation()}))}}]).\u0275providers:[]]}const ty=new d.OlP("");class ny{constructor(){this.players=[],this.player_images=[],this.stack=[],this.playedCards=[],this.currentPlayer=0,this.pickCardAnimation=!1,this.currentCard="";for(let e=1;e<14;e++)this.stack.push("spade_"+e),this.stack.push("hearts_"+e),this.stack.push("clubs_"+e),this.stack.push("diamonds_"+e);!function IT(n){let t,e=n.length;for(;0!=e;)t=Math.floor(Math.random()*e),e--,[n[e],n[t]]=[n[t],n[e]]}(this.stack)}toJson(){return{players:this.players,player_images:this.player_images,stack:this.stack,playedCards:this.playedCards,currentPlayer:this.currentPlayer,pickCardAnimtation:this.pickCardAnimation,currentCard:this.currentCard}}}let yg;try{yg=typeof Intl<"u"&&Intl.v8BreakIterator}catch{yg=!1}let zh,ts=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function vi(n){return n===yi}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!yg)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ry=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function iy(){if(zh)return zh;if("object"!=typeof document||!document)return zh=new Set(ry),zh;let n=document.createElement("input");return zh=new Set(ry.filter(e=>(n.setAttribute("type",e),n.type===e))),zh}let vo,Uc,x0;function rd(n){return function DT(){if(null==vo&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>vo=!0}))}finally{vo=vo||!1}return vo}()?n:!!n.capture}function _F(){if(null==Uc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Uc=!1,Uc;if("scrollBehavior"in document.documentElement.style)Uc=!0;else{const n=Element.prototype.scrollTo;Uc=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Uc}function k0(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Hc(n){return n.composedPath?n.composedPath()[0]:n.target}function $l(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function oA(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function hy(n){return gr((e,t)=>n<=t)}function X0(n,e=ho.y){return n=n??aA,(0,kn.e)((t,r)=>{let i,s=!0;t.subscribe((0,Wn.x)(r,c=>{const h=e(c);(s||!n(i,h))&&(s=!1,i=h,r.next(c))}))})}function aA(n,e){return n===e}var lA=L(5032);function Gl(n){return(0,kn.e)((e,t)=>{(0,Xi.Xf)(n).subscribe((0,Wn.x)(t,()=>t.complete(),lA.Z)),!t.closed&&e.subscribe(t)})}function Wl(n){return null!=n&&"false"!=`${n}`}function sd(n){return Array.isArray(n)?n:[n]}function _r(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ql(n){return n instanceof d.SBq?n.nativeElement:n}var fy=L(4986);function py(n,e=fy.z){return(0,kn.e)((t,r)=>{let i=null,s=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function p(){const y=c+n,C=e.now();if(C<y)return i=this.schedule(void 0,y-C),void r.add(i);h()}t.subscribe((0,Wn.x)(r,y=>{s=y,c=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}let gy=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eE=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=ql(t);return new sr.y(i=>{const c=this._observeElement(r).subscribe(i);return()=>{c.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new an.x,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tE=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new d.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Wl(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function cA(n,e=0){return function vg(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(py(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(eE),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),bg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[gy]}),n})();const Kh=new Set;let sl,Yh=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):my}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function uA(n){if(!Kh.has(n))try{sl||(sl=document.createElement("style"),sl.setAttribute("type","text/css"),document.head.appendChild(sl)),sl.sheet&&(sl.sheet.insertRule(`@media ${n} {body{ }}`,0),Kh.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ts))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function my(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let nE=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new an.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return rE(sd(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=Xa(rE(sd(t)).map(c=>this._registerQuery(c).observable));return s=fo(s.pipe(hn(1)),s.pipe(hy(1),py(0))),s.pipe((0,it.U)(c=>{const h={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:y})=>{h.matches=h.matches||p,h.breakpoints[y]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new sr.y(c=>{const h=p=>this._zone.run(()=>c.next(p));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(ui(r),(0,it.U)(({matches:c})=>({query:t,matches:c})),Gl(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Yh),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rE(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let wg=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function gA(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function pA(n){try{return n.frameElement}catch{return null}}(function Qh(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===Cg(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=Cg(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function _A(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function fa(n){return!function zc(n){return function Zh(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Eg(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function r1(n){return function mA(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||aE(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ts))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aE(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function Cg(n){if(!aE(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Ci{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(hn(1)).subscribe(e)}}let ol=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new Ci(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(wg),d.LFG(d.R0b),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Gc(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Wc(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const ad=new d.OlP("cdk-input-modality-detector-options"),ld={ignoreKeys:[18,17,224,91,16]},wo=rd({passive:!0,capture:!0});let cE=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Rn(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(h=>h===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Hc(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Gc(c)?"keyboard":"mouse"),this._mostRecentTarget=Hc(c))},this._onTouchstart=c=>{Wc(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Hc(c))},this._options={...ld,...s},this.modalityDetected=this._modality.pipe(hy(1)),this.modalityChanged=this.modalityDetected.pipe(X0()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,wo),i.addEventListener("mousedown",this._onMousedown,wo),i.addEventListener("touchstart",this._onTouchstart,wo)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,wo),document.removeEventListener("mousedown",this._onMousedown,wo),document.removeEventListener("touchstart",this._onTouchstart,wo))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ts),d.LFG(d.R0b),d.LFG(ce),d.LFG(ad,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dE=new d.OlP("cdk-focus-monitor-default-options"),tf=rd({passive:!0,capture:!0});let nf=(()=>{class n{constructor(t,r,i,s,c){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new an.x,this._rootNodeFocusAndBlurListener=h=>{for(let y=Hc(h);y;y=y.parentElement)"focus"===h.type?this._onFocus(h,y):this._onBlur(h,y)},this._document=s,this._detectionMode=c?.detectionMode||0}monitor(t,r=!1){const i=ql(t);if(!this._platform.isBrowser||1!==i.nodeType)return st(null);const s=function R0(n){if(function ST(){if(null==x0){const n=typeof document<"u"?document.head:null;x0=!(!n||!n.createShadowRoot&&!n.attachShadow)}return x0}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),c=this._elementInfo.get(i);if(c)return r&&(c.checkChildren=!0),c.subject;const h={checkChildren:r,subject:new an.x,rootNode:s};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=ql(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=ql(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Hc(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,tf),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,tf)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Gl(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,tf),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,tf),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let c=0;c<s.length;c++)if(s[c].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(ts),d.LFG(cE),d.LFG(ce,8),d.LFG(dE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hE="cdk-high-contrast-black-on-white",yy="cdk-high-contrast-white-on-black",vy="cdk-high-contrast-active";let fE=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,d.f3M)(nE).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(vy,hE,yy),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(vy,hE):2===r&&t.add(vy,yy)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ts),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),by=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fE))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[bg]}),n})();var wy=L(1144);const EA=["addListener","removeListener"],Ig=["addEventListener","removeEventListener"],Dg=["on","off"];function cd(n,e,t,r){if((0,zr.m)(t)&&(r=t,t=void 0),r)return cd(n,e,t).pipe(Ya(r));const[i,s]=function gE(n){return(0,zr.m)(n.addEventListener)&&(0,zr.m)(n.removeEventListener)}(n)?Ig.map(c=>h=>n[c](e,h,t)):function Sg(n){return(0,zr.m)(n.addListener)&&(0,zr.m)(n.removeListener)}(n)?EA.map(pE(n,e)):function Tg(n){return(0,zr.m)(n.on)&&(0,zr.m)(n.off)}(n)?Dg.map(pE(n,e)):[];if(!i&&(0,wy.z)(n))return(0,D.z)(c=>cd(c,e,t))((0,Xi.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new sr.y(c=>{const h=(...p)=>c.next(1<p.length?p:p[0]);return i(h),()=>s(h)})}function pE(n,e){return t=>r=>n[t](e,r)}var Ey=L(4408);const Kc={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Kc;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new sa.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Kc;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Kc;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var Cy=L(7565);new class Iy extends Cy.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class mE extends Ey.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Kc.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(Kc.cancelAnimationFrame(t),e._scheduled=void 0)}});let Ag,_E=1;const rf={};function Sy(n){return n in rf&&(delete rf[n],!0)}const CA={setImmediate(n){const e=_E++;return rf[e]=!0,Ag||(Ag=Promise.resolve()),Ag.then(()=>Sy(e)&&n()),e},clearImmediate(n){Sy(n)}},{setImmediate:yE,clearImmediate:vE}=CA,Yc={setImmediate(...n){const{delegate:e}=Yc;return(e?.setImmediate||yE)(...n)},clearImmediate(n){const{delegate:e}=Yc;return(e?.clearImmediate||vE)(n)},delegate:void 0};new class wE extends Cy.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class bE extends Ey.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Yc.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(Yc.clearImmediate(t),e._scheduled=void 0)}});var IE=L(3532);function SA(n,e=fy.z){return function CE(n){return(0,kn.e)((e,t)=>{let r=!1,i=null,s=null,c=!1;const h=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const y=i;i=null,t.next(y)}c&&t.complete()},p=()=>{s=null,c&&t.complete()};e.subscribe((0,Wn.x)(t,y=>{r=!0,i=y,s||(0,Xi.Xf)(n(y)).subscribe(s=(0,Wn.x)(t,h,p))},()=>{c=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>function SE(n=0,e,t=fy.P){let r=-1;return null!=e&&((0,IE.K)(e)?t=e:r=e),new sr.y(i=>{let s=function DE(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e))}const TA=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function AA(){return(0,d.f3M)(ce)}}),TE=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Er=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new d.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function MA(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?TE.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(TA,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),PA=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new an.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new sr.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(SA(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):st()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(gr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=ql(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>cd(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(ts),d.LFG(ce,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ty=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new an.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(SA(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ts),d.LFG(d.R0b),d.LFG(ce,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ay=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),My=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[sf,Ay,sf,Ay]}),n})();class xy{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class xg extends xy{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class xE extends xy{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class RE extends xy{constructor(e){super(),this.element=e instanceof d.SBq?e.nativeElement:e}}class Rg{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof xg?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof xE?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof RE?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class BA extends Rg{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=c=>{const h=c.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||d.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let lf=(()=>{class n extends Rg{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new d.vpe,this.attachDomPortal=s=>{const c=s.element,h=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(h,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(c,h)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),c=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=t,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d._Vd),d.Y36(d.s_b),d.Y36(ce))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[d.qOj]}),n})(),cf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();var uf=L(6451);const ky=_F();class OE{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=_r(-this._previousScrollPosition.left),e.style.top=_r(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),ky&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ky&&(r.scrollBehavior=s,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class NE{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class PE{enable(){}disable(){}attach(){}}function Oy(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function FE(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class GA{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Oy(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let WA=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new PE,this.close=c=>new NE(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new OE(this._viewportRuler,this._document),this.reposition=c=>new GA(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(PA),d.LFG(Ty),d.LFG(d.R0b),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class LE{constructor(e){if(this.scrollStrategy=new PE,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class qA{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let VE=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KA=(()=>{class n extends VE{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){const h=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(i)):h.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(d.R0b,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YA=(()=>{class n extends VE{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Hc(s)},this._clickListener=s=>{const c=Hc(s),h="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const C=p[y];if(C._outsidePointerEvents.observers.length<1||!C.hasAttached())continue;if(C.overlayElement.contains(c)||C.overlayElement.contains(h))break;const S=C._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>S.next(s)):S.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(ts),d.LFG(d.R0b,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kg=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||$l()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),$l()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(ts))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class df{constructor(e,t,r,i,s,c,h,p,y,C=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=c,this._document=h,this._location=p,this._outsideClickDispatcher=y,this._animationsDisabled=C,this._backdropElement=null,this._backdropClick=new an.x,this._attachments=new an.x,this._detachments=new an.x,this._locationChanges=sa.w0.EMPTY,this._backdropClickHandler=S=>this._backdropClick.next(S),this._backdropTransitionendHandler=S=>{this._disposeBackdrop(S.target)},this._keydownEvents=new an.x,this._outsidePointerEvents=new an.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(hn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=_r(this._config.width),e.height=_r(this._config.height),e.minWidth=_r(this._config.minWidth),e.minHeight=_r(this._config.minHeight),e.maxWidth=_r(this._config.maxWidth),e.maxHeight=_r(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=sd(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Gl((0,uf.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const BE="cdk-overlay-connected-position-bounding-box",ZA=/([A-Za-z%]+)$/;class UE{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new an.x,this._resizeSubscription=sa.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(BE),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let c;for(let h of this._preferredPositions){let p=this._getOriginPoint(e,i,h),y=this._getOverlayPoint(p,t,h),C=this._getOverlayFit(y,t,r,h);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(C,y,r)?s.push({position:h,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!c||c.overlayFit.visibleArea<C.visibleArea)&&(c={overlayFit:C,overlayPoint:y,originPoint:p,position:h,overlayRect:t})}if(s.length){let h=null,p=-1;for(const y of s){const C=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);C>p&&(p=C,h=y)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Yl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(BE),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const c=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;i="start"==r.originX?c:h}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=Py(t);let{x:c,y:h}=e,p=this._getOffset(i,"x"),y=this._getOffset(i,"y");p&&(c+=p),y&&(h+=y);let R=0-h,V=h+s.height-r.height,H=this._subtractOverflows(s.width,0-c,c+s.width-r.width),Q=this._subtractOverflows(s.height,R,V),ye=H*Q;return{visibleArea:ye,isCompletelyWithinViewport:s.width*s.height===ye,fitsInViewportVertically:Q===s.height,fitsInViewportHorizontally:H==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,c=Ny(this._overlayRef.getConfig().minHeight),h=Ny(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=h&&h<=s;return(e.fitsInViewportVertically||null!=c&&c<=i)&&y}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=Py(t),s=this._viewportRect,c=Math.max(e.x+i.width-s.width,0),h=Math.max(e.y+i.height-s.height,0),p=Math.max(s.top-r.top-e.y,0),y=Math.max(s.left-r.left-e.x,0);let C=0,S=0;return C=i.width<=s.width?y||-c:e.x<this._viewportMargin?s.left-r.left-e.x:0,S=i.height<=s.height?p||-h:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:C,y:S},{x:e.x+C,y:e.y+S}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new qA(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,c,h,C,S,R;if("top"===t.overlayY)c=e.y,s=r.height-c+this._viewportMargin;else if("bottom"===t.overlayY)h=r.height-e.y+2*this._viewportMargin,s=r.height-h+this._viewportMargin;else{const V=Math.min(r.bottom-e.y+r.top,e.y),H=this._lastBoundingBoxSize.height;s=2*V,c=e.y-V,s>H&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-H/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)R=r.width-e.x+this._viewportMargin,C=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)S=e.x,C=r.right-e.x;else{const V=Math.min(r.right-e.x+r.left,e.x),H=this._lastBoundingBoxSize.width;C=2*V,S=e.x-V,C>H&&!this._isInitialRender&&!this._growAfterOpen&&(S=e.x-H/2)}return{top:c,left:S,bottom:h,right:R,width:C,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=_r(r.height),i.top=_r(r.top),i.bottom=_r(r.bottom),i.width=_r(r.width),i.left=_r(r.left),i.right=_r(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=_r(s)),c&&(i.maxWidth=_r(c))}this._lastBoundingBoxSize=r,Yl(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Yl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Yl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){const C=this._viewportRuler.getViewportScrollPosition();Yl(r,this._getExactOverlayY(t,e,C)),Yl(r,this._getExactOverlayX(t,e,C))}else r.position="static";let h="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(h+=`translateX(${p}px) `),y&&(h+=`translateY(${y}px)`),r.transform=h.trim(),c.maxHeight&&(i?r.maxHeight=_r(c.maxHeight):s&&(r.maxHeight="")),c.maxWidth&&(i?r.maxWidth=_r(c.maxWidth):s&&(r.maxWidth="")),Yl(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=_r(s.y),i}_getExactOverlayX(e,t,r){let c,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=_r(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:FE(e,r),isOriginOutsideView:Oy(e,r),isOverlayClipped:FE(t,r),isOverlayOutsideView:Oy(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&sd(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof d.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Yl(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Ny(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(ZA);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Py(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Fy="cdk-global-overlay-wrapper";class HE{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Fy),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:c,maxHeight:h}=r,p=!("100%"!==i&&"100vw"!==i||c&&"100%"!==c&&"100vw"!==c),y=!("100%"!==s&&"100vh"!==s||h&&"100%"!==h&&"100vh"!==h),C=this._xPosition,S=this._xOffset,R="rtl"===this._overlayRef.getConfig().direction;let V="",H="",Q="";p?Q="flex-start":"center"===C?(Q="center",R?H=S:V=S):R?"left"===C||"end"===C?(Q="flex-end",V=S):("right"===C||"start"===C)&&(Q="flex-start",H=S):"left"===C||"start"===C?(Q="flex-start",V=S):("right"===C||"end"===C)&&(Q="flex-end",H=S),e.position=this._cssPosition,e.marginLeft=p?"0":V,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=p?"0":H,t.justifyContent=Q,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(Fy),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let jE=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new HE}flexibleConnectedTo(t){return new UE(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ty),d.LFG(ce),d.LFG(ts),d.LFG(kg))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ly=0,Zl=(()=>{class n{constructor(t,r,i,s,c,h,p,y,C,S,R,V){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=h,this._ngZone=p,this._document=y,this._directionality=C,this._location=S,this._outsideClickDispatcher=R,this._animationsModuleType=V}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),c=new LE(t);return c.direction=c.direction||this._directionality.value,new df(s,r,i,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Ly++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(d.z2F)),new BA(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(WA),d.LFG(kg),d.LFG(d._Vd),d.LFG(jE),d.LFG(KA),d.LFG(d.zs3),d.LFG(d.R0b),d.LFG(ce),d.LFG(Er),d.LFG(Pe),d.LFG(YA),d.LFG(d.QbO,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Vy={provide:new d.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Zl],useFactory:function b1(n){return()=>n.scrollStrategies.reposition()}};let eM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Zl,Vy],imports:[sf,cf,My,My]}),n})();function $E(n,e){}class By{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let zE=(()=>{class n extends Rg{constructor(t,r,i,s,c,h,p,y){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=s,this._interactivityChecker=c,this._ngZone=h,this._overlayRef=p,this._focusMonitor=y,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=C=>{this._portalOutlet.hasAttached();const S=this._portalOutlet.attachDomPortal(C);return this._contentAttached(),S},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=i}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=k0(),s=this._elementRef.nativeElement;(!i||i===this._document.body||i===s||s.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=k0();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=k0())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(ol),d.Y36(ce,8),d.Y36(By),d.Y36(wg),d.Y36(d.R0b),d.Y36(df),d.Y36(nf))},n.\u0275cmp=d.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,r){if(1&t&&d.Gf(lf,7),2&t){let i;d.iGM(i=d.CRH())&&(r._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,r){2&t&&d.uIk("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[d.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&d.YNc(0,$E,0,0,"ng-template",0)},dependencies:[lf],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class Uy{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new an.x,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!oA(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const GE=new d.OlP("DialogScrollStrategy"),dd=new d.OlP("DialogData"),nM=new d.OlP("DefaultDialogConfig"),Ng={provide:GE,deps:[Zl],useFactory:function Og(n){return()=>n.scrollStrategies.block()}};let Cr=0,rM=(()=>{class n{constructor(t,r,i,s,c,h){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new an.x,this._afterOpenedAtThisLevel=new an.x,this._ariaHiddenElements=new Map,this.afterAllClosed=ci(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ui(void 0))),this._scrollStrategy=h}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,r){(r={...this._defaultOptions||new By,...r}).id=r.id||"cdk-dialog-"+Cr++,r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),c=this._overlay.create(s),h=new Uy(c,r),p=this._attachContainer(c,h,r);return h.containerInstance=p,this._attachDialogContent(t,h,p,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(h),h.closed.subscribe(()=>this._removeOpenDialog(h,!0)),this.afterOpened.next(h),h}closeAll(){Pg(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){Pg(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),Pg(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new LE({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const s=i.injector||i.viewContainerRef?.injector,c=[{provide:By,useValue:i},{provide:Uy,useValue:r},{provide:df,useValue:t}];let h;i.container?"function"==typeof i.container?h=i.container:(h=i.container.type,c.push(...i.container.providers(i))):h=zE;const p=new xg(h,i.viewContainerRef,d.zs3.create({parent:s||this._injector,providers:c}),i.componentFactoryResolver);return t.attach(p).instance}_attachDialogContent(t,r,i,s){if(t instanceof d.Rgc){const c=this._createInjector(s,r,i,void 0);let h={$implicit:s.data,dialogRef:r};s.templateContext&&(h={...h,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),i.attachTemplatePortal(new xE(t,null,h,c))}else{const c=this._createInjector(s,r,i,this._injector),h=i.attachComponentPortal(new xg(t,s.viewContainerRef,c,s.componentFactoryResolver));r.componentInstance=h.instance}}_createInjector(t,r,i,s){const c=t.injector||t.viewContainerRef?.injector,h=[{provide:dd,useValue:t.data},{provide:Uy,useValue:r}];return t.providers&&("function"==typeof t.providers?h.push(...t.providers(r,t,i)):h.push(...t.providers)),t.direction&&(!c||!c.get(Er,null,d.XFs.Optional))&&h.push({provide:Er,useValue:{value:t.direction,change:st()}}),d.zs3.create({parent:c||s,providers:h})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,c)=>{s?c.setAttribute("aria-hidden",s):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zl),d.LFG(d.zs3),d.LFG(nM,8),d.LFG(n,12),d.LFG(kg),d.LFG(GE))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Pg(n,e){let t=n.length;for(;t--;)e(n[t])}let WE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[rM,Ng],imports:[eM,cf,by,cf]}),n})();const cM=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function lM(){return!0}});let ys=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!$l()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fE),d.LFG(cM,8),d.LFG(ce))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[sf,sf]}),n})();function YE(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Wl(e)}}}function jy(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function ff(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Wl(e)}}}function hM(n){return class extends n{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let mM=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class QE{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const hd={enterDuration:225,exitDuration:150},zy=rd({passive:!0}),XE=["mousedown","touchstart"],JE=["mouseup","mouseleave","touchend","touchcancel"];class vM{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ql(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...hd,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const c=r.radius||function eC(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,p=t-i.top,y=s.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=h-c+"px",C.style.top=p-c+"px",C.style.height=2*c+"px",C.style.width=2*c+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(C);const S=window.getComputedStyle(C),V=S.transitionDuration,H="none"===S.transitionProperty||"0s"===V||"0s, 0s"===V,Q=new QE(this,C,r,H);C.style.transform="scale3d(1, 1, 1)",Q.state=0,r.persistent||(this._mostRecentTransientRipple=Q);let ye=null;return!H&&(y||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ye=()=>this._finishRippleTransition(Q),ct=()=>this._destroyRipple(Q);C.addEventListener("transitionend",Ye),C.addEventListener("transitioncancel",ct),ye={onTransitionEnd:Ye,onTransitionCancel:ct}}),this._activeRipples.set(Q,ye),(H||!y)&&this._finishRippleTransition(Q),Q}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...hd,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ql(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(XE))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(JE),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=Gc(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Wc(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,zy)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(XE.forEach(e=>{this._triggerElement.removeEventListener(e,this,zy)}),this._pointerUpEventsRegistered&&JE.forEach(e=>{this._triggerElement.removeEventListener(e,this,zy)}))}}const bM=new d.OlP("mat-ripple-global-options");let tC=(()=>{class n{constructor(t,r,i,s,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new vM(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(ts),d.Y36(bM,8),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),gf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ys,ys]}),n})();class iC{}const cl="*";function oC(n,e){return{type:7,name:n,definitions:e,options:{}}}function Gy(n,e=null){return{type:4,styles:e,timings:n}}function aC(n,e=null){return{type:3,steps:n,options:e}}function lC(n,e=null){return{type:2,steps:n,options:e}}function Ql(n){return{type:6,styles:n,offset:null}}function Wy(n,e,t){return{type:0,name:n,styles:e,options:t}}function Vg(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function cC(n=null){return{type:9,options:n}}function qy(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function uC(n){Promise.resolve().then(n)}class mf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){uC(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Bg{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?uC(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==s&&this._onFinish()}),c.onDestroy(()=>{++r==s&&this._onDestroy()}),c.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function dC(n,e){}const Xl={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},TM={dialogContainer:oC("dialogContainer",[Wy("void, exit",Ql({opacity:0,transform:"scale(0.7)"})),Wy("enter",Ql({transform:"none"})),Vg("* => enter",aC([Gy("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",Ql({transform:"none",opacity:1})),qy("@*",cC(),{optional:!0})]),Xl),Vg("* => void, * => exit",aC([Gy("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",Ql({opacity:0})),qy("@*",cC(),{optional:!0})]),Xl)])};class Ug{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=Xl.params.enterAnimationDuration,this.exitAnimationDuration=Xl.params.exitAnimationDuration}}let Ky=(()=>{class n extends zE{constructor(t,r,i,s,c,h,p,y){super(t,r,i,s,c,h,p,y),this._animationStateChanged=new d.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(ol),d.Y36(ce,8),d.Y36(Ug),d.Y36(wg),d.Y36(d.R0b),d.Y36(df),d.Y36(nf))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],features:[d.qOj],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),AM=(()=>{class n extends Ky{constructor(t,r,i,s,c,h,p,y,C){super(t,r,i,s,c,h,p,C),this._changeDetectorRef=y,this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?this._openAnimationDone(r):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:r})}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||Xl.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||Xl.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(ol),d.Y36(ce,8),d.Y36(Ug),d.Y36(wg),d.Y36(d.R0b),d.Y36(df),d.Y36(d.sBO),d.Y36(nf))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,r){1&t&&d.WFA("@dialogContainer.start",function(s){return r._onAnimationStart(s)})("@dialogContainer.done",function(s){return r._onAnimationDone(s)}),2&t&&(d.Ikx("id",r._config.id),d.uIk("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),d.d8E("@dialogContainer",r._getAnimationState()))},features:[d.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&d.YNc(0,dC,0,0,"ng-template",0)},dependencies:[lf],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[TM.dialogContainer]}}),n})();class fd{constructor(e,t,r){this._ref=e,this._containerInstance=r,this._afterOpened=new an.x,this._beforeClosed=new an.x,this._state=0,this.disableClose=t.disableClose,this.id=e.id,r._animationStateChanged.pipe(gr(i=>"opened"===i.state),hn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(gr(i=>"closed"===i.state),hn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,uf.T)(this.backdropClick(),this.keydownEvents().pipe(gr(i=>27===i.keyCode&&!this.disableClose&&!oA(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),Zc(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(gr(t=>"closing"===t.state),hn(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function Zc(n,e,t){return n._closeInteractionType=e,n.close(t)}const hC=new d.OlP("MatDialogData"),MM=new d.OlP("mat-dialog-default-options"),xM=new d.OlP("mat-dialog-scroll-strategy"),kM={provide:xM,deps:[Zl],useFactory:function Yy(n){return()=>n.scrollStrategies.block()}};let Zy=0,OM=(()=>{class n{constructor(t,r,i,s,c,h,p,y,C,S){this._overlay=t,this._defaultOptions=i,this._parentDialog=s,this._dialogRefConstructor=p,this._dialogContainerType=y,this._dialogDataToken=C,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new an.x,this._afterOpenedAtThisLevel=new an.x,this._idPrefix="mat-dialog-",this.afterAllClosed=ci(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ui(void 0))),this._scrollStrategy=h,this._dialog=r.get(rM)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){let i;(r={...this._defaultOptions||new Ug,...r}).id=r.id||`${this._idPrefix}${Zy++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:Ug,useValue:r},{provide:By,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(c,h,p)=>(i=new this._dialogRefConstructor(c,r,p),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:p},{provide:this._dialogDataToken,useValue:h.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentInstance=s.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const c=this.openDialogs.indexOf(i);c>-1&&(this.openDialogs.splice(c,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),yf=(()=>{class n extends OM{constructor(t,r,i,s,c,h,p,y){super(t,r,s,h,p,c,fd,AM,hC,y)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zl),d.LFG(d.zs3),d.LFG(Pe,8),d.LFG(MM,8),d.LFG(xM),d.LFG(n,12),d.LFG(kg),d.LFG(d.QbO,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Qy=0,Xy=(()=>{class n{constructor(t,r,i){this.dialogRef=t,this._elementRef=r,this._dialog=i,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=pC(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const r=t._matDialogClose||t._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(t){Zc(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fd,8),d.Y36(d.SBq),d.Y36(yf))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(s){return r._onButtonClick(s)}),2&t&&d.uIk("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[d.TTD]}),n})(),Jy=(()=>{class n{constructor(t,r,i){this._dialogRef=t,this._elementRef=r,this._dialog=i,this.id="mat-dialog-title-"+Qy++}ngOnInit(){this._dialogRef||(this._dialogRef=pC(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fd,8),d.Y36(d.SBq),d.Y36(yf))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,r){2&t&&d.Ikx("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),fC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),ev=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"],hostVars:4,hostBindings:function(t,r){2&t&&d.ekj("mat-dialog-actions-align-center","center"===r.align)("mat-dialog-actions-align-end","end"===r.align)},inputs:{align:"align"}}),n})();function pC(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}let NM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[yf,kM],imports:[WE,eM,cf,ys,ys]}),n})();const PM=["mat-button",""],FM=["*"],gC=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],VM=jy(YE(ff(class{constructor(n){this._elementRef=n}})));let tv=(()=>{class n extends VM{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of gC)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(nf),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&d.Gf(tC,5),2&t){let i;d.iGM(i=d.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(d.uIk("disabled",r.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.qOj],attrs:PM,ngContentSelectors:FM,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"span",0),d.Hsn(1),d.qZA(),d._UZ(2,"span",1)(3,"span",2)),2&t&&(d.xp6(2),d.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),d.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[tC],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),H1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[gf,ys,ys]}),n})();const BM=["connectionContainer"],UM=["inputContainer"],mC=["label"];function _C(n,e){1&n&&(d.ynx(0),d.TgZ(1,"div",14),d._UZ(2,"div",15)(3,"div",16)(4,"div",17),d.qZA(),d.TgZ(5,"div",18),d._UZ(6,"div",15)(7,"div",16)(8,"div",17),d.qZA(),d.BQk())}function HM(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",19),d.NdJ("cdkObserveContent",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.updateOutlineGap())}),d.Hsn(1,1),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function jM(n,e){if(1&n&&(d.ynx(0),d.Hsn(1,2),d.TgZ(2,"span"),d._uU(3),d.qZA(),d.BQk()),2&n){const t=d.oxw(2);d.xp6(3),d.Oqu(t._control.placeholder)}}function $M(n,e){1&n&&d.Hsn(0,3,["*ngSwitchCase","true"])}function zM(n,e){1&n&&(d.TgZ(0,"span",23),d._uU(1," *"),d.qZA())}function GM(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"label",20,21),d.NdJ("cdkObserveContent",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.updateOutlineGap())}),d.YNc(2,jM,4,1,"ng-container",12),d.YNc(3,$M,1,0,"ng-content",12),d.YNc(4,zM,2,0,"span",22),d.qZA()}if(2&n){const t=d.oxw();d.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),d.uIk("for",t._control.id)("aria-owns",t._control.id),d.xp6(2),d.Q6J("ngSwitchCase",!1),d.xp6(1),d.Q6J("ngSwitchCase",!0),d.xp6(1),d.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function WM(n,e){1&n&&(d.TgZ(0,"div",24),d.Hsn(1,4),d.qZA())}function qM(n,e){if(1&n&&(d.TgZ(0,"div",25),d._UZ(1,"span",26),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function KM(n,e){if(1&n&&(d.TgZ(0,"div"),d.Hsn(1,5),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState)}}function vf(n,e){if(1&n&&(d.TgZ(0,"div",30),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.Q6J("id",t._hintLabelId),d.xp6(1),d.Oqu(t.hintLabel)}}function yC(n,e){if(1&n&&(d.TgZ(0,"div",27),d.YNc(1,vf,2,2,"div",28),d.Hsn(2,6),d._UZ(3,"div",29),d.Hsn(4,7),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState),d.xp6(1),d.Q6J("ngIf",t.hintLabel)}}const vC=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],bC=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],wC=new d.OlP("MatError"),ZM={transitionMessages:oC("transitionMessages",[Wy("enter",Ql({opacity:1,transform:"translateY(0%)"})),Vg("void => enter",[Ql({opacity:0,transform:"translateY(-5px)"}),Gy("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let EC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n}),n})();const QM=new d.OlP("MatHint");let nv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-label"]]}),n})(),rv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const ma=new d.OlP("MatPrefix"),iv=new d.OlP("MatSuffix");let CC=0;const $g=jy(class{constructor(n){this._elementRef=n}},"primary"),zg=new d.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),DC=new d.OlP("MatFormField");let JM=(()=>{class n extends $g{constructor(t,r,i,s,c,h,p){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=c,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new an.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+CC++,this._labelId="mat-form-field-label-"+CC++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Wl(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(ui(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Gl(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Gl(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,uf.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ui(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ui(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Gl(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,cd(this._label.nativeElement,"transitionend").pipe(hn(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${s}`);for(let S=0;S<C.length;S++)C[S].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,h=0;const p=r.querySelectorAll(i),y=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const S=this._getStartEnd(C),R=t.children,V=this._getStartEnd(R[0].getBoundingClientRect());let H=0;for(let Q=0;Q<R.length;Q++)H+=R[Q].offsetWidth;c=Math.abs(V-S)-5,h=H>0?.75*H+10:0}for(let C=0;C<p.length;C++)p[C].style.width=`${c}px`;for(let C=0;C<y.length;C++)y[C].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(Er,8),d.Y36(zg,8),d.Y36(ts),d.Y36(d.R0b),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,EC,5),d.Suo(i,EC,7),d.Suo(i,nv,5),d.Suo(i,nv,7),d.Suo(i,rv,5),d.Suo(i,wC,5),d.Suo(i,QM,5),d.Suo(i,ma,5),d.Suo(i,iv,5)),2&t){let s;d.iGM(s=d.CRH())&&(r._controlNonStatic=s.first),d.iGM(s=d.CRH())&&(r._controlStatic=s.first),d.iGM(s=d.CRH())&&(r._labelChildNonStatic=s.first),d.iGM(s=d.CRH())&&(r._labelChildStatic=s.first),d.iGM(s=d.CRH())&&(r._placeholderChild=s.first),d.iGM(s=d.CRH())&&(r._errorChildren=s),d.iGM(s=d.CRH())&&(r._hintChildren=s),d.iGM(s=d.CRH())&&(r._prefixChildren=s),d.iGM(s=d.CRH())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(d.Gf(BM,7),d.Gf(UM,5),d.Gf(mC,5)),2&t){let i;d.iGM(i=d.CRH())&&(r._connectionContainerRef=i.first),d.iGM(i=d.CRH())&&(r._inputContainerRef=i.first),d.iGM(i=d.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&d.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[d._Bn([{provide:DC,useExisting:n}]),d.qOj],ngContentSelectors:bC,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(d.F$t(vC),d.TgZ(0,"div",0)(1,"div",1,2),d.NdJ("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),d.YNc(3,_C,9,0,"ng-container",3),d.YNc(4,HM,2,1,"div",4),d.TgZ(5,"div",5,6),d.Hsn(7),d.TgZ(8,"span",7),d.YNc(9,GM,5,16,"label",8),d.qZA()(),d.YNc(10,WM,2,0,"div",9),d.qZA(),d.YNc(11,qM,2,4,"div",10),d.TgZ(12,"div",11),d.YNc(13,KM,2,1,"div",12),d.YNc(14,yC,5,2,"div",13),d.qZA()()),2&t&&(d.xp6(3),d.Q6J("ngIf","outline"==r.appearance),d.xp6(1),d.Q6J("ngIf",r._prefixChildren.length),d.xp6(5),d.Q6J("ngIf",r._hasFloatingLabel()),d.xp6(1),d.Q6J("ngIf",r._suffixChildren.length),d.xp6(1),d.Q6J("ngIf","outline"!=r.appearance),d.xp6(1),d.Q6J("ngSwitch",r._getDisplayedMessages()),d.xp6(1),d.Q6J("ngSwitchCase","error"),d.xp6(1),d.Q6J("ngSwitchCase","hint"))},dependencies:[ir,eo,wl,tE],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[ZM.transitionMessages]},changeDetection:0}),n})(),sv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[nh,ys,bg,ys]}),n})();const ov=rd({passive:!0});let av=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Fr.E;const r=ql(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new an.x,c="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(c)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(c)&&(r.classList.remove(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(r.classList.add(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,ov),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,ov)}}),s}stopMonitoring(t){const r=ql(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ts),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function tx(...n){const e=(0,gs.jO)(n),{args:t,keys:r}=Ns(n),i=new sr.y(s=>{const{length:c}=t;if(!c)return void s.complete();const h=new Array(c);let p=c,y=c;for(let C=0;C<c;C++){let S=!1;(0,Xi.Xf)(t[C]).subscribe((0,Wn.x)(s,R=>{S||(S=!0,y--),h[C]=R},()=>p--,void 0,()=>{(!p||!S)&&(y||s.next(r?Za(r,h):h),s.complete())}))}});return e?i.pipe(Ya(e)):i}let Gg=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),ul=(()=>{class n extends Gg{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Eo=new d.OlP("NgValueAccessor"),nx={provide:Eo,useExisting:(0,d.Gpc)(()=>qg),multi:!0},ix=new d.OlP("CompositionEventMode");let qg=(()=>{class n extends Gg{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function rx(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(ix,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[d._Bn([nx]),d.qOj]}),n})();function _a(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function cv(n){return null!=n&&"number"==typeof n.length}const hi=new d.OlP("NgValidators"),dl=new d.OlP("NgAsyncValidators"),AC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class sx{static min(e){return function uv(n){return e=>{if(_a(e.value)||_a(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function dv(n){return e=>{if(_a(e.value)||_a(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function MC(n){return _a(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function hv(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function xC(n){return _a(n.value)||AC.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Ii(n){return e=>_a(e.value)||!cv(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Qc(n){return e=>cv(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function RC(n){if(!n)return Kg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(_a(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Yg(e)}static composeAsync(e){return mv(e)}}function Kg(n){return null}function ox(n){return null!=n}function ax(n){return(0,d.QGY)(n)?(0,yn.D)(n):n}function fv(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function pv(n,e){return e.map(t=>t(n))}function kC(n){return n.map(e=>function bf(n){return!n.validate}(e)?e:t=>e.validate(t))}function Yg(n){if(!n)return null;const e=n.filter(ox);return 0==e.length?null:function(t){return fv(pv(t,e))}}function gv(n){return null!=n?Yg(kC(n)):null}function mv(n){if(!n)return null;const e=n.filter(ox);return 0==e.length?null:function(t){return tx(pv(t,e).map(ax)).pipe((0,it.U)(fv))}}function _v(n){return null!=n?mv(kC(n)):null}function OC(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function NC(n){return n._rawValidators}function Zg(n){return n._rawAsyncValidators}function Qg(n){return n?Array.isArray(n)?n:[n]:[]}function wf(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ef(n,e){const t=Qg(e);return Qg(n).forEach(i=>{wf(t,i)||t.push(i)}),t}function Xg(n,e){return Qg(e).filter(t=>!wf(n,t))}class lx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_v(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Di extends lx{get formDirective(){return null}get path(){return null}}class hl extends lx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let vv=(()=>{class n extends class yv{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(hl,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})();const pd="VALID",tm="INVALID",gd="PENDING",nm="DISABLED";function rm(n){return(Cv(n)?n.validators:n)||null}function mx(n){return Array.isArray(n)?gv(n):n||null}function VC(n,e){return(Cv(e)?e.asyncValidators:n)||null}function _x(n){return Array.isArray(n)?_v(n):n||null}function Cv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class bx{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=mx(this._rawValidators),this._composedAsyncValidatorFn=_x(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pd}get invalid(){return this.status===tm}get pending(){return this.status==gd}get disabled(){return this.status===nm}get enabled(){return this.status!==nm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=mx(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=_x(e)}addValidators(e){this.setValidators(Ef(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ef(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Xg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Xg(e,this._rawAsyncValidators))}hasValidator(e){return wf(this._rawValidators,e)}hasAsyncValidator(e){return wf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=nm,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pd||this.status===gd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nm:pd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gd,this._hasOwnPendingAsyncValidator=!0;const t=ax(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?nm:this.errors?tm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gd)?gd:this._anyControlsHaveStatus(tm)?tm:pd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class BC extends bx{constructor(e,t,r){super(rm(t),VC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function vx(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function yx(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function md(n,e){Tv(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function eL(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&jC(n,e)})}(n,e),function Ex(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function wx(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&jC(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function HC(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Sv(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Df(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _d(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Tv(n,e){const t=NC(n);null!==e.validator?n.setValidators(OC(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Zg(n);null!==e.asyncValidator?n.setAsyncValidators(OC(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();_d(e._rawValidators,i),_d(e._rawAsyncValidators,i)}function Df(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=NC(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(c=>c!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=Zg(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(c=>c!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return _d(e._rawValidators,r),_d(e._rawAsyncValidators,r),t}function jC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Sf(n,e){Tv(n,e)}function Sx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const rL={provide:Di,useExisting:(0,d.Gpc)(()=>im)},Fi=(()=>Promise.resolve())();let im=(()=>{class n extends Di{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new BC({},gv(t),_v(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fi.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),md(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fi.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Fi.then(()=>{const r=this._findContainer(t.path),i=new BC({});Sf(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fi.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Fi.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Sx(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(hi,10),d.Y36(dl,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([rL]),d.qOj]}),n})();function sm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function zC(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const vs=class extends bx{constructor(e=null,t,r){super(rm(t),VC(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zC(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){zC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},qC={provide:hl,useExisting:(0,d.Gpc)(()=>om)},KC=(()=>Promise.resolve())();let om=(()=>{class n extends hl{constructor(t,r,i,s,c){super(),this._changeDetectorRef=c,this.control=new vs,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Mv(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===qg?t=s:function Dx(n){return Object.getPrototypeOf(n.constructor)===ul}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Av(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){md(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){KC.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);KC.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function If(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Di,9),d.Y36(hi,10),d.Y36(dl,10),d.Y36(Eo,10),d.Y36(d.sBO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([qC]),d.qOj,d.TTD]}),n})(),ya=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const oL={provide:Di,useExisting:(0,d.Gpc)(()=>Tf)};let Tf=(()=>{class n extends Di{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Df(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return md(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Sv(t.control||null,t,!1),function $C(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Sx(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Sv(r||null,t),(n=>n instanceof vs)(i)&&(md(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Sf(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Cx(n,e){return Df(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Tv(this.form,this),this._oldForm&&Df(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(hi,10),d.Y36(dl,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([oL]),d.qOj,d.TTD]}),n})(),dm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ya]}),n})(),pL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[dm]}),n})();const cI=new d.OlP("MAT_INPUT_VALUE_ACCESSOR"),Gx=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Wx=0;const uI=hM(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new an.x}});let $v=(()=>{class n extends uI{constructor(t,r,i,s,c,h,p,y,C,S){super(h,s,c,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=S,this._uid="mat-input-"+Wx++,this.focused=!1,this.stateChanges=new an.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(H=>iy().has(H)),this._iOSKeyupListener=H=>{const Q=H.target;!Q.value&&0===Q.selectionStart&&0===Q.selectionEnd&&(Q.setSelectionRange(1,1),Q.setSelectionRange(0,0))};const R=this._elementRef.nativeElement,V=R.nodeName.toLowerCase();this._inputValueAccessor=p||R,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===V,this._isTextarea="textarea"===V,this._isInFormField=!!S,this._isNativeSelect&&(this.controlType=R.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Wl(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(sx.required)??!1}set required(t){this._required=Wl(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&iy().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Wl(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,r=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(r!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=r,r?i.setAttribute("placeholder",r):i.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){Gx.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(ts),d.Y36(hl,10),d.Y36(im,8),d.Y36(Tf,8),d.Y36(mM),d.Y36(cI,10),d.Y36(av),d.Y36(d.R0b),d.Y36(DC,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&d.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(d.Ikx("disabled",r.disabled)("required",r.required),d.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),d.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[d._Bn([{provide:EC,useExisting:n}]),d.qOj,d.TTD]}),n})(),bL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[mM],imports:[SC,sv,ys,SC,sv]}),n})(),dI=(()=>{class n{constructor(t){this.dialogRef=t,this.name=""}ngOnInit(){}onNoName(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fd))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-dialog-add-player"]],decls:14,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","","cdkFocusInitial","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","mat-dialog-close"]],template:function(t,r){1&t&&(d.TgZ(0,"h1",0),d._uU(1,"Add new player"),d.qZA(),d.TgZ(2,"div",1)(3,"p"),d._uU(4,"Please enter the name of a player"),d.qZA(),d.TgZ(5,"mat-form-field")(6,"mat-label"),d._uU(7,"Name"),d.qZA(),d.TgZ(8,"input",2),d.NdJ("ngModelChange",function(s){return r.name=s}),d.qZA()()(),d.TgZ(9,"div",3)(10,"button",4),d.NdJ("click",function(){return r.onNoName()}),d._uU(11,"Cancel"),d.qZA(),d.TgZ(12,"button",5),d._uU(13," Ok "),d.qZA()()),2&t&&(d.xp6(8),d.Q6J("ngModel",r.name),d.xp6(4),d.Q6J("disabled",0==r.name.length)("mat-dialog-close",r.name))},dependencies:[tv,Xy,Jy,fC,ev,JM,nv,$v,qg,vv,om]}),n})();function zv(n,e){if(1&n&&d._UZ(0,"img",5),2&n){const t=e.$implicit;d.MGl("src","./assets/img/profile/",t,"",d.LSH),d.Q6J("mat-dialog-close",t)}}let qx=(()=>{class n{constructor(t){this.dialogRef=t,this.allProfilePictures=["m1.png","f1.png","m2.png","f2.png","m3.png","f3.png"]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fd))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-edit-player"]],decls:8,vars:2,consts:[["mat-dialog-title",""],["class","profile-picture",3,"mat-dialog-close","src",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],[1,"profile-picture",3,"mat-dialog-close","src"]],template:function(t,r){1&t&&(d.TgZ(0,"h1",0),d._uU(1,"Edit player picture"),d.qZA(),d.YNc(2,zv,1,2,"img",1),d.TgZ(3,"div",2)(4,"button",3),d.NdJ("click",function(){return r.dialogRef.close()}),d._uU(5,"Close"),d.qZA(),d.TgZ(6,"button",4),d._uU(7," Delete player "),d.qZA()()),2&t&&(d.xp6(2),d.Q6J("ngForOf",r.allProfilePictures),d.xp6(4),d.Q6J("mat-dialog-close","DELETE"))},dependencies:[as,tv,Xy,Jy,ev]}),n})();var pn=L(2122);function hI(){return(0,kn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Wn.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Ct,va=L(2011),Kx=(L(9568),L(3942)),De=L(5861),ns=L(9681),hm=L(4859),pl=L(1877),ne=L(2090),EL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gl={},fI=fI||{},qt=EL||self;function Gv(){}function Wv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function fm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var a="closure_uid_"+(1e9*Math.random()>>>0),l=0;function u(n,e,t){return n.call.apply(n.bind,arguments)}function f(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function g(n,e,t){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:f).apply(null,arguments)}function v(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function w(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function I(){this.s=this.s,this.o=this.o}I.prototype.s=!1,I.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function o(n){Object.prototype.hasOwnProperty.call(n,a)&&n[a]||(n[a]=++l)}(this)},I.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const N=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function B(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Y(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Wv(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let c=0;c<s;c++)n[i+c]=r[c]}else n.push(r)}}function ie(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!qt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{qt.addEventListener("test",Gv,e),qt.removeEventListener("test",Gv,e)}catch{}return n}();function $e(n){return/^[\s\xa0]*$/.test(n)}var Ke=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function dt(n,e){return n<e?-1:n>e?1:0}function St(){var n=qt.navigator;return n&&(n=n.userAgent)?n:""}function xe(n){return-1!=St().indexOf(n)}function kt(n){return kt[" "](n),n}kt[" "]=Gv;var vd,n,or=xe("Opera"),js=xe("Trident")||xe("MSIE"),pm=xe("Edge"),Mf=pm||js,gm=xe("Gecko")&&!(-1!=St().toLowerCase().indexOf("webkit")&&!xe("Edge"))&&!(xe("Trident")||xe("MSIE"))&&!xe("Edge"),qv=-1!=St().toLowerCase().indexOf("webkit")&&!xe("Edge");function mm(){var n=qt.document;return n?n.documentMode:void 0}e:{var xf="",Rf=(n=St(),gm?/rv:([^\);]+)(\)|;)/.exec(n):pm?/Edge\/([\d\.]+)/.exec(n):js?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):qv?/WebKit\/(\S+)/.exec(n):or?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Rf&&(xf=Rf?Rf[1]:""),js){var kf=mm();if(null!=kf&&kf>parseFloat(xf)){vd=String(kf);break e}}vd=xf}var yG={};var bG=qt.document&&js&&(mm()||parseInt(vd,10))||void 0;function Kv(n,e){if(ie.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(gm){e:{try{kt(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:wG[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kv.X.h.call(this)}}w(Kv,ie);var wG={2:"touch",3:"pen",4:"mouse"};Kv.prototype.h=function(){Kv.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Yv="closure_listenable_"+(1e6*Math.random()|0),EG=0;function CG(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++EG,this.ba=this.ea=!1}function pI(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Zx(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function IL(n){const e={};for(const t in n)e[t]=n[t];return e}const DL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SL(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<DL.length;s++)t=DL[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function gI(n){this.src=n,this.g={},this.h=0}function Qx(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=N(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(pI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Xx(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}gI.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=Xx(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new CG(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var Jx="closure_lm_"+(1e6*Math.random()|0),eR={};function TL(n,e,t,r,i){if(r&&r.once)return ML(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)TL(n,e[s],t,r,i);return null}return t=iR(t),n&&n[Yv]?n.N(e,t,fm(r)?!!r.capture:!!r,i):AL(n,e,t,!1,r,i)}function AL(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var c=fm(i)?!!i.capture:!!i,h=nR(n);if(h||(n[Jx]=h=new gI(n)),(t=h.add(e,t,r,c,s)).proxy)return t;if(r=function IG(){const e=DG;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Te||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(RL(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ML(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ML(n,e[s],t,r,i);return null}return t=iR(t),n&&n[Yv]?n.O(e,t,fm(r)?!!r.capture:!!r,i):AL(n,e,t,!0,r,i)}function xL(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)xL(n,e[s],t,r,i);else r=fm(r)?!!r.capture:!!r,t=iR(t),n&&n[Yv]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Xx(s=n.g[e],t,r,i))&&(pI(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=nR(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Xx(e,t,r,i)),(t=-1<n?e[n]:null)&&tR(t))}function tR(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Yv])Qx(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(RL(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=nR(e))?(Qx(t,n),0==t.h&&(t.src=null,e[Jx]=null)):pI(n)}}}function RL(n){return n in eR?eR[n]:eR[n]="on"+n}function DG(n,e){if(n.ba)n=!0;else{e=new Kv(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&tR(n),n=t.call(r,e)}return n}function nR(n){return(n=n[Jx])instanceof gI?n:null}var rR="__closure_events_fn_"+(1e9*Math.random()>>>0);function iR(n){return"function"==typeof n?n:(n[rR]||(n[rR]=function(e){return n.handleEvent(e)}),n[rR])}function Si(){I.call(this),this.i=new gI(this),this.P=this,this.I=null}function Li(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ie(e,n);else if(e instanceof ie)e.target=e.target||n;else{var i=e;SL(e=new ie(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];i=mI(c,r,!0,e)&&i}if(i=mI(c=e.g=n,r,!0,e)&&i,i=mI(c,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=mI(c=e.g=t[s],r,!1,e)&&i}function mI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.ba&&c.capture==t){var h=c.listener,p=c.ha||c.src;c.ea&&Qx(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}w(Si,I),Si.prototype[Yv]=!0,Si.prototype.removeEventListener=function(n,e,t,r){xL(this,n,e,t,r)},Si.prototype.M=function(){if(Si.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)pI(t[r]);delete n.g[e],n.h--}}this.I=null},Si.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Si.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var sR=qt.JSON.stringify;function SG(){var n=NL;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var oR,kL=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new AG,n=>n.reset());class AG{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function MG(n){qt.setTimeout(()=>{throw n},0)}function OL(n,e){oR||function xG(){var n=qt.Promise.resolve(void 0);oR=function(){n.then(RG)}}(),aR||(oR(),aR=!0),NL.add(n,e)}var aR=!1,NL=new class TG{constructor(){this.h=this.g=null}add(e,t){const r=kL.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function RG(){for(var n;n=SG();){try{n.h.call(n.g)}catch(t){MG(t)}var e=kL;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}aR=!1}function _I(n,e){Si.call(this),this.h=n||1,this.g=e||qt,this.j=g(this.lb,this),this.l=Date.now()}function lR(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function cR(n,e,t){if("function"==typeof n)t&&(n=g(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=g(n.handleEvent,n)}return 2147483647<Number(e)?-1:qt.setTimeout(n,e||0)}function PL(n){n.g=cR(()=>{n.g=null,n.i&&(n.i=!1,PL(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}w(_I,Si),(Ct=_I.prototype).ca=!1,Ct.R=null,Ct.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Li(this,"tick"),this.ca&&(lR(this),this.start()))}},Ct.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ct.M=function(){_I.X.M.call(this),lR(this),delete this.g};class kG extends I{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:PL(this)}M(){super.M(),this.g&&(qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zv(n){I.call(this),this.h=n,this.g={}}w(Zv,I);var FL=[];function LL(n,e,t,r){Array.isArray(t)||(t&&(FL[0]=t.toString()),t=FL);for(var i=0;i<t.length;i++){var s=TL(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function VL(n){Zx(n.g,function(e,t){this.g.hasOwnProperty(t)&&tR(e)},n),n.g={}}function yI(){this.g=!0}function _m(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function FG(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<i.length;c++)i[c]=""}}}return sR(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Zv.prototype.M=function(){Zv.X.M.call(this),VL(this)},Zv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yI.prototype.Aa=function(){this.g=!1},yI.prototype.info=function(){};var Of={},BL=null;function vI(){return BL=BL||new Si}function UL(n){ie.call(this,Of.Pa,n)}function Qv(n){const e=vI();Li(e,new UL(e))}function HL(n,e){ie.call(this,Of.STAT_EVENT,n),this.stat=e}function bs(n){const e=vI();Li(e,new HL(e,n))}function jL(n,e){ie.call(this,Of.Qa,n),this.size=e}function Xv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return qt.setTimeout(function(){n()},e)}Of.Pa="serverreachability",w(UL,ie),Of.STAT_EVENT="statevent",w(HL,ie),Of.Qa="timingevent",w(jL,ie);var bI={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},$L={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function uR(){}function GL(){}uR.prototype.h=null;var fR,Jv={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function dR(){ie.call(this,"d")}function hR(){ie.call(this,"c")}function wI(){}function eb(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Zv(this),this.O=LG,this.T=new _I(n=Mf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new WL}function WL(){this.i=null,this.g="",this.h=!1}w(dR,ie),w(hR,ie),w(wI,uR),wI.prototype.g=function(){return new XMLHttpRequest},wI.prototype.i=function(){return{}},fR=new wI;var LG=45e3,pR={},EI={};function gR(n,e,t){n.K=1,n.v=SI(eu(e)),n.s=t,n.P=!0,qL(n,null)}function qL(n,e){n.F=Date.now(),tb(n),n.A=eu(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),rV(t.i,"t",r),n.C=0,t=n.l.H,n.h=new WL,n.g=TV(n.l,t?e:null,!n.s),0<n.N&&(n.L=new kG(g(n.La,n,n.g),n.N)),LL(n.S,n.g,"readystatechange",n.ib),e=n.H?IL(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Qv(),function OG(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var C=y[0];y=y[1];var S=C.split("_");c=2<=S.length&&"type"==S[1]?c+(C+"=")+y+"&":c+(C+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function KL(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function YL(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=VG(n,t),i==EI){4==e&&(n.o=4,bs(14),r=!1),_m(n.j,n.m,null,"[Incomplete Response]");break}if(i==pR){n.o=4,bs(15),_m(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}_m(n.j,n.m,i,null),mR(n,i)}KL(n)&&i!=EI&&i!=pR&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,bs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),IR(e),e.K=!0,bs(11))):(_m(n.j,n.m,t,"[Invalid Chunked Response]"),Nf(n),nb(n))}function VG(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?EI:(t=Number(e.substring(t,r)),isNaN(t)?pR:(r+=1)+t>e.length?EI:(e=e.substr(r,t),n.C=r+t,e))}function tb(n){n.V=Date.now()+n.O,ZL(n,n.O)}function ZL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xv(g(n.gb,n),e)}function CI(n){n.B&&(qt.clearTimeout(n.B),n.B=null)}function nb(n){0==n.l.G||n.I||CV(n.l,n)}function Nf(n){CI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,lR(n.T),VL(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function mR(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||_R(t.h,n)))if(!n.J&&_R(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;kI(t),xI(t)}CR(t),bs(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Xv(g(t.cb,t),6e3));if(1>=oV(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ff(t,11)}else if((n.J||t.g==n)&&kI(t),!$e(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const C=y[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const S=y[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const R=y[5];null!=R&&"number"==typeof R&&0<R&&(t.J=r=1.5*R,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const H=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var s=r.h;s.g||-1==H.indexOf("spdy")&&-1==H.indexOf("quic")&&-1==H.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(yR(s,s.h),s.h=null))}if(r.D){const Q=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.za=Q,Ir(r.F,r.D,Q))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=SV(r,r.H?r.ka:null,r.V),c.J){aV(r.h,c);var h=c,p=r.J;p&&h.setTimeout(p),h.B&&(CI(h),tb(h)),r.g=c}else wV(r);0<t.i.length&&RI(t)}else"stop"!=y[0]&&"close"!=y[0]||Ff(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Ff(t,7):ER(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}Qv()}catch{}}function QL(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Wv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function UG(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Wv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function BG(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Wv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(Ct=eb.prototype).setTimeout=function(n){this.O=n},Ct.ib=function(n){n=n.target;const e=this.L;e&&3==tu(n)?e.l():this.La(n)},Ct.La=function(n){try{if(n==this.g)e:{const C=tu(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||Mf||this.g&&(this.h.h||this.g.fa()||gV(this.g)))){this.I||4!=C||7==e||Qv(),CI(this);var t=this.g.aa();this.Y=t;t:if(KL(this)){var r=gV(this.g);n="";var i=r.length,s=4==tu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Nf(this),nb(this);var c="";break t}this.h.i=new qt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function NG(n,e,t,r,i,s,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$e(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,bs(12),Nf(this),nb(this);break e}_m(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,mR(this,t)}this.P?(YL(this,C,c),Mf&&this.i&&3==C&&(LL(this.S,this.T,"tick",this.hb),this.T.start())):(_m(this.j,this.m,c,null),mR(this,c)),4==C&&Nf(this),this.i&&!this.I&&(4==C?CV(this.l,this):(this.i=!1,tb(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,bs(12)):(this.o=0,bs(13)),Nf(this),nb(this)}}}catch{}},Ct.hb=function(){if(this.g){var n=tu(this.g),e=this.g.fa();this.C<e.length&&(CI(this),YL(this,n,e),this.i&&4!=n&&tb(this))}},Ct.cancel=function(){this.I=!0,Nf(this)},Ct.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function PG(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Qv(),bs(17)),Nf(this),this.o=2,nb(this)):ZL(this,this.V-n)};var XL=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pf(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Pf){this.h=void 0!==e?e:n.h,II(this,n.j),this.s=n.s,this.g=n.g,DI(this,n.m),this.l=n.l,e=n.i;var t=new sb;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),JL(this,t),this.o=n.o}else n&&(t=String(n).match(XL))?(this.h=!!e,II(this,t[1]||"",!0),this.s=rb(t[2]||""),this.g=rb(t[3]||"",!0),DI(this,t[4]),this.l=rb(t[5]||"",!0),JL(this,t[6]||"",!0),this.o=rb(t[7]||"")):(this.h=!!e,this.i=new sb(null,this.h))}function eu(n){return new Pf(n)}function II(n,e,t){n.j=t?rb(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function DI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function JL(n,e,t){e instanceof sb?(n.i=e,function qG(n,e){e&&!n.j&&(bd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(tV(this,r),rV(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ib(e,GG)),n.i=new sb(e,n.h))}function Ir(n,e,t){n.i.set(e,t)}function SI(n){return Ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rb(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ib(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,jG),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function jG(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ib(e,eV,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ib(e,eV,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ib(t,"/"==t.charAt(0)?zG:$G,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ib(t,WG)),n.join("")};var eV=/[#\/\?@]/g,$G=/[#\?:]/g,zG=/[#\?]/g,GG=/[#\?@]/g,WG=/#/g;function sb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bd(n){n.g||(n.g=new Map,n.h=0,n.i&&function HG(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function tV(n,e){bd(n),e=ym(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function nV(n,e){return bd(n),e=ym(n,e),n.g.has(e)}function rV(n,e,t){tV(n,e),0<t.length&&(n.i=null,n.g.set(ym(n,e),B(t)),n.h+=t.length)}function ym(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function iV(n){this.l=n||YG,n=qt.PerformanceNavigationTiming?0<(n=qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(qt.g&&qt.g.Ga&&qt.g.Ga()&&qt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ct=sb.prototype).add=function(n,e){bd(this),this.i=null,n=ym(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ct.forEach=function(n,e){bd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ct.oa=function(){bd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},Ct.W=function(n){bd(this);let e=[];if("string"==typeof n)nV(this,n)&&(e=e.concat(this.g.get(ym(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ct.set=function(n,e){return bd(this),this.i=null,nV(this,n=ym(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ct.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=s;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var YG=10;function sV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function oV(n){return n.h?1:n.g?n.g.size:0}function _R(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function yR(n,e){n.g?n.g.add(e):n.h=e}function aV(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function lV(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return B(n.i)}function vR(){}function ZG(){this.g=new vR}function QG(n,e,t){const r=t||"";try{QL(n,function(i,s){let c=i;fm(i)&&(c=sR(i)),e.push(r+s+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function TI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ob(n){this.l=n.ac||null,this.j=n.jb||!1}function AI(n,e){Si.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=bR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}iV.prototype.cancel=function(){if(this.i=lV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},vR.prototype.stringify=function(n){return qt.JSON.stringify(n,void 0)},vR.prototype.parse=function(n){return qt.JSON.parse(n,void 0)},w(ob,uR),ob.prototype.g=function(){return new AI(this.l,this.j)},ob.prototype.i=function(n){return function(){return n}}({}),w(AI,Si);var bR=0;function cV(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function ab(n){n.readyState=4,n.l=null,n.j=null,n.A=null,lb(n)}function lb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ct=AI.prototype).open=function(n,e){if(this.readyState!=bR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,lb(this)},Ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||qt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ab(this)),this.readyState=bR},Ct.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,lb(this)),this.g&&(this.readyState=3,lb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof qt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cV(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Ct.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ab(this):lb(this),3==this.readyState&&cV(this)}},Ct.Va=function(n){this.g&&(this.response=this.responseText=n,ab(this))},Ct.Ua=function(n){this.g&&(this.response=n,ab(this))},Ct.ga=function(){this.g&&ab(this)},Ct.setRequestHeader=function(n,e){this.v.append(n,e)},Ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(AI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var JG=qt.JSON.parse;function Vr(n){Si.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=uV,this.K=this.L=!1}w(Vr,Si);var uV="",eW=/^https?$/i,tW=["POST","PUT"];function dV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,hV(n),MI(n)}function hV(n){n.D||(n.D=!0,Li(n,"complete"),Li(n,"error"))}function fV(n){if(n.h&&typeof fI<"u"&&(!n.C[1]||4!=tu(n)||2!=n.aa()))if(n.v&&4==tu(n))cR(n.Ha,0,n);else if(Li(n,"readystatechange"),4==tu(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(XL)[1]||null;if(!i&&qt.self&&qt.self.location){var s=qt.self.location.protocol;i=s.substr(0,s.length-1)}r=!eW.test(i?i.toLowerCase():"")}t=r}if(t)Li(n,"complete"),Li(n,"success");else{n.m=6;try{var c=2<tu(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",hV(n)}}finally{MI(n)}}}function MI(n,e){if(n.g){pV(n);const t=n.g,r=n.C[0]?Gv:null;n.g=null,n.C=null,e||Li(n,"ready");try{t.onreadystatechange=r}catch{}}}function pV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(qt.clearTimeout(n.A),n.A=null)}function tu(n){return n.g?n.g.readyState:0}function gV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case uV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function mV(n){let e="";return Zx(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function wR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=mV(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ir(n,e,t))}function cb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function _V(n){this.Ca=0,this.i=[],this.j=new yI,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=cb("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=cb("baseRetryDelayMs",5e3,n),this.bb=cb("retryDelaySeedMs",1e4,n),this.$a=cb("forwardChannelMaxRetries",2,n),this.ta=cb("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new iV(n&&n.concurrentRequestLimit),this.Fa=new ZG,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ER(n){if(yV(n),3==n.G){var e=n.U++,t=eu(n.F);Ir(t,"SID",n.I),Ir(t,"RID",e),Ir(t,"TYPE","terminate"),ub(n,t),(e=new eb(n,n.j,e,void 0)).K=2,e.v=SI(eu(t)),t=!1,qt.navigator&&qt.navigator.sendBeacon&&(t=qt.navigator.sendBeacon(e.v.toString(),"")),!t&&qt.Image&&((new Image).src=e.v,t=!0),t||(e.g=TV(e.l,null),e.g.da(e.v)),e.F=Date.now(),tb(e)}DV(n)}function xI(n){n.g&&(IR(n),n.g.cancel(),n.g=null)}function yV(n){xI(n),n.u&&(qt.clearTimeout(n.u),n.u=null),kI(n),n.h.cancel(),n.m&&("number"==typeof n.m&&qt.clearTimeout(n.m),n.m=null)}function RI(n){sV(n.h)||n.m||(n.m=!0,OL(n.Ja,n),n.C=0)}function vV(n,e){var t;t=e?e.m:n.U++;const r=eu(n.F);Ir(r,"SID",n.I),Ir(r,"RID",t),Ir(r,"AID",n.T),ub(n,r),n.o&&n.s&&wR(r,n.o,n.s),t=new eb(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=bV(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),yR(n.h,t),gR(t,r,e)}function ub(n,e){n.ia&&Zx(n.ia,function(t,r){Ir(e,r,t)}),n.l&&QL({},function(t,r){Ir(e,r,t)})}function bV(n,e,t){t=Math.min(n.i.length,t);var r=n.l?g(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=i[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let y=i[p].h;const C=i[p].g;if(y-=s,0>y)s=Math.max(0,i[p].h-100),h=!1;else try{QG(C,c,"req"+y+"_")}catch{r&&r(C)}}if(h){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function wV(n){n.g||n.u||(n.Z=1,OL(n.Ia,n),n.A=0)}function CR(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Xv(g(n.Ia,n),IV(n,n.A)),n.A++,0))}function IR(n){null!=n.B&&(qt.clearTimeout(n.B),n.B=null)}function EV(n){n.g=new eb(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=eu(n.sa);Ir(e,"RID","rpc"),Ir(e,"SID",n.I),Ir(e,"CI",n.L?"0":"1"),Ir(e,"AID",n.T),Ir(e,"TYPE","xmlhttp"),ub(n,e),n.o&&n.s&&wR(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=SI(eu(e)),t.s=null,t.P=!0,qL(t,n)}function kI(n){null!=n.v&&(qt.clearTimeout(n.v),n.v=null)}function CV(n,e){var t=null;if(n.g==e){kI(n),IR(n),n.g=null;var r=2}else{if(!_R(n.h,e))return;t=e.D,aV(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Li(r=vI(),new jL(r,t)),RI(n)}else wV(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function rW(n,e){return!(oV(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Xv(g(n.Ja,n,e),IV(n,n.C)),n.C++,0)))}(n,e)||2==r&&CR(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Ff(n,5);break;case 4:Ff(n,10);break;case 3:Ff(n,6);break;default:Ff(n,2)}}function IV(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Ff(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=g(n.kb,n);t||(t=new Pf("//www.google.com/images/cleardot.gif"),qt.location&&"http"==qt.location.protocol||II(t,"https"),SI(t)),function XG(n,e){const t=new yI;if(qt.Image){const r=new Image;r.onload=v(TI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=v(TI,t,r,"TestLoadImage: error",!1,e),r.onabort=v(TI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=v(TI,t,r,"TestLoadImage: timeout",!1,e),qt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else bs(2);n.G=0,n.l&&n.l.va(e),DV(n),yV(n)}function DV(n){if(n.G=0,n.la=[],n.l){const e=lV(n.h);(0!=e.length||0!=n.i.length)&&(Y(n.la,e),Y(n.la,n.i),n.h.i.length=0,B(n.i),n.i.length=0),n.l.ua()}}function SV(n,e,t){var r=t instanceof Pf?eu(t):new Pf(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),DI(r,r.m);else{var i=qt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Pf(null,void 0);r&&II(s,r),e&&(s.g=e),i&&DI(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&Ir(r,t,e),Ir(r,"VER",n.ma),ub(n,r),r}function TV(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vr(t&&n.Da&&!n.ra?new ob({jb:!0}):n.ra)).Ka(n.H),e}function AV(){}function OI(){if(js&&!(10<=Number(bG)))throw Error("Environmental error: no available transport.")}function Co(n,e){Si.call(this),this.g=new _V(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!$e(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$e(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new vm(this)}function MV(n){dR.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function xV(){hR.call(this),this.status=1}function vm(n){this.g=n}(Ct=Vr.prototype).Ka=function(n){this.L=n},Ct.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fR.g(),this.C=function zL(n){return n.h||(n.h=n.i())}(this.u?this.u:fR),this.g.onreadystatechange=g(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void dV(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=qt.FormData&&n instanceof qt.FormData,!(0<=N(tW,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of t)this.g.setRequestHeader(s,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pV(this),0<this.B&&((this.K=function nW(n){return js&&function vG(){return function Tn(n){var e=yG;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Ke(String(vd)).split("."),t=Ke("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",s=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=dt(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||dt(0==i[2].length,0==s[2].length)||dt(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=g(this.qa,this)):this.A=cR(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){dV(this,s)}},Ct.qa=function(){typeof fI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Li(this,"timeout"),this.abort(8))},Ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Li(this,"complete"),Li(this,"abort"),MI(this))},Ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),MI(this,!0)),Vr.X.M.call(this)},Ct.Ha=function(){this.s||(this.F||this.v||this.l?fV(this):this.fb())},Ct.fb=function(){fV(this)},Ct.aa=function(){try{return 2<tu(this)?this.g.status:-1}catch{return-1}},Ct.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ct.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),JG(e)}},Ct.Ea=function(){return this.m},Ct.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ct=_V.prototype).ma=8,Ct.G=1,Ct.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new eb(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=IL(s),SL(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=bV(this,i,e),Ir(t=eu(this.F),"RID",n),Ir(t,"CVER",22),this.D&&Ir(t,"X-HTTP-Session-Id",this.D),ub(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(mV(s)))+"&"+e:this.o&&wR(t,this.o,s)),yR(this.h,i),this.Ya&&Ir(t,"TYPE","init"),this.O?(Ir(t,"$req",e),Ir(t,"SID","null"),i.Z=!0,gR(i,t,null)):gR(i,t,e),this.G=2}}else 3==this.G&&(n?vV(this,n):0==this.i.length||sV(this.h)||vV(this))},Ct.Ia=function(){if(this.u=null,EV(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Xv(g(this.eb,this),n)}},Ct.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,bs(10),xI(this),EV(this))},Ct.cb=function(){null!=this.v&&(this.v=null,xI(this),CR(this),bs(19))},Ct.kb=function(n){n?(this.j.info("Successfully pinged google.com"),bs(2)):(this.j.info("Failed to ping google.com"),bs(1))},(Ct=AV.prototype).xa=function(){},Ct.wa=function(){},Ct.va=function(){},Ct.ua=function(){},Ct.Ra=function(){},OI.prototype.g=function(n,e){return new Co(n,e)},w(Co,Si),Co.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;bs(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=SV(n,null,n.V),RI(n)},Co.prototype.close=function(){ER(this.g)},Co.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=sR(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&RI(e)},Co.prototype.M=function(){this.g.l=null,delete this.j,ER(this.g),delete this.g,Co.X.M.call(this)},w(MV,dR),w(xV,hR),w(vm,AV),vm.prototype.xa=function(){Li(this.g,"a")},vm.prototype.wa=function(n){Li(this.g,new MV(n))},vm.prototype.va=function(n){Li(this.g,new xV)},vm.prototype.ua=function(){Li(this.g,"b")},OI.prototype.createWebChannel=OI.prototype.g,Co.prototype.send=Co.prototype.u,Co.prototype.open=Co.prototype.m,Co.prototype.close=Co.prototype.close,bI.NO_ERROR=0,bI.TIMEOUT=8,bI.HTTP_ERROR=6,$L.COMPLETE="complete",GL.EventType=Jv,Jv.OPEN="a",Jv.CLOSE="b",Jv.ERROR="c",Jv.MESSAGE="d",Si.prototype.listen=Si.prototype.N,Vr.prototype.listenOnce=Vr.prototype.O,Vr.prototype.getLastError=Vr.prototype.Oa,Vr.prototype.getLastErrorCode=Vr.prototype.Ea,Vr.prototype.getStatus=Vr.prototype.aa,Vr.prototype.getResponseJson=Vr.prototype.Sa,Vr.prototype.getResponseText=Vr.prototype.fa,Vr.prototype.send=Vr.prototype.da,Vr.prototype.setWithCredentials=Vr.prototype.Ka;var iW=gl.createWebChannelTransport=function(){return new OI},sW=gl.getStatEventTarget=function(){return vI()},DR=gl.ErrorCode=bI,oW=gl.EventType=$L,aW=gl.Event=Of,RV=gl.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},lW=gl.FetchXmlHttpFactory=ob,NI=gl.WebChannel=GL,cW=gl.XhrIo=Vr;const kV="@firebase/firestore";class Ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ti.UNAUTHENTICATED=new Ti(null),Ti.GOOGLE_CREDENTIALS=new Ti("google-credentials-uid"),Ti.FIRST_PARTY=new Ti("first-party-uid"),Ti.MOCK_USER=new Ti("mock-user");let bm="9.16.0";const wd=new pl.Yd("@firebase/firestore");function SR(){return wd.logLevel}function ze(n,...e){if(wd.logLevel<=pl.in.DEBUG){const t=e.map(TR);wd.debug(`Firestore (${bm}): ${n}`,...t)}}function qr(n,...e){if(wd.logLevel<=pl.in.ERROR){const t=e.map(TR);wd.error(`Firestore (${bm}): ${n}`,...t)}}function Lf(n,...e){if(wd.logLevel<=pl.in.WARN){const t=e.map(TR);wd.warn(`Firestore (${bm}): ${n}`,...t)}}function TR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${bm}) INTERNAL ASSERTION FAILED: `+n;throw qr(e),new Error(e)}function It(n,e){n||ht()}function tt(n,e){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends ne.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class OV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ti.UNAUTHENTICATED))}shutdown(){}}class fW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pW{constructor(e){this.t=e,this.currentUser=Ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let c=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new fi,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable((0,De.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new fi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new OV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new Ti(e)}}class gW{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Ti.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(It(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class mW{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new gW(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _W{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.A;return this.A=s.token,ze("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.A=t.token,new NV(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yW(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class PV{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=yW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Yt(n,e){return n<e?-1:n>e?1:0}function wm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function FV(n){return n+"\0"}class Dr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Be(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Be(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Be(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dr.fromMillis(Date.now())}static fromDate(e){return Dr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Dr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new Dr(0,0))}static max(){return new At(new Dr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class db{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===db.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof db?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),c=t.get(i);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class In extends db{construct(e,t,r){return new In(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new In(t)}static emptyPath(){return new In([])}}const vW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Br extends db{construct(e,t,r){return new Br(e,t,r)}static isValidIdentifier(e){return vW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Br(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Be(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Be(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Be(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(s(),i++)}if(s(),c)throw new Be(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Br(t)}static emptyPath(){return new Br([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(In.fromString(e))}static fromName(e){return new Qe(In.fromString(e).popFirst(5))}static empty(){return new Qe(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new In(e.slice()))}}class PI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function AR(n){return n.fields.find(e=>2===e.kind)}function Vf(n){return n.fields.filter(e=>2!==e.kind)}PI.UNKNOWN_ID=-1;class FI{constructor(e,t){this.fieldPath=e,this.kind=t}}class hb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hb(0,Io.min())}}function LV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new Dr(t+1,0):new Dr(t,r));return new Io(i,Qe.empty(),e)}function VV(n){return new Io(n.readTime,n.key,-1)}class Io{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Io(At.min(),Qe.empty(),-1)}static max(){return new Io(At.max(),Qe.empty(),-1)}}function MR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:Yt(n.largestBatchId,e.largestBatchId))}const BV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ed(n){return xR.apply(this,arguments)}function xR(){return xR=(0,De.Z)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==BV)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),xR.apply(this,arguments)}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let i=0,s=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++s,c&&s===i&&t()},p=>r(p))}),c=!0,s===i&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(i=>i?ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ge((r,i)=>{const s=e.length,c=new Array(s);let h=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(C=>{c[y]=C,++h,h===s&&r(c)},C=>i(C))}})}static doWhile(e,t){return new ge((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class LI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new fi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new fb(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=RR(r.target.error);this.P.reject(new fb(e,i))}}static open(e,t,r,i){try{return new LI(t,e.transaction(i,r))}catch(s){throw new fb(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new CW(t)}}class ml{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ml.D((0,ne.z$)())&&qr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),Bf(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ne.hl)())return!1;if(ml.N())return!0;const e=(0,ne.z$)(),t=ml.D(e),r=0<t&&t<10,i=ml.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,De.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=c=>{r(c.target.result)},s.onblocked=()=>{i(new fb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Be(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Be(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new fb(e,h))},s.onupgradeneeded=c=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,s.transaction,c.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,De.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.F(e);const p=LI.open(s.db,e,c?"readonly":"readwrite",r),y=i(p).next(C=>(p.V(),C)).catch(C=>(p.abort(C),ge.reject(C))).toPromise();return y.catch(()=>{}),yield p.v,y}catch(p){const y=p,C="FirebaseError"!==y.name&&h<3;if(ze("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),s.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class EW{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Bf(this.q.delete())}}class fb extends Be{constructor(e,t){super(ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Cd(n){return"IndexedDbTransactionError"===n.name}class CW{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bf(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),Bf(this.store.add(e))}get(e){return Bf(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),Bf(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),Bf(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(c,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new ge((s,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ge((i,s)=>{r.onerror=c=>{s(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,c,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ge((r,i)=>{t.onerror=s=>{const c=RR(s.target.error);i(c)},t.onsuccess=s=>{const c=s.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new ge((i,s)=>{e.onerror=c=>{s(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const p=new EW(h),y=t(h.primaryKey,h.value,p);if(y instanceof ge){const C=y.catch(S=>(p.done(),ge.reject(S)));r.push(C)}p.isDone?i():null===p.G?h.continue():h.continue(p.G)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bf(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=RR(r.target.error);t(i)}})}let HV=!1;function RR(n){const e=ml.D((0,ne.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HV||(HV=!0,setTimeout(()=>{throw r},0)),r}}return n}class IW{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,De.Z)(function*(){t.task=null;try{ze("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Cd(r)?ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ed(r)}yield t.nt(6e4)}))}}class DW{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,De.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return ge.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return ze("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(h=>{i-=h,r.add(c)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,s)).next(h=>(ze("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const c=VV(s);MR(c,r)>0&&(r=c)}),new Io(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Do=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class SW{constructor(e,t,r,i,s,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Id{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Id("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Id&&e.projectId===this.projectId&&e.database===this.database}}function jV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Uf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $V(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pb(n){return null==n}function gb(n){return 0===n&&1/n==-1/0}function zV(n){return"number"==typeof n&&Number.isInteger(n)&&!gb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class pi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new pi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new pi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const AW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dd(n){if(It(!!n),"string"==typeof n){let e=0;const t=AW.exec(n);if(It(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ur(n.seconds),nanos:Ur(n.nanos)}}function Ur(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Hf(n){return"string"==typeof n?pi.fromBase64String(n):pi.fromUint8Array(n)}function kR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function GV(n){const e=n.mapValue.fields.__previous_value__;return kR(e)?GV(e):e}function mb(n){const e=Dd(n.mapValue.fields.__local_write_time__.timestampValue);return new Dr(e.seconds,e.nanos)}const Sd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},VI={nullValue:"NULL_VALUE"};function jf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kR(n)?4:YV(n)?9007199254740991:10:ht()}function Jl(n,e){if(n===e)return!0;const t=jf(n);if(t!==jf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mb(n).isEqual(mb(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Dd(r.timestampValue),c=Dd(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Hf(n.bytesValue).isEqual(Hf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ur(r.geoPointValue.latitude)===Ur(i.geoPointValue.latitude)&&Ur(r.geoPointValue.longitude)===Ur(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ur(r.integerValue)===Ur(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Ur(r.doubleValue),c=Ur(i.doubleValue);return s===c?gb(s)===gb(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return wm(n.arrayValue.values||[],e.arrayValue.values||[],Jl);case 10:return function(r,i){const s=r.mapValue.fields||{},c=i.mapValue.fields||{};if(jV(s)!==jV(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!Jl(s[h],c[h])))return!1;return!0}(n,e);default:return ht()}var i}function _b(n,e){return void 0!==(n.values||[]).find(t=>Jl(t,e))}function Td(n,e){if(n===e)return 0;const t=jf(n),r=jf(e);if(t!==r)return Yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const c=Ur(i.integerValue||i.doubleValue),h=Ur(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return WV(n.timestampValue,e.timestampValue);case 4:return WV(mb(n),mb(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(i,s){const c=Hf(i),h=Hf(s);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const c=i.split("/"),h=s.split("/");for(let p=0;p<c.length&&p<h.length;p++){const y=Yt(c[p],h[p]);if(0!==y)return y}return Yt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const c=Yt(Ur(i.latitude),Ur(s.latitude));return 0!==c?c:Yt(Ur(i.longitude),Ur(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const c=i.values||[],h=s.values||[];for(let p=0;p<c.length&&p<h.length;++p){const y=Td(c[p],h[p]);if(y)return y}return Yt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Sd.mapValue&&s===Sd.mapValue)return 0;if(i===Sd.mapValue)return 1;if(s===Sd.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),p=s.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let C=0;C<h.length&&C<y.length;++C){const S=Yt(h[C],y[C]);if(0!==S)return S;const R=Td(c[h[C]],p[y[C]]);if(0!==R)return R}return Yt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ht()}}function WV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Yt(n,e);const t=Dd(n),r=Dd(e),i=Yt(t.seconds,r.seconds);return 0!==i?i:Yt(t.nanos,r.nanos)}function Em(n){return OR(n)}function OR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Dd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Hf(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const c of r.values||[])s?s=!1:i+=",",i+=OR(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",c=!0;for(const h of i)c?c=!1:s+=",",s+=`${h}:${OR(r.fields[h])}`;return s+"}"}(n.mapValue):ht();var e}function $f(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function NR(n){return!!n&&"integerValue"in n}function yb(n){return!!n&&"arrayValue"in n}function qV(n){return!!n&&"nullValue"in n}function KV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function BI(n){return!!n&&"mapValue"in n}function vb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Uf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vb(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vb(n.arrayValue.values[t]);return e}return Object.assign({},n)}function YV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function MW(n){return"nullValue"in n?VI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?$f(Id.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function xW(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?$f(Id.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Sd:ht()}function ZV(n,e){const t=Td(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function QV(n,e){const t=Td(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ad{constructor(e,t){this.position=e,this.inclusive=t}}function XV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],c=n.position[i];if(r=s.field.isKeyField()?Qe.comparator(Qe.fromName(c.referenceValue),t.key):Td(c,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function JV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jl(n.position[t],e.position[t]))return!1;return!0}class eB{}class gn extends eB{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new RW(e,t,r):"array-contains"===t?new NW(e,r):"in"===t?new oB(e,r):"not-in"===t?new PW(e,r):"array-contains-any"===t?new FW(e,r):new gn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new kW(e,r):new OW(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Td(t,this.value)):null!==t&&jf(this.value)===jf(t)&&this.matchesComparison(Td(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class $n extends eB{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new $n(e,t)}matches(e){return Cm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Cm(n){return"and"===n.op}function PR(n){return"or"===n.op}function FR(n){return tB(n)&&Cm(n)}function tB(n){for(const e of n.filters)if(e instanceof $n)return!1;return!0}function LR(n){if(n instanceof gn)return n.field.canonicalString()+n.op.toString()+Em(n.value);if(FR(n))return n.filters.map(e=>LR(e)).join(",");{const e=n.filters.map(t=>LR(t)).join(",");return`${n.op}(${e})`}}function nB(n,e){return n instanceof gn?(t=n,(r=e)instanceof gn&&t.op===r.op&&t.field.isEqual(r.field)&&Jl(t.value,r.value)):n instanceof $n?function(t,r){return r instanceof $n&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,c)=>i&&nB(s,r.filters[c]),!0)}(n,e):void ht();var t,r}function rB(n,e){const t=n.filters.concat(e);return $n.create(t,n.op)}function iB(n){return n instanceof gn?`${(e=n).field.canonicalString()} ${e.op} ${Em(e.value)}`:n instanceof $n?function(e){return e.op.toString()+" {"+e.getFilters().map(iB).join(" ,")+"}"}(n):"Filter";var e}class RW extends gn{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class kW extends gn{constructor(e,t){super(e,"in",t),this.keys=sB(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class OW extends gn{constructor(e,t){super(e,"not-in",t),this.keys=sB(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sB(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class NW extends gn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yb(t)&&_b(t.arrayValue,this.value)}}class oB extends gn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_b(this.value.arrayValue,t)}}class PW extends gn{constructor(e,t){super(e,"not-in",t)}matches(e){if(_b(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_b(this.value.arrayValue,t)}}class FW extends gn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_b(this.value.arrayValue,r))}}class Im{constructor(e,t="asc"){this.field=e,this.dir=t}}function LW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Hr{constructor(e,t){this.comparator=e,this.root=t||Vi.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vi.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new UI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new UI(this.root,e,this.comparator,!1)}getReverseIterator(){return new UI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new UI(this.root,e,this.comparator,!0)}}class UI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Vi.RED,this.left=i??Vi.EMPTY,this.right=s??Vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Vi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Vi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Vi.EMPTY=null,Vi.RED=!0,Vi.BLACK=!1,Vi.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Vi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aB(this.data.getIterator())}getIteratorFrom(e){return new aB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class aB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dm(n){return n.hasNext()?n.getNext():void 0}class $s{constructor(e){this.fields=e,e.sort(Br.comparator)}static empty(){return new $s([])}unionWith(e){let t=new qn(Br.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Bi{constructor(e){this.value=e}static empty(){return new Bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!BI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vb(t)}setAll(e){let t=Br.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=vb(c):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());BI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];BI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Uf(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Bi(vb(this.value))}}function lB(n){const e=[];return Uf(n.fields,(t,r)=>{const i=new Br([t]);if(BI(r)){const s=lB(r.mapValue).fields;if(0===s.length)e.push(i);else for(const c of s)e.push(i.child(c))}else e.push(i)}),new $s(e)}class yr{constructor(e,t,r,i,s,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=c,this.documentState=h}static newInvalidDocument(e){return new yr(e,0,At.min(),At.min(),At.min(),Bi.empty(),0)}static newFoundDocument(e,t,r,i){return new yr(e,1,t,At.min(),r,i,0)}static newNoDocument(e,t){return new yr(e,2,t,At.min(),At.min(),Bi.empty(),0)}static newUnknownDocument(e,t){return new yr(e,3,t,At.min(),At.min(),Bi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(At.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class VW{constructor(e,t=null,r=[],i=[],s=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=c,this.endAt=h,this.ft=null}}function VR(n,e=null,t=[],r=[],i=null,s=null,c=null){return new VW(n,e,t,r,i,s,c)}function zf(n){const e=tt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>LR(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),pb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Em(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Em(r)).join(",")),e.ft=t}return e.ft}function bb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!LW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JV(n.startAt,e.startAt)&&JV(n.endAt,e.endAt)}function HI(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jI(n,e){return n.filters.filter(t=>t instanceof gn&&t.field.isEqual(e))}function cB(n,e,t){let r=VI,i=!0;for(const s of jI(n,e)){let c=VI,h=!0;switch(s.op){case"<":case"<=":c=MW(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,h=!1;break;case"!=":case"not-in":c=VI}ZV({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];ZV({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function uB(n,e,t){let r=Sd,i=!0;for(const s of jI(n,e)){let c=Sd,h=!0;switch(s.op){case">=":case">":c=xW(s.value),h=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,h=!1;break;case"!=":case"not-in":c=Sd}QV({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];QV({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class nu{constructor(e,t=null,r=[],i=[],s=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=p,this.dt=null,this._t=null}}function dB(n,e,t,r,i,s,c,h){return new nu(n,e,t,r,i,s,c,h)}function Sm(n){return new nu(n)}function hB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function BR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function $I(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function UR(n){return null!==n.collectionGroup}function Gf(n){const e=tt(n);if(null===e.dt){e.dt=[];const t=$I(e),r=BR(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Im(t)),e.dt.push(new Im(Br.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Im(Br.keyField(),s))}}}return e.dt}function ws(n){const e=tt(n);if(!e._t)if("F"===e.limitType)e._t=VR(e.path,e.collectionGroup,Gf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Gf(e))t.push(new Im(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Ad(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ad(e.startAt.position,e.startAt.inclusive):null;e._t=VR(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function HR(n,e){e.getFirstInequalityField(),$I(n);const t=n.filters.concat([e]);return new nu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zI(n,e,t){return new nu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wb(n,e){return bb(ws(n),ws(e))&&n.limitType===e.limitType}function fB(n){return`${zf(ws(n))}|lt:${n.limitType}`}function jR(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>iB(r)).join(", ")}]`),pb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Em(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Em(r)).join(",")),`Target(${t})`}(ws(n))}; limitType=${n.limitType})`}function $R(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Gf(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,c){const h=XV(i,s,c);return i.inclusive?h<=0:h<0}(t.startAt,Gf(t),r)||t.endAt&&!function(i,s,c){const h=XV(i,s,c);return i.inclusive?h>=0:h>0}(t.endAt,Gf(t),r)));var t,r}function pB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gB(n){return(e,t)=>{let r=!1;for(const i of Gf(n)){const s=BW(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function BW(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,s,c){const h=s.data.field(i),p=c.data.field(i);return null!==h&&null!==p?Td(h,p):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function mB(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gb(e)?"-0":e}}function _B(n){return{integerValue:""+n}}function yB(n,e){return zV(e)?_B(e):mB(n,e)}class GI{constructor(){this._=void 0}}function UW(n,e,t){return n instanceof Tm?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Wf?bB(n,e):n instanceof qf?wB(n,e):function(r,i){const s=vB(r,i),c=EB(s)+EB(r.gt);return NR(s)&&NR(r.gt)?_B(c):mB(r.yt,c)}(n,e)}function HW(n,e,t){return n instanceof Wf?bB(n,e):n instanceof qf?wB(n,e):t}function vB(n,e){return n instanceof Am?NR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Tm extends GI{}class Wf extends GI{constructor(e){super(),this.elements=e}}function bB(n,e){const t=CB(e);for(const r of n.elements)t.some(i=>Jl(i,r))||t.push(r);return{arrayValue:{values:t}}}class qf extends GI{constructor(e){super(),this.elements=e}}function wB(n,e){let t=CB(e);for(const r of n.elements)t=t.filter(i=>!Jl(i,r));return{arrayValue:{values:t}}}class Am extends GI{constructor(e,t){super(),this.yt=e,this.gt=t}}function EB(n){return Ur(n.integerValue||n.doubleValue)}function CB(n){return yb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Eb{constructor(e,t){this.field=e,this.transform=t}}class $W{constructor(e,t){this.version=e,this.transformResults=t}}class Sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function WI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class qI{}function IB(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new xm(n.key,Sr.none()):new Mm(n.key,n.data,Sr.none());{const t=n.data,r=Bi.empty();let i=new qn(Br.comparator);for(let s of e.fields)if(!i.has(s)){let c=t.field(s);null===c&&s.length>1&&(s=s.popLast(),c=t.field(s)),null===c?r.delete(s):r.set(s,c),i=i.add(s)}return new ru(n.key,r,new $s(i.toArray()),Sr.none())}}function zW(n,e,t){n instanceof Mm?function(r,i,s){const c=r.value.clone(),h=TB(r.fieldTransforms,i,s.transformResults);c.setAll(h),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ru?function(r,i,s){if(!WI(r.precondition,i))return void i.convertToUnknownDocument(s.version);const c=TB(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(SB(r)),h.setAll(c),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Cb(n,e,t,r){return n instanceof Mm?function(i,s,c,h){if(!WI(i.precondition,s))return c;const p=i.value.clone(),y=AB(i.fieldTransforms,h,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof ru?function(i,s,c,h){if(!WI(i.precondition,s))return c;const p=AB(i.fieldTransforms,h,s),y=s.data;return y.setAll(SB(i)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(c=t,WI(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function GW(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=vB(r.transform,i||null);null!=s&&(null===t&&(t=Bi.empty()),t.set(r.field,s))}return t||null}function DB(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&wm(t,r,(i,s)=>function jW(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Wf&&r instanceof Wf||t instanceof qf&&r instanceof qf?wm(t.elements,r.elements,Jl):t instanceof Am&&r instanceof Am?Jl(t.gt,r.gt):t instanceof Tm&&r instanceof Tm);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Mm extends qI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ru extends qI{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function SB(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function TB(n,e,t){const r=new Map;It(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],c=s.transform,h=e.data.field(s.field);r.set(s.field,HW(c,h,t[i]))}return r}function AB(n,e,t){const r=new Map;for(const i of n){const s=i.transform,c=t.data.field(i.field);r.set(i.field,UW(s,c,e))}return r}class xm extends qI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zR extends qI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class WW{constructor(e){this.count=e}}var ni,Dn;function MB(n){switch(n){default:return ht();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function xB(n){if(void 0===n)return qr("GRPC error has no .code"),ve.UNKNOWN;switch(n){case ni.OK:return ve.OK;case ni.CANCELLED:return ve.CANCELLED;case ni.UNKNOWN:return ve.UNKNOWN;case ni.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case ni.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case ni.INTERNAL:return ve.INTERNAL;case ni.UNAVAILABLE:return ve.UNAVAILABLE;case ni.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case ni.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case ni.NOT_FOUND:return ve.NOT_FOUND;case ni.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case ni.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case ni.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case ni.ABORTED:return ve.ABORTED;case ni.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case ni.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case ni.DATA_LOSS:return ve.DATA_LOSS;default:return ht()}}(Dn=ni||(ni={}))[Dn.OK=0]="OK",Dn[Dn.CANCELLED=1]="CANCELLED",Dn[Dn.UNKNOWN=2]="UNKNOWN",Dn[Dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dn[Dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dn[Dn.NOT_FOUND=5]="NOT_FOUND",Dn[Dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dn[Dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dn[Dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dn[Dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dn[Dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dn[Dn.ABORTED=10]="ABORTED",Dn[Dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dn[Dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dn[Dn.INTERNAL=13]="INTERNAL",Dn[Dn.UNAVAILABLE=14]="UNAVAILABLE",Dn[Dn.DATA_LOSS=15]="DATA_LOSS";class Md{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Uf(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return $V(this.inner)}size(){return this.innerSize}}const qW=new Hr(Qe.comparator);function zs(){return qW}const RB=new Hr(Qe.comparator);function Ib(...n){let e=RB;for(const t of n)e=e.insert(t.key,t);return e}function kB(n){let e=RB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ec(){return Db()}function OB(){return Db()}function Db(){return new Md(n=>n.toString(),(n,e)=>n.isEqual(e))}const KW=new Hr(Qe.comparator),YW=new qn(Qe.comparator);function nn(...n){let e=YW;for(const t of n)e=e.add(t);return e}const ZW=new qn(Yt);function KI(){return ZW}class Sb{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Tb.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sb(At.min(),i,KI(),zs(),nn())}}class Tb{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Tb(r,t,nn(),nn(),nn())}}class YI{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class NB{constructor(e,t){this.targetId=e,this.Et=t}}class PB{constructor(e,t,r=pi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class FB{constructor(){this.At=0,this.Rt=VB(),this.bt=pi.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=nn(),t=nn(),r=nn();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new Tb(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=VB()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class QW{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=zs(),this.qt=LB(),this.Ut=new qn(Yt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const s=i.target;if(HI(s))if(0===r){const c=new Qe(s.path);this.Qt(t,c,yr.newNoDocument(c,At.min()))}else It(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((s,c)=>{const h=this.Yt(c);if(h){if(s.current&&HI(h.target)){const p=new Qe(h.target.path);null!==this.Lt.get(p)||this.te(c,p)||this.Qt(c,p,yr.newNoDocument(p,e))}s.St&&(t.set(c,s.Ct()),s.xt())}});let r=nn();this.qt.forEach((s,c)=>{let h=!0;c.forEachWhile(p=>{const y=this.Yt(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.Lt.forEach((s,c)=>c.setReadTime(e));const i=new Sb(e,t,this.Ut,this.Lt,r);return this.Lt=zs(),this.qt=LB(),this.Ut=new qn(Yt),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new FB,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new qn(Yt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new FB),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function LB(){return new Hr(Qe.comparator)}function VB(){return new Hr(Qe.comparator)}const XW={asc:"ASCENDING",desc:"DESCENDING"},JW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e3={and:"AND",or:"OR"};class t3{constructor(e,t){this.databaseId=e,this.wt=t}}function Rm(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BB(n,e){return n.wt?e.toBase64():e.toUint8Array()}function n3(n,e){return Rm(n,e.toTimestamp())}function Kr(n){return It(!!n),At.fromTimestamp(function(e){const t=Dd(e);return new Dr(t.seconds,t.nanos)}(n))}function GR(n,e){return(t=n,new In(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function UB(n){const e=In.fromString(n);return It(YB(e)),e}function Ab(n,e){return GR(n.databaseId,e.path)}function tc(n,e){const t=UB(e);if(t.get(1)!==n.databaseId.projectId)throw new Be(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Be(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(jB(t))}function WR(n,e){return GR(n.databaseId,e)}function HB(n){const e=UB(n);return 4===e.length?In.emptyPath():jB(e)}function Mb(n){return new In(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jB(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function $B(n,e,t){return{name:Ab(n,e),fields:t.value.mapValue.fields}}function zB(n,e,t){const r=tc(n,e.name),i=Kr(e.updateTime),s=e.createTime?Kr(e.createTime):At.min(),c=new Bi({mapValue:{fields:e.fields}}),h=yr.newFoundDocument(r,i,s,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function xb(n,e){let t;if(e instanceof Mm)t={update:$B(n,e.key,e.value)};else if(e instanceof xm)t={delete:Ab(n,e.key)};else if(e instanceof ru)t={update:$B(n,e.key,e.data),updateMask:d3(e.fieldMask)};else{if(!(e instanceof zR))return ht();t={verify:Ab(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const c=s.transform;if(c instanceof Tm)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Wf)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Am)return{fieldPath:s.field.canonicalString(),increment:c.gt};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:n3(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function qR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Sr.updateTime(Kr(i.updateTime)):void 0!==i.exists?Sr.exists(i.exists):Sr.none():Sr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,c){let h=null;"setToServerValue"in c?(It("REQUEST_TIME"===c.setToServerValue),h=new Tm):"appendMissingElements"in c?h=new Wf(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new qf(c.removeAllFromArray.values||[]):"increment"in c?h=new Am(s,c.increment):ht();const p=Br.fromServerFormat(c.fieldPath);return new Eb(p,h)}(n,i)):[];var i;if(e.update){const i=tc(n,e.update.name),s=new Bi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new $s((e.updateMask.fieldPaths||[]).map(y=>Br.fromServerFormat(y)));return new ru(i,s,c,t,r)}return new Mm(i,s,t,r)}if(e.delete){const i=tc(n,e.delete);return new xm(i,t)}if(e.verify){const i=tc(n,e.verify);return new zR(i,t)}return ht()}function GB(n,e){return{documents:[WR(n,e.path)]}}function KR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=WR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=WR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0!==p.length)return KB($n.create(p,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:km((C=y).field),direction:l3(C.dir)};var C})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=(y=e.limit,n.wt||pb(y)?y:{value:y});var y,h,p;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function WB(n){let e=HB(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){It(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let s=[];t.where&&(s=function(C){const S=qB(C);return S instanceof $n&&FR(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new Im(Om((S=C).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(C){let S;return S="object"==typeof C?C.value:C,pb(S)?null:S}(t.limit));let p=null;var C;t.startAt&&(p=new Ad((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new Ad(C.values||[],!C.before)}(t.endAt)),dB(e,i,c,s,h,"F",p,y)}function qB(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Om(e.unaryFilter.field);return gn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Om(e.unaryFilter.field);return gn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Om(e.unaryFilter.field);return gn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Om(e.unaryFilter.field);return gn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}(n):void 0!==n.fieldFilter?gn.create(Om((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return $n.create(e.compositeFilter.filters.map(t=>qB(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ht()}}(e.compositeFilter.op))}(n):ht();var e}function l3(n){return XW[n]}function c3(n){return JW[n]}function u3(n){return e3[n]}function km(n){return{fieldPath:n.canonicalString()}}function Om(n){return Br.fromServerFormat(n.fieldPath)}function KB(n){return n instanceof gn?function(e){if("=="===e.op){if(KV(e.value))return{unaryFilter:{field:km(e.field),op:"IS_NAN"}};if(qV(e.value))return{unaryFilter:{field:km(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(KV(e.value))return{unaryFilter:{field:km(e.field),op:"IS_NOT_NAN"}};if(qV(e.value))return{unaryFilter:{field:km(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:km(e.field),op:c3(e.op),value:e.value}}}(n):n instanceof $n?function(e){const t=e.getFilters().map(r=>KB(r));return 1===t.length?t[0]:{compositeFilter:{op:u3(e.op),filters:t}}}(n):ht()}function d3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function YB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Es(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ZB(e)),e=h3(n.get(t),e);return ZB(e)}function h3(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function ZB(n){return n+"\x01\x01"}function nc(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),In.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const c=n.indexOf("\x01",s);switch((c<0||c>t)&&ht(),n.charAt(c+1)){case"\x01":const h=n.substring(s,c);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,c),i+="\0";break;case"\x11":i+=n.substring(s,c+1);break;default:ht()}s=c+2}return new In(r)}const QB=["userId","batchId"];function ZI(n,e){return[n,Es(e)]}function XB(n,e,t){return[n,Es(e),t]}const f3={},p3=["prefixPath","collectionGroup","readTime","documentId"],g3=["prefixPath","collectionGroup","documentId"],m3=["collectionGroup","readTime","prefixPath","documentId"],_3=["canonicalId","targetId"],y3=["targetId","path"],v3=["path","targetId"],b3=["collectionId","parent"],w3=["indexId","uid"],E3=["uid","sequenceNumber"],C3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],I3=["indexId","uid","orderedDocumentKey"],D3=["userId","collectionPath","documentId"],S3=["userId","collectionPath","largestBatchId"],T3=["userId","collectionGroup","largestBatchId"],JB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],A3=[...JB,"documentOverlays"],eU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tU=eU,M3=[...tU,"indexConfiguration","indexState","indexEntries"];class YR extends UV{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Ai(n,e){const t=tt(n);return ml.M(t.se,e)}class ZR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zW(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cb(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cb(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=OB();return this.mutations.forEach(i=>{const s=e.get(i.key),c=s.overlayedDocument;let h=this.applyToLocalView(c,s.mutatedFields);h=t.has(i.key)?null:h;const p=IB(c,h);null!==p&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&wm(this.mutations,e.mutations,(t,r)=>DB(t,r))&&wm(this.baseMutations,e.baseMutations,(t,r)=>DB(t,r))}}class QR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){It(e.mutations.length===r.length);let i=KW;const s=e.mutations;for(let c=0;c<s.length;c++)i=i.insert(s[c].key,r[c].version);return new QR(e,t,r,i)}}class XR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xd{constructor(e,t,r,i,s=At.min(),c=At.min(),h=pi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new xd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class nU{constructor(e){this.ie=e}}function rU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:QI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ab(i=n.ie,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Rm(i,s.version.toTimestamp()),createTime:Rm(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Kf(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:Kf(e.version)}}var i,s;return r}function QI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Kf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yf(n){const e=new Dr(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Zf(n,e){const t=(e.baseMutations||[]).map(s=>qR(n.ie,s));for(let s=0;s<e.mutations.length-1;++s){const c=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(c.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>qR(n.ie,s)),i=Dr.fromMillis(e.localWriteTimeMs);return new ZR(e.batchId,i,t,r)}function Rb(n){const e=Yf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Yf(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(It(1===(i=n.query).documents.length),r=ws(Sm(HB(i.documents[0])))):r=ws(WB(n.query)),new xd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,pi.fromBase64String(n.resumeToken))}function iU(n,e){const t=Kf(e.snapshotVersion),r=Kf(e.lastLimboFreeSnapshotVersion);let i;i=HI(e.target)?GB(n.ie,e.target):KR(n.ie,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function JR(n){const e=WB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?zI(e,e.limit,"L"):e}function ek(n,e){return new XR(e.largestBatchId,qR(n.ie,e.overlayMutation))}function sU(n,e){const t=e.path.lastSegment();return[n,Es(e.path.popLast()),t]}function oU(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Kf(r.readTime),documentKey:Es(r.documentKey.path),largestBatchId:r.largestBatchId}}class R3{getBundleMetadata(e,t){return aU(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Yf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return aU(e).put({bundleId:(r=t).id,createTime:Kf(Kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return lU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:JR(i.bundledQuery),readTime:Yf(i.readTime)};var i})}saveNamedQuery(e,t){return lU(e).put({name:(r=t).name,readTime:Kf(Kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function aU(n){return Ai(n,"bundles")}function lU(n){return Ai(n,"namedQueries")}class XI{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new XI(e,t.uid||"")}getOverlay(e,t){return kb(e).get(sU(this.userId,t)).next(r=>r?ek(this.yt,r):null)}getOverlays(e,t){const r=ec();return ge.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,c)=>{const h=new XR(t,c);i.push(this.oe(e,h))}),ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Es(c.getCollectionPath())));const s=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);s.push(kb(e).Y("collectionPathOverlayIndex",h))}),ge.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ec(),s=Es(t),c=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return kb(e).W("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const y=ek(this.yt,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ec();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return kb(e).Z({index:"collectionGroupOverlayIndex",range:h},(p,y,C)=>{const S=ek(this.yt,y);s.size()<i||S.largestBatchId===c?(s.set(S.getKey(),S),c=S.largestBatchId):C.done()}).next(()=>s)}oe(e,t){return kb(e).put(function(r,i,s){const[c,h,p]=sU(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:xb(r.ie,s.mutation)}}(this.yt,this.userId,t))}}function kb(n){return Ai(n,"documentOverlays")}class Qf{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Ur(e.integerValue));else if("doubleValue"in e){const r=Ur(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),gb(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Hf(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?YV(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):ht()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),Qe.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function k3(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function cU(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=k3(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Qf.Ie=new Qf;class O3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=cU(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=cU(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class N3{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class P3{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Ob{constructor(){this.$e=new O3,this.Be=new N3(this.$e),this.Le=new P3(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Xf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Xf(this.indexId,this.documentKey,this.arrayValue,r)}}function Rd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=uU(n.arrayValue,e.arrayValue),0!==t?t:(t=uU(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function uU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class F3{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){It(e.collectionGroup===this.collectionId);const t=AR(e);if(void 0!==t&&!this.We(t))return!1;const r=Vf(e);let i=0,s=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const c=r[i];if(!this.ze(this.Qe,c)||!this.He(this.Ke[s++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(s>=this.Ke.length||!this.He(this.Ke[s++],c))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function dU(n){var e,t;if(It(n instanceof gn||n instanceof $n),n instanceof gn){if(n instanceof oB){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>gn.create(n.field,"==",s)))||[];return $n.create(i,"or")}return n}const r=n.filters.map(i=>dU(i));return $n.create(r,n.op)}function L3(n){if(0===n.getFilters().length)return[];const e=rk(dU(n));return It(hU(e)),tk(e)||nk(e)?[e]:e.getFilters()}function tk(n){return n instanceof gn}function nk(n){return n instanceof $n&&FR(n)}function hU(n){return tk(n)||nk(n)||function(e){if(e instanceof $n&&PR(e)){for(const t of e.getFilters())if(!tk(t)&&!nk(t))return!1;return!0}return!1}(n)}function rk(n){if(It(n instanceof gn||n instanceof $n),n instanceof gn)return n;if(1===n.filters.length)return rk(n.filters[0]);const e=n.filters.map(r=>rk(r));let t=$n.create(e,n.op);return t=JI(t),hU(t)?t:(It(t instanceof $n),It(Cm(t)),It(t.filters.length>1),t.filters.reduce((r,i)=>ik(r,i)))}function ik(n,e){let t;return It(n instanceof gn||n instanceof $n),It(e instanceof gn||e instanceof $n),t=n instanceof gn?e instanceof gn?$n.create([n,e],"and"):fU(n,e):e instanceof gn?fU(e,n):function(r,i){if(It(r.filters.length>0&&i.filters.length>0),Cm(r)&&Cm(i))return rB(r,i.getFilters());const s=PR(r)?r:i,c=PR(r)?i:r,h=s.filters.map(p=>ik(p,c));return $n.create(h,"or")}(n,e),JI(t)}function fU(n,e){if(Cm(e))return rB(e,n.getFilters());{const t=e.filters.map(r=>ik(n,r));return $n.create(t,"or")}}function JI(n){if(It(n instanceof gn||n instanceof $n),n instanceof gn)return n;const e=n.getFilters();if(1===e.length)return JI(e[0]);if(tB(n))return n;const t=e.map(i=>JI(i)),r=[];return t.forEach(i=>{i instanceof gn?r.push(i):i instanceof $n&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:$n.create(r,n.op)}class V3{constructor(){this.Je=new sk}addToCollectionParentIndex(e,t){return this.Je.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(Io.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(Io.min())}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class sk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new qn(In.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qn(In.comparator)).toArray()}}const eD=new Uint8Array(0);class B3{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new sk,this.Xe=new Md(r=>zf(r),(r,i)=>bb(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const s={collectionId:r,parent:Es(i)};return pU(e).put(s)}return ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[FV(t),""],!1,!0);return pU(e).W(i).next(s=>{for(const c of s){if(c.collectionId!==t)break;r.push(nc(c.parent))}return r})}addFieldIndex(e,t){const r=tD(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const s=r.add(i);if(t.indexState){const c=Pb(e);return s.next(h=>{c.put(oU(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=tD(e),i=Pb(e),s=Nb(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Nb(e);let i=!0;const s=new Map;return ge.forEach(this.Ze(t),c=>this.tn(e,c).next(h=>{i&&(i=!!h),s.set(c,h)})).next(()=>{if(i){let c=nn();const h=[];return ge.forEach(s,(p,y)=>{var C;ze("IndexedDbIndexManager",`Using index ${C=p,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(pt=>`${pt.fieldPath}:${pt.kind}`).join(",")}`} to execute ${zf(t)}`);const S=function(pt,gt){const Nt=AR(gt);if(void 0===Nt)return null;for(const Bt of jI(pt,Nt.fieldPath))switch(Bt.op){case"array-contains-any":return Bt.value.arrayValue.values||[];case"array-contains":return[Bt.value]}return null}(y,p),R=function(pt,gt){const Nt=new Map;for(const Bt of Vf(gt))for(const vn of jI(pt,Bt.fieldPath))switch(vn.op){case"==":case"in":Nt.set(Bt.fieldPath.canonicalString(),vn.value);break;case"not-in":case"!=":return Nt.set(Bt.fieldPath.canonicalString(),vn.value),Array.from(Nt.values())}return null}(y,p),V=function(pt,gt){const Nt=[];let Bt=!0;for(const vn of Vf(gt)){const Ts=0===vn.kind?cB(pt,vn.fieldPath,pt.startAt):uB(pt,vn.fieldPath,pt.startAt);Nt.push(Ts.value),Bt&&(Bt=Ts.inclusive)}return new Ad(Nt,Bt)}(y,p),H=function(pt,gt){const Nt=[];let Bt=!0;for(const vn of Vf(gt)){const Ts=0===vn.kind?uB(pt,vn.fieldPath,pt.endAt):cB(pt,vn.fieldPath,pt.endAt);Nt.push(Ts.value),Bt&&(Bt=Ts.inclusive)}return new Ad(Nt,Bt)}(y,p),Q=this.en(p,y,V),ye=this.en(p,y,H),Ye=this.nn(p,y,R),ct=this.sn(p.indexId,S,Q,V.inclusive,ye,H.inclusive,Ye);return ge.forEach(ct,pt=>r.J(pt,t.limit).next(gt=>{gt.forEach(Nt=>{const Bt=Qe.fromSegments(Nt.documentKey);c.has(Bt)||(c=c.add(Bt),h.push(Bt))})}))}).next(()=>h)}return ge.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:L3($n.create(e.filters,"and")).map(r=>VR(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,s,c,h){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),y=p/(null!=t?t.length:1),C=[];for(let S=0;S<p;++S){const R=t?this.rn(t[S/y]):eD,V=this.on(e,R,r[S%y],i),H=this.un(e,R,s[S%y],c),Q=h.map(ye=>this.on(e,R,ye,!0));C.push(...this.createRange(V,H,Q))}return C}on(e,t,r,i){const s=new Xf(e,Qe.empty(),t,r);return i?s:s.Ue()}un(e,t,r,i){const s=new Xf(e,Qe.empty(),t,r);return i?s.Ue():s}tn(e,t){const r=new F3(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let c=null;for(const h of s)r.je(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.Ze(t);return ge.forEach(i,s=>this.tn(e,s).next(c=>{c?0!==r&&c.fields.length<function(h){let p=new qn(Br.comparator),y=!1;for(const C of h.filters)for(const S of C.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?y=!0:p=p.add(S.field));for(const C of h.orderBy)C.field.isKeyField()||(p=p.add(C.field));return p.size+(y?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new Ob;for(const i of Vf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const c=r.qe(i.kind);Qf.Ie.ue(s,c)}return r.Fe()}rn(e){const t=new Ob;return Qf.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new Ob;return Qf.Ie.ue($f(this.databaseId,t),r.qe(function(i){const s=Vf(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new Ob);let s=0;for(const c of Vf(e)){const h=r[s++];for(const p of i)if(this.hn(t,c.fieldPath)&&yb(h))i=this.ln(i,c,h);else{const y=p.qe(c.kind);Qf.Ie.ue(h,y)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],s=[];for(const c of r.arrayValue.values||[])for(const h of i){const p=new Ob;p.seed(h.Fe()),Qf.Ie.ue(c,p.qe(t.kind)),s.push(p)}return s}hn(e,t){return!!e.filters.find(r=>r instanceof gn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=tD(e),i=Pb(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const c=[];return ge.forEach(s,h=>i.get([h.indexId,this.uid]).next(p=>{c.push(function(y,C){const S=C?new hb(C.sequenceNumber,new Io(Yf(C.readTime),new Qe(nc(C.documentKey)),C.largestBatchId)):hb.empty(),R=y.fields.map(([V,H])=>new FI(Br.fromServerFormat(V),H));return new PI(y.indexId,y.collectionGroup,R,S)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Yt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=tD(e),s=Pb(e);return this.dn(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ge.forEach(h,p=>s.put(oU(p.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(i,s)=>{const c=r.get(i.collectionGroup);return(c?ge.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ge.forEach(h,p=>this._n(e,i,p).next(y=>{const C=this.wn(s,p);return y.isEqual(C)?ge.resolve():this.mn(e,s,p,y,C)}))))})}gn(e,t,r,i){return Nb(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return Nb(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=Nb(e);let s=new qn(Rd);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(c,h)=>{s=s.add(new Xf(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}wn(e,t){let r=new qn(Rd);const i=this.cn(t,e);if(null==i)return r;const s=AR(t);if(null!=s){const c=e.data.field(s.fieldPath);if(yb(c))for(const h of c.arrayValue.values||[])r=r.add(new Xf(t.indexId,e.key,this.rn(h),i))}else r=r.add(new Xf(t.indexId,e.key,eD,i));return r}mn(e,t,r,i,s){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,p,y,C,S){const R=h.getIterator(),V=p.getIterator();let H=Dm(R),Q=Dm(V);for(;H||Q;){let ye=!1,Ye=!1;if(H&&Q){const ct=y(H,Q);ct<0?Ye=!0:ct>0&&(ye=!0)}else null!=H?Ye=!0:ye=!0;ye?(C(Q),Q=Dm(V)):Ye?(S(H),H=Dm(R)):(H=Dm(R),Q=Dm(V))}}(i,s,Rd,h=>{c.push(this.gn(e,t,r,h))},h=>{c.push(this.yn(e,t,r,h))}),ge.waitFor(c)}dn(e){let t=1;return Pb(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>Rd(c,h)).filter((c,h,p)=>!h||0!==Rd(c,p[h-1]));const i=[];i.push(e);for(const c of r){const h=Rd(c,e),p=Rd(c,t);if(0===h)i[0]=e.Ue();else if(h>0&&p<0)i.push(c),i.push(c.Ue());else if(p>0)break}i.push(t);const s=[];for(let c=0;c<i.length;c+=2){if(this.pn(i[c],i[c+1]))return[];s.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,eD,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,eD,[]]))}return s}pn(e,t){return Rd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gU)}getMinOffset(e,t){return ge.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||ht())).next(gU)}}function pU(n){return Ai(n,"collectionParents")}function Nb(n){return Ai(n,"indexEntries")}function tD(n){return Ai(n,"indexConfiguration")}function Pb(n){return Ai(n,"indexState")}function gU(n){It(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;MR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Io(e.readTime,e.documentKey,t)}const mU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gs(e,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _U(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],c=IDBKeyRange.only(t.batchId);let h=0;const p=r.Z({range:c},(C,S,R)=>(h++,R.delete()));s.push(p.next(()=>{It(1===h)}));const y=[];for(const C of t.mutations){const S=XB(e,C.key.path,t.batchId);s.push(i.delete(S)),y.push(C.key)}return ge.waitFor(s).next(()=>y)}function nD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}Gs.DEFAULT_COLLECTION_PERCENTILE=10,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gs.DEFAULT=new Gs(41943040,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gs.DISABLED=new Gs(-1,0,0);class rD{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){It(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new rD(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kd(e).Z({index:"userMutationsIndex",range:r},(i,s,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Nm(e),c=kd(e);return c.add({}).next(h=>{It("number"==typeof h);const p=new ZR(h,t,r,i),y=function(R,V,H){const Q=H.baseMutations.map(Ye=>xb(R.ie,Ye)),ye=H.mutations.map(Ye=>xb(R.ie,Ye));return{userId:V,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:Q,mutations:ye}}(this.yt,this.userId,p),C=[];let S=new qn((R,V)=>Yt(R.canonicalString(),V.canonicalString()));for(const R of i){const V=XB(this.userId,R.key.path,h);S=S.add(R.key.path.popLast()),C.push(c.put(y)),C.push(s.put(V,f3))}return S.forEach(R=>{C.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.In[h]=p.keys()}),ge.waitFor(C).next(()=>p)})}lookupMutationBatch(e,t){return kd(e).get(t).next(r=>r?(It(r.userId===this.userId),Zf(this.yt,r)):null)}Tn(e,t){return this.In[t]?ge.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return kd(e).Z({index:"userMutationsIndex",range:i},(c,h,p)=>{h.userId===this.userId&&(It(h.batchId>=r),s=Zf(this.yt,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return kd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,c)=>{r=s.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kd(e).W("userMutationsIndex",t).next(r=>r.map(i=>Zf(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ZI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Nm(e).Z({range:i},(c,h,p)=>{const[y,C,S]=c,R=nc(C);if(y===this.userId&&t.path.isEqual(R))return kd(e).get(S).next(V=>{if(!V)throw ht();It(V.userId===this.userId),s.push(Zf(this.yt,V))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(Yt);const i=[];return t.forEach(s=>{const c=ZI(this.userId,s.path),h=IDBKeyRange.lowerBound(c),p=Nm(e).Z({range:h},(y,C,S)=>{const[R,V,H]=y,Q=nc(V);R===this.userId&&s.path.isEqual(Q)?r=r.add(H):S.done()});i.push(p)}),ge.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=ZI(this.userId,r),c=IDBKeyRange.lowerBound(s);let h=new qn(Yt);return Nm(e).Z({range:c},(p,y,C)=>{const[S,R,V]=p,H=nc(R);S===this.userId&&r.isPrefixOf(H)?H.length===i&&(h=h.add(V)):C.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(kd(e).get(s).next(c=>{if(null===c)throw ht();It(c.userId===this.userId),r.push(Zf(this.yt,c))}))}),ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return _U(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Nm(e).Z({range:r},(s,c,h)=>{if(s[0]===this.userId){const p=nc(s[1]);i.push(p)}else h.done()}).next(()=>{It(0===i.length)})})}containsKey(e,t){return yU(e,this.userId,t)}Rn(e){return vU(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yU(n,e,t){const r=ZI(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let c=!1;return Nm(n).Z({range:s,X:!0},(h,p,y)=>{const[C,S,R]=h;C===e&&S===i&&(c=!0),y.done()}).next(()=>c)}function kd(n){return Ai(n,"mutations")}function Nm(n){return Ai(n,"documentMutations")}function vU(n){return Ai(n,"mutationQueues")}class Jf{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Jf(0)}static vn(){return new Jf(-1)}}class U3{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Jf(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>At.fromTimestamp(new Dr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Pm(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Pm(e).Z((c,h)=>{const p=Rb(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>ge.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Pm(e).Z((r,i)=>{const s=Rb(i);t(s)})}Vn(e){return bU(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}Sn(e,t){return bU(e).put("targetGlobalKey",t)}Dn(e,t){return Pm(e).put(iU(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=zf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Pm(e).Z({range:i,index:"queryTargetsIndex"},(c,h,p)=>{const y=Rb(h);bb(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Od(e);return t.forEach(c=>{const h=Es(c.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=Od(e);return ge.forEach(t,s=>{const c=Es(s.path);return ge.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Od(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Od(e);let s=nn();return i.Z({range:r,X:!0},(c,h,p)=>{const y=nc(c[1]),C=new Qe(y);s=s.add(C)}).next(()=>s)}containsKey(e,t){const r=Es(t.path),i=IDBKeyRange.bound([r],[FV(r)],!1,!0);let s=0;return Od(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,h],p,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}ne(e,t){return Pm(e).get(t).next(r=>r?Rb(r):null)}}function Pm(n){return Ai(n,"targets")}function bU(n){return Ai(n,"targetGlobal")}function Od(n){return Ai(n,"targetDocuments")}function wU([n,e],[t,r]){const i=Yt(n,t);return 0===i?Yt(e,r):i}class H3{constructor(e){this.xn=e,this.buffer=new qn(wU),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();wU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class j3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,De.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Cd(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ed(r)}yield t.Fn(3e5)}))}}class $3{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(Do.at);const r=new H3(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(mU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mU):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,s,c,h,p,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(s=S,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),SR()<=pl.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${S} documents in `+(y-p)+`ms\nTotal Duration: ${y-C}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:S})))}}class z3{constructor(e,t){this.db=e,this.garbageCollector=new $3(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return iD(e,r)}removeReference(e,t,r){return iD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return iD(e,t)}Gn(e,t){return function(r,i){let s=!1;return vU(r).tt(c=>yU(r,c,i).next(h=>(h&&(s=!0),ge.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(c,h)=>{if(h<=t){const p=this.Gn(e,c).next(y=>{if(!y)return s++,r.getEntry(e,c).next(()=>(r.removeEntry(c,At.min()),Od(e).delete([0,Es(c.path)])))});i.push(p)}}).next(()=>ge.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return iD(e,t)}Kn(e,t){const r=Od(e);let i,s=Do.at;return r.Z({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:y})=>{0===c?(s!==Do.at&&t(new Qe(nc(i)),s),s=y,i=p):s=Do.at}).next(()=>{s!==Do.at&&t(new Qe(nc(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iD(n,e){return Od(n).put((r=n.currentSequenceNumber,{targetId:0,path:Es(e.path),sequenceNumber:r}));var r}class EU{constructor(){this.changes=new Md(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class G3{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ep(e).put(r)}removeEntry(e,t,r){return ep(e).delete(function(i,s){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],QI(s),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=yr.newInvalidDocument(t);return ep(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Fb(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:yr.newInvalidDocument(t)};return ep(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Fb(t))},(i,s)=>{r={document:this.jn(t,s),size:nD(s)}}).next(()=>r)}getEntries(e,t){let r=zs();return this.zn(e,t,(i,s)=>{const c=this.jn(i,s);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=zs(),i=new Hr(Qe.comparator);return this.zn(e,t,(s,c)=>{const h=this.jn(s,c);r=r.insert(s,h),i=i.insert(s,nD(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ge.resolve();let i=new qn(SU);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(Fb(i.first()),Fb(i.last())),c=i.getIterator();let h=c.getNext();return ep(e).Z({index:"documentKeyIndex",range:s},(p,y,C)=>{const S=Qe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&SU(h,S)<0;)r(h,null),h=c.getNext();h&&h.isEqual(S)&&(r(h,y),h=c.hasNext()?c.getNext():null),h?C.j(Fb(h)):C.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),QI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ep(e).W(IDBKeyRange.bound(i,s,!0)).next(c=>{let h=zs();for(const p of c){const y=this.jn(Qe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=zs();const c=DU(t,r),h=DU(t,Io.max());return ep(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,y,C)=>{const S=this.jn(Qe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(S.key,S),s.size===i&&C.done()}).next(()=>s)}newChangeBuffer(e){return new W3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return IU(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Qn(e,t){return IU(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function x3(n,e){let t;if(e.document)t=zB(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=Yf(e.noDocument.readTime);t=yr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=Qe.fromSegments(e.unknownDocument.path),i=Yf(e.unknownDocument.version);t=yr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Dr(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return yr.newInvalidDocument(e)}}function CU(n){return new G3(n)}class W3 extends EU{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Md(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new qn((s,c)=>Yt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,h.readTime)),c.isValidDocument()){const p=rU(this.Yn.yt,c);i=i.add(s.path.popLast()),r+=nD(p)-h.size,t.push(this.Yn.addEntry(e,s,p))}else if(r-=h.size,this.trackRemovals){const p=rU(this.Yn.yt,c.convertToNoDocument(At.min()));t.push(this.Yn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,c)=>{this.Xn.set(s,{size:c,readTime:r.get(s).readTime})}),r))}}function IU(n){return Ai(n,"remoteDocumentGlobal")}function ep(n){return Ai(n,"remoteDocumentsV14")}function Fb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DU(n,e){const t=e.documentKey.path.toArray();return[n,QI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function SU(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Yt(t[s],r[s]),i)return i;return i=Yt(t.length,r.length),i||(i=Yt(t[t.length-2],r[r.length-2]),i||Yt(t[t.length-1],r[r.length-1]))}class q3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class TU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Cb(r.mutation,i,$s.empty(),Dr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,nn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=nn()){const i=ec();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let c=Ib();return s.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ec();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,nn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let s=zs();const c=Db(),h=Db();return t.forEach((p,y)=>{const C=r.get(y.key);i.has(y.key)&&(void 0===C||C.mutation instanceof ru)?s=s.insert(y.key,y):void 0!==C?(c.set(y.key,C.mutation.getFieldMask()),Cb(C.mutation,y,C.mutation.getFieldMask(),Dr.now())):c.set(y.key,$s.empty())}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,C)=>c.set(y,C)),t.forEach((y,C)=>{var S;return h.set(y,new q3(C,null!==(S=c.get(y))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Db();let i=new Hr((c,h)=>c-h),s=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let C=r.get(p)||$s.empty();C=h.applyToLocalView(y,C),r.set(p,C);const S=(i.get(h.batchId)||nn()).add(p);i=i.insert(h.batchId,S)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,C=p.value,S=OB();C.forEach(R=>{if(!s.has(R)){const V=IB(t.get(R),r.get(R));null!==V&&S.set(R,V),s=s.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,S))}return ge.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):UR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const c=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ge.resolve(ec());let h=-1,p=s;return c.next(y=>ge.forEach(y,(C,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),s.get(C)?ge.resolve():this.remoteDocumentCache.getEntry(e,C).next(R=>{p=p.insert(C,R)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,nn())).next(C=>({batchId:h,changes:kB(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let i=Ib();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Ib();return this.indexManager.getCollectionParents(e,i).next(c=>ge.forEach(c,h=>{const p=(y=t,C=h.child(i),new nu(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(y=>{y.forEach((C,S)=>{s=s.insert(C,S)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((h,p)=>{const y=p.getKey();null===i.get(y)&&(i=i.insert(y,yr.newInvalidDocument(y)))});let c=Ib();return i.forEach((h,p)=>{const y=s.get(h);void 0!==y&&Cb(y.mutation,p,$s.empty(),Dr.now()),$R(t,p)&&(c=c.insert(h,p))}),c})}}class K3{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ge.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Kr(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:JR(r.bundledQuery),readTime:Kr(r.readTime)}),ge.resolve();var r}}class Y3{constructor(){this.overlays=new Hr(Qe.comparator),this.es=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ec();return ge.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.oe(e,t,s)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=ec(),s=t.length+1,c=new Qe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Hr((y,C)=>y-C);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=s.get(y.largestBatchId);null===C&&(C=ec(),s=s.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const h=ec(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,C)=>h.set(y,C)),!(h.size()>=i)););return ge.resolve(h)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new XR(t,r));let s=this.es.get(t);void 0===s&&(s=nn(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class ok{constructor(){this.ns=new qn(Mi.ss),this.rs=new qn(Mi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Mi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Mi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Qe(new In([])),r=new Mi(t,e),i=new Mi(t,e+1),s=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),s.push(c.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Qe(new In([])),r=new Mi(t,e),i=new Mi(t,e+1);let s=nn();return this.rs.forEachInRange([r,i],c=>{s=s.add(c.key)}),s}containsKey(e){const t=new Mi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Mi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Qe.comparator(e.key,t.key)||Yt(e._s,t._s)}static os(e,t){return Yt(e._s,t._s)||Qe.comparator(e.key,t.key)}}class Z3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new qn(Mi.ss)}checkEmpty(e){return ge.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const c=new ZR(s,t,r,i);this.mutationQueue.push(c);for(const h of i)this.gs=this.gs.add(new Mi(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return ge.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Mi(t,0),i=new Mi(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],c=>{const h=this.ys(c._s);s.push(h)}),ge.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(Yt);return t.forEach(i=>{const s=new Mi(i,0),c=new Mi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,c],h=>{r=r.add(h._s)})}),ge.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Qe.isDocumentKey(s)||(s=s.child(""));const c=new Mi(new Qe(s),0);let h=new qn(Yt);return this.gs.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(p._s)),!0)},c),ge.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){It(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ge.forEach(t.mutations,i=>{const s=new Mi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Mi(t,0),i=this.gs.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ge.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Q3{constructor(e){this.Es=e,this.docs=new Hr(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():yr.newInvalidDocument(t))}getEntries(e,t){let r=zs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yr.newInvalidDocument(i))}),ge.resolve(r)}getAllFromCollection(e,t,r){let i=zs();const s=new Qe(t.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||MR(VV(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return ge.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ht()}As(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new X3(this)}getSize(e){return ge.resolve(this.size)}}class X3 extends EU{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class J3{constructor(e){this.persistence=e,this.Rs=new Md(t=>zf(t),bb),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.bs=0,this.Ps=new ok,this.targetCount=0,this.vs=Jf.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ge.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Jf(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Dn(t),ge.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(c),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ge.waitFor(s).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(c=>{s.push(i.markPotentiallyOrphaned(e,c))}),ge.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.Ps.containsKey(t))}}class AU{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Do(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new J3(this),this.indexManager=new V3,this.remoteDocumentCache=new Q3(r=>this.referenceDelegate.xs(r)),this.yt=new nU(t),this.Ns=new K3(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Y3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Z3(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const i=new eq(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return ge.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class eq extends UV{constructor(e){super(),this.currentSequenceNumber=e}}class sD{constructor(e){this.persistence=e,this.Fs=new ok,this.$s=null}static Bs(e){return new sD(e)}get Ls(){if(this.$s)return this.$s;throw ht()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Ls,r=>{const i=Qe.fromPath(r);return this.qs(e,i).next(s=>{s||t.removeEntry(i,At.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ge.or([()=>ge.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class tq{constructor(e){this.yt=e}$(e,t,r,i){const s=new LI("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QB,{unique:!0}),h.createObjectStore("documentMutations"),MU(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=ge.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),MU(e)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,p){return p.store("mutations").W().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QB,{unique:!0});const C=p.store("mutations"),S=y.map(R=>C.put(R));return ge.waitFor(S)})}(e,s))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Us(s))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(s))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,s))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(s))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:D3});p.createIndex("collectionPathOverlayIndex",S3,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",T3,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:p3});p.createIndex("documentKeyIndex",g3),p.createIndex("collectionGroupIndex",m3)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,s))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:w3}).createIndex("sequenceNumberIndex",E3,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:C3}).createIndex("documentKeyIndex",I3,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=nD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ge.forEach(i,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(h=>ge.forEach(h,p=>{It(p.userId===s.userId);const y=Zf(this.yt,p);return _U(e,s.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((c,h)=>{const p=new In(c),y=[0,Es(p)];s.push(t.get(y).next(C=>C?ge.resolve():t.put({targetId:0,path:Es(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ge.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:b3});const r=t.store("collectionParents"),i=new sk,s=c=>{if(i.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:Es(p)})}};return t.store("remoteDocuments").Z({X:!0},(c,h)=>{const p=new In(c);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,h,p],y)=>{const C=nc(h);return s(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=Rb(i),c=iU(this.yt,s);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,c)=>{const h=t.store("remoteDocumentsV14"),p=(y=c,y.document?new Qe(In.fromString(y.document.name).popFirst(5)):y.noDocument?Qe.fromSegments(y.noDocument.path):y.unknownDocument?Qe.fromSegments(y.unknownDocument.path):ht()).path.toArray();var y;const C={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(C))}).next(()=>ge.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=CU(this.yt),s=new AU(sD.Bs,this.yt.ie);return r.W().next(c=>{const h=new Map;return c.forEach(p=>{var y;let C=null!==(y=h.get(p.userId))&&void 0!==y?y:nn();Zf(this.yt,p).keys().forEach(S=>C=C.add(S)),h.set(p.userId,C)}),ge.forEach(h,(p,y)=>{const C=new Ti(y),S=XI.re(this.yt,C),R=s.getIndexManager(C),V=rD.re(C,this.yt,R,s.referenceDelegate);return new TU(i,V,S,R).recalculateAndSaveOverlaysForDocumentKeys(new YR(t,Do.at),p).next()})})}}function MU(n){n.createObjectStore("targetDocuments",{keyPath:y3}).createIndex("documentTargetsIndex",v3,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_3,{unique:!0}),n.createObjectStore("targetGlobal")}const ak="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lk{constructor(e,t,r,i,s,c,h,p,y,C,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=c,this.document=h,this.Js=y,this.Ys=C,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=R=>Promise.resolve(),!lk.C())throw new Be(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new z3(this,i),this.ii=t+"main",this.yt=new nU(p),this.ri=new ml(this.ii,this.Xs,new tq(this.yt)),this.Cs=new U3(this.referenceDelegate,this.yt),this.remoteDocumentCache=CU(this.yt),this.Ns=new R3,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&qr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(ve.FAILED_PRECONDITION,ak);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Do(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,De.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,De.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,De.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>oD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Cd(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Lb(e).get("owner").next(t=>ge.resolve(this.mi(t)))}gi(e){return oD(e).delete(this.clientId)}yi(){var e=this;return(0,De.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ai(r,"clientMetadata");return i.W().next(s=>{const c=e.Ii(s,18e5),h=s.filter(p=>-1===c.indexOf(p));return ge.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ge.resolve(!0):Lb(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Be(ve.FAILED_PRECONDITION,ak);return!1}}return!(!this.networkEnabled||!this.inForeground)||oD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,De.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new YR(t,Do.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>oD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return rD.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new B3(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return XI.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ze("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(c=this.Xs)?M3:14===c?tU:13===c?eU:12===c?A3:11===c?JB:void ht();var c;let h;return this.ri.runTransaction(e,i,s,p=>(h=new YR(p,this.Ss?this.Ss.next():Do.at),"readwrite-primary"===t?this.fi(h).next(y=>!!y||this.di(h)).next(y=>{if(!y)throw qr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Be(ve.FAILED_PRECONDITION,BV);return r(h)}).next(y=>this.wi(h).next(()=>y)):this.Vi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Vi(e){return Lb(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Be(ve.FAILED_PRECONDITION,ak)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lb(e).put("owner",t)}static C(){return ml.C()}_i(e){const t=Lb(e);return t.get("owner").next(r=>this.mi(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ge.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(qr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ne.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){qr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lb(n){return Ai(n,"owner")}function oD(n){return Ai(n,"clientMetadata")}function ck(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class uk{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=nn(),i=nn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new uk(e,t.fromCache,r,i)}}class xU{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(hB(t))return ge.resolve(null);let r=ws(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=zI(t,null,"F"),r=ws(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const c=nn(...s);return this.Ni.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.Fi(t,h);return this.$i(t,y,c,p.readTime)?this.ki(e,zI(t,null,"F")):this.Bi(e,y,t,p)}))})))}Oi(e,t,r,i){return hB(t)||i.isEqual(At.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const c=this.Fi(t,s);return this.$i(t,c,r,i)?this.Mi(e,t):(SR()<=pl.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jR(t)),this.Bi(e,c,t,LV(i,-1)))})}Fi(e,t){let r=new qn(gB(e));return t.forEach((i,s)=>{$R(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return SR()<=pl.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",jR(t)),this.Ni.getDocumentsMatchingQuery(e,t,Io.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(c=>{s=s.insert(c.key,c)}),s))}}class nq{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new Hr(Yt),this.Ui=new Md(s=>zf(s),bb),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TU(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function RU(n,e,t,r){return new nq(n,e,t,r)}function kU(n,e){return dk.apply(this,arguments)}function dk(){return dk=(0,De.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const c=[],h=[];let p=nn();for(const y of i){c.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}for(const y of s){h.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}return t.localDocuments.getDocuments(r,p).next(y=>({ji:y,removedBatchIds:c,addedBatchIds:h}))})})}),dk.apply(this,arguments)}function rq(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,h,p,y){const C=p.batch,S=C.keys();let R=ge.resolve();return S.forEach(V=>{R=R.next(()=>y.getEntry(h,V)).next(H=>{const Q=p.docVersions.get(V);It(null!==Q),H.version.compareTo(Q)<0&&(C.applyToRemoteDocument(H,p),H.isValidDocument()&&(H.setReadTime(p.commitVersion),y.addEntry(H)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(h,C))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=nn();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function OU(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function iq(n,e){const t=tt(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const h=[];e.targetChanges.forEach((C,S)=>{const R=i.get(S);if(!R)return;h.push(t.Cs.removeMatchingKeys(s,C.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(s,C.addedDocuments,S)));let V=R.withSequenceNumber(s.currentSequenceNumber);var H,Q,ye;e.targetMismatches.has(S)?V=V.withResumeToken(pi.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):C.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(C.resumeToken,r)),i=i.insert(S,V),Q=V,ye=C,(0===(H=R).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(s,V))});let p=zs(),y=nn();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,C))}),h.push(NU(s,c,e.documentUpdates).next(C=>{p=C.Wi,y=C.zi})),!r.isEqual(At.min())){const C=t.Cs.getLastRemoteSnapshotVersion(s).next(S=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(C)}return ge.waitFor(h).next(()=>c.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.qi=i,s))}function NU(n,e,t){let r=nn(),i=nn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let c=zs();return t.forEach((h,p)=>{const y=s.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(At.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):ze("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)}),{Wi:c,zi:i}})}function sq(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fm(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,ge.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new xd(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Lm(n,e,t){return hk.apply(this,arguments)}function hk(){return hk=(0,De.Z)(function*(n,e,t){const r=tt(n),i=r.qi.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Cd(c))throw c;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),hk.apply(this,arguments)}function aD(n,e,t){const r=tt(n);let i=At.min(),s=nn();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,y){const C=tt(h),S=C.Ui.get(y);return void 0!==S?ge.resolve(C.qi.get(S)):C.Cs.getTargetData(p,y)}(r,c,ws(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{s=p})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:At.min(),t?s:nn())).next(h=>(LU(r,pB(e),h),{documents:h,Hi:s})))}function PU(n,e){const t=tt(n),r=tt(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ne(s,e).next(c=>c?c.target:null))}function FU(n,e){const t=tt(n),r=t.Ki.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,LV(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(LU(t,e,i),i))}function LU(n,e,t){let r=n.Ki.get(e)||At.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function fk(){return fk=(0,De.Z)(function*(n,e,t,r){const i=tt(n);let s=nn(),c=zs();for(const y of t){const C=e.Ji(y.metadata.name);y.document&&(s=s.add(C));const S=e.Yi(y);S.setReadTime(e.Xi(y.metadata.readTime)),c=c.insert(C,S)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield Fm(i,(y=r,ws(Sm(In.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>NU(y,h,c).next(C=>(h.apply(y),C)).next(C=>i.Cs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Cs.addMatchingKeys(y,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,C.Wi,C.zi)).next(()=>C.Wi)))}),fk.apply(this,arguments)}function aq(n,e){return pk.apply(this,arguments)}function pk(){return pk=(0,De.Z)(function*(n,e,t=nn()){const r=yield Fm(n,ws(JR(e.bundledQuery))),i=tt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const c=Kr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(s,e);const h=r.withResumeToken(pi.EMPTY_BYTE_STRING,c);return i.qi=i.qi.insert(h.targetId,h),i.Cs.updateTargetData(s,h).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),pk.apply(this,arguments)}function VU(n,e){return`firestore_clients_${n}_${e}`}function BU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function gk(n,e){return`firestore_targets_${n}_${e}`}class lD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(s=new Be(i.error.code,i.error.message))),c?new lD(e,t,i.state,s):(qr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vb{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Be(r.error.code,r.error.message))),s?new Vb(e,r.state,i):(qr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=KI();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=zV(r.activeTargetIds[c]),s=s.add(r.activeTargetIds[c]);return i?new cD(e,s):(qr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class mk{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new mk(t.clientId,t.onlineState):(qr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _k{constructor(){this.activeTargetIds=KI()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yk{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Hr(Yt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=VU(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new _k),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,De.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(VU(e.persistenceKey,i));if(s){const c=cD.Zi(i,s);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(gk(this.persistenceKey,e));if(r){const i=Vb.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gk(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void qr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,De.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let c=Do.at;if(null!=s)try{const h=JSON.parse(s);It("number"==typeof h),c=h}catch(h){qr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Do.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new lD(this.currentUser,e,t,r),s=BU(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=BU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=gk(this.persistenceKey,e),s=new Vb(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return cD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return lD.Zi(new Ti(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Vb.Zi(i,t)}yr(e){return mk.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,De.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),c=[],h=[];return s.forEach(p=>{i.has(p)||c.push(p)}),i.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Br(c,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=KI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class UU{constructor(){this.Lr=new _k,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new _k,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lq{Ur(e){}shutdown(){}}class HU{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const cq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uq{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class dq extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const c=this.ho(e,t);ze("RestConnection","Sending: ",c,r);const h={};return this.lo(h,i,s),this.fo(e,c,h,r).then(p=>(ze("RestConnection","Received: ",p),p),p=>{throw Lf("RestConnection",`${e} failed with error: `,p,"url: ",c,"request:",r),p})}_o(e,t,r,i,s,c){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+bm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${cq[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,c)=>{const h=new cW;h.setWithCredentials(!0),h.listenOnce(oW.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case DR.NO_ERROR:const y=h.getResponseJson();ze("Connection","XHR received:",JSON.stringify(y)),s(y);break;case DR.TIMEOUT:ze("Connection",'RPC "'+e+'" timed out'),c(new Be(ve.DEADLINE_EXCEEDED,"Request time out"));break;case DR.HTTP_ERROR:const C=h.getStatus();if(ze("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const V=function(H){const Q=H.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(Q)>=0?Q:ve.UNKNOWN}(R.status);c(new Be(V,R.message))}else c(new Be(ve.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Be(ve.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{ze("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=iW(),c=sW(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new lW({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=i.join("");ze("Connection","Creating WebChannel: "+p,h);const y=s.createWebChannel(p,h);let C=!1,S=!1;const R=new uq({Hr:H=>{S?ze("Connection","Not sending because WebChannel is closed:",H):(C||(ze("Connection","Opening WebChannel transport."),y.open(),C=!0),ze("Connection","WebChannel sending:",H),y.send(H))},Jr:()=>y.close()}),V=(H,Q,ye)=>{H.listen(Q,Ye=>{try{ye(Ye)}catch(ct){setTimeout(()=>{throw ct},0)}})};return V(y,NI.EventType.OPEN,()=>{S||ze("Connection","WebChannel transport opened.")}),V(y,NI.EventType.CLOSE,()=>{S||(S=!0,ze("Connection","WebChannel transport closed"),R.io())}),V(y,NI.EventType.ERROR,H=>{S||(S=!0,Lf("Connection","WebChannel transport errored:",H),R.io(new Be(ve.UNAVAILABLE,"The operation could not be completed")))}),V(y,NI.EventType.MESSAGE,H=>{var Q;if(!S){const ye=H.data[0];It(!!ye);const Ye=ye,ct=Ye.error||(null===(Q=Ye[0])||void 0===Q?void 0:Q.error);if(ct){ze("Connection","WebChannel received error:",ct);const pt=ct.status;let gt=function(Bt){const vn=ni[Bt];if(void 0!==vn)return xB(vn)}(pt),Nt=ct.message;void 0===gt&&(gt=ve.INTERNAL,Nt="Unknown error status: "+pt+" with message "+ct.message),S=!0,R.io(new Be(gt,Nt)),y.close()}else ze("Connection","WebChannel received:",ye),R.ro(ye)}}),V(c,aW.STAT_EVENT,H=>{H.stat===RV.PROXY?ze("Connection","Detected buffering proxy"):H.stat===RV.NOPROXY&&ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.so()},0),R}}function jU(){return typeof window<"u"?window:null}function uD(){return typeof document<"u"?document:null}function Bb(n){return new t3(n,!0)}class vk{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class $U{constructor(e,t,r,i,s,c,h,p){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new vk(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,De.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,De.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,De.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ve.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Be(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,De.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hq extends $U{constructor(e,t,r,i,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.yt=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function s3(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ht(),i=e.targetChange.targetIds||[],s=function(p,y){return p.wt?(It(void 0===y||"string"==typeof y),pi.fromBase64String(y||"")):(It(void 0===y||y instanceof Uint8Array),pi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const y=void 0===p.code?ve.UNKNOWN:xB(p.code);return new Be(y,p.message||"")}(c);t=new PB(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=tc(n,r.document.name),s=Kr(r.document.updateTime),c=r.document.createTime?Kr(r.document.createTime):At.min(),h=new Bi({mapValue:{fields:r.document.fields}}),p=yr.newFoundDocument(i,s,c,h);t=new YI(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=tc(n,r.document),s=r.readTime?Kr(r.readTime):At.min(),c=yr.newNoDocument(i,s);t=new YI([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=tc(n,r.document);t=new YI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,s=new WW(r.count||0);t=new NB(r.targetId,s)}}var p;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return At.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?At.min():s.readTime?Kr(s.readTime):At.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Mb(this.yt),t.addTarget=function(i,s){let c;const h=s.target;return c=HI(h)?{documents:GB(i,h)}:{query:KR(i,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=BB(i,s.resumeToken):s.snapshotVersion.compareTo(At.min())>0&&(c.readTime=Rm(i,s.snapshotVersion.toTimestamp())),c}(this.yt,e);const r=function a3(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Mb(this.yt),t.removeTarget=e,this.Bo(t)}}class fq extends $U{constructor(e,t,r,i,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function o3(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,i){let s=Kr(r.updateTime?r.updateTime:i);return s.isEqual(At.min())&&(s=Kr(i)),new $W(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.Zo(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Mb(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>xb(this.yt,r))};this.Bo(t)}}class pq extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Be(ve.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Be(ve.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection._o(e,t,r,s,c,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(ve.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class mq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(qr(t),this.ou=!1):ze("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class _q{constructor(e,t,r,i,s){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(h=>{r.enqueueAndForget((0,De.Z)(function*(){var p;iu(c)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,De.Z)(function*(y){const C=tt(y);C._u.add(4),yield Vm(C),C.gu.set("Unknown"),C._u.delete(4),yield Ub(C)}),function(y){return p.apply(this,arguments)})(c))}))}),this.gu=new mq(r,i)}}function Ub(n){return wk.apply(this,arguments)}function wk(){return wk=(0,De.Z)(function*(n){if(iu(n))for(const e of n.wu)yield e(!0)}),wk.apply(this,arguments)}function Vm(n){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,De.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Ek.apply(this,arguments)}function dD(n,e){const t=tt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Dk(t)?Ik(t):Um(t).ko()&&Ck(t,e))}function Hb(n,e){const t=tt(n),r=Um(t);t.du.delete(e),r.ko()&&zU(t,e),0===t.du.size&&(r.ko()?r.Fo():iu(t)&&t.gu.set("Unknown"))}function Ck(n,e){n.yu.Ot(e.targetId),Um(n).zo(e)}function zU(n,e){n.yu.Ot(e),Um(n).Ho(e)}function Ik(n){n.yu=new QW({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Um(n).start(),n.gu.uu()}function Dk(n){return iu(n)&&!Um(n).No()&&n.du.size>0}function iu(n){return 0===tt(n)._u.size}function GU(n){n.yu=void 0}function yq(n){return Sk.apply(this,arguments)}function Sk(){return Sk=(0,De.Z)(function*(n){n.du.forEach((e,t)=>{Ck(n,e)})}),Sk.apply(this,arguments)}function vq(n,e){return Tk.apply(this,arguments)}function Tk(){return Tk=(0,De.Z)(function*(n,e){GU(n),Dk(n)?(n.gu.hu(e),Ik(n)):n.gu.set("Unknown")}),Tk.apply(this,arguments)}function bq(n,e,t){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,De.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof PB&&2===e.state&&e.cause)try{yield(r=(0,De.Z)(function*(i,s){const c=s.cause;for(const h of s.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.du.delete(h),i.yu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hD(n,r)}else if(e instanceof YI?n.yu.Kt(e):e instanceof NB?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(At.min()))try{const r=yield OU(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const c=i.yu.Zt(s);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.du.get(p);y&&i.du.set(p,y.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach(h=>{const p=i.du.get(h);if(!p)return;i.du.set(h,p.withResumeToken(pi.EMPTY_BYTE_STRING,p.snapshotVersion)),zU(i,h);const y=new xd(p.target,h,1,p.sequenceNumber);Ck(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield hD(n,r)}var r}),Ak.apply(this,arguments)}function hD(n,e,t){return Mk.apply(this,arguments)}function Mk(){return Mk=(0,De.Z)(function*(n,e,t){if(!Cd(e))throw e;n._u.add(1),yield Vm(n),n.gu.set("Offline"),t||(t=()=>OU(n.localStore)),n.asyncQueue.enqueueRetryable((0,De.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Ub(n)}))}),Mk.apply(this,arguments)}function WU(n,e){return e().catch(t=>hD(n,t,e))}function Bm(n){return xk.apply(this,arguments)}function xk(){return xk=(0,De.Z)(function*(n){const e=tt(n),t=Nd(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;wq(e);)try{const i=yield sq(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,Eq(e,i)}catch(i){yield hD(e,i)}qU(e)&&KU(e)}),xk.apply(this,arguments)}function wq(n){return iu(n)&&n.fu.length<10}function Eq(n,e){n.fu.push(e);const t=Nd(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function qU(n){return iu(n)&&!Nd(n).No()&&n.fu.length>0}function KU(n){Nd(n).start()}function Cq(n){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,De.Z)(function*(n){Nd(n).eu()}),Rk.apply(this,arguments)}function Iq(n){return kk.apply(this,arguments)}function kk(){return kk=(0,De.Z)(function*(n){const e=Nd(n);for(const t of n.fu)e.Xo(t.mutations)}),kk.apply(this,arguments)}function Dq(n,e,t){return Ok.apply(this,arguments)}function Ok(){return Ok=(0,De.Z)(function*(n,e,t){const r=n.fu.shift(),i=QR.from(r,e,t);yield WU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Bm(n)}),Ok.apply(this,arguments)}function Sq(n,e){return Nk.apply(this,arguments)}function Nk(){return Nk=(0,De.Z)(function*(n,e){var t;e&&Nd(n).Yo&&(yield(t=(0,De.Z)(function*(r,i){if(MB(s=i.code)&&s!==ve.ABORTED){const c=r.fu.shift();Nd(r).Mo(),yield WU(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Bm(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),qU(n)&&KU(n)}),Nk.apply(this,arguments)}function YU(n,e){return Pk.apply(this,arguments)}function Pk(){return Pk=(0,De.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=iu(t);t._u.add(3),yield Vm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Ub(t)}),Pk.apply(this,arguments)}function Fk(n,e){return Lk.apply(this,arguments)}function Lk(){return Lk=(0,De.Z)(function*(n,e){const t=tt(n);e?(t._u.delete(2),yield Ub(t)):e||(t._u.add(2),yield Vm(t),t.gu.set("Unknown"))}),Lk.apply(this,arguments)}function Um(n){return n.pu||(n.pu=function(e,t,r){const i=tt(e);return i.su(),new hq(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:yq.bind(null,n),Zr:vq.bind(null,n),Wo:bq.bind(null,n)}),n.wu.push(function(){var e=(0,De.Z)(function*(t){t?(n.pu.Mo(),Dk(n)?Ik(n):n.gu.set("Unknown")):(yield n.pu.stop(),GU(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Nd(n){return n.Iu||(n.Iu=function(e,t,r){const i=tt(e);return i.su(),new fq(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:Cq.bind(null,n),Zr:Sq.bind(null,n),tu:Iq.bind(null,n),Zo:Dq.bind(null,n)}),n.wu.push(function(){var e=(0,De.Z)(function*(t){t?(n.Iu.Mo(),yield Bm(n)):(yield n.Iu.stop(),n.fu.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Vk{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,s){const c=Date.now()+r,h=new Vk(e,t,c,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(n,e){if(qr("AsyncQueue",`${e}: ${n}`),Cd(n))return new Be(ve.UNAVAILABLE,`${e}: ${n}`);throw n}class jm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=Ib(),this.sortedSet=new Hr(this.comparator)}static emptySet(e){return new jm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new jm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ZU{constructor(){this.Tu=new Hr(Qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ht():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class $m{constructor(e,t,r,i,s,c,h,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new $m(e,t,jm.emptySet(t),c,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Tq{constructor(){this.Au=void 0,this.listeners=[]}}class Aq{constructor(){this.queries=new Md(e=>fB(e),wb),this.onlineState="Unknown",this.Ru=new Set}}function Bk(n,e){return Uk.apply(this,arguments)}function Uk(){return Uk=(0,De.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Tq),i)try{s.Au=yield t.onListen(r)}catch(c){const h=Hm(c,`Initialization of query '${jR(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&$k(t)}),Uk.apply(this,arguments)}function Hk(n,e){return jk.apply(this,arguments)}function jk(){return jk=(0,De.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),jk.apply(this,arguments)}function Mq(n,e){const t=tt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Pu(i)&&(r=!0);c.Au=i}}r&&$k(t)}function xq(n,e,t){const r=tt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function $k(n){n.Ru.forEach(e=>{e.next()})}class zk{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new $m(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=$m.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Rq{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class QU{constructor(e){this.yt=e}Ji(e){return tc(this.yt,e)}Yi(e){return e.metadata.exists?zB(this.yt,e.document,!1):yr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Kr(e)}}class kq{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XU(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=In.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new QU(this.yt);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||nn()).add(s);t.set(c,h)}}return t}complete(){var e=this;return(0,De.Z)(function*(){const t=yield function oq(n,e,t,r){return fk.apply(this,arguments)}(e.localStore,new QU(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield aq(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function XU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class JU{constructor(e){this.key=e}}class e2{constructor(e){this.key=e}}class t2{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=nn(),this.mutatedKeys=nn(),this.Gu=gB(e),this.Qu=new jm(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new ZU,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,S)=>{const R=i.get(C),V=$R(this.query,S)?S:null,H=!!R&&this.mutatedKeys.has(R.key),Q=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ye=!1;R&&V?R.data.isEqual(V.data)?H!==Q&&(r.track({type:3,doc:V}),ye=!0):this.Hu(R,V)||(r.track({type:2,doc:V}),ye=!0,(p&&this.Gu(V,p)>0||y&&this.Gu(V,y)<0)&&(h=!0)):!R&&V?(r.track({type:0,doc:V}),ye=!0):R&&!V&&(r.track({type:1,doc:R}),ye=!0,(p||y)&&(h=!0)),ye&&(V?(c=c.add(V),s=Q?s.add(C):s.delete(C)):(c=c.delete(C),s=s.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),s=s.delete(C.key),r.track({type:1,doc:C})}return{Qu:c,zu:r,$i:h,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((y,C)=>function(S,R){const V=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return V(S)-V(R)}(y.type,C.type)||this.Gu(y.doc,C.doc)),this.Ju(r);const c=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,p=h!==this.Uu;return this.Uu=h,0!==s.length||p?{snapshot:new $m(this.query,e.Qu,i,s,e.mutatedKeys,0===h,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ZU,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=nn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new e2(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new JU(r))}),t}tc(e){this.qu=e.Hi,this.Ku=nn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return $m.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Oq{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Nq{constructor(e){this.key=e,this.nc=!1}}class Pq{constructor(e,t,r,i,s,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new Md(h=>fB(h),wb),this.rc=new Map,this.oc=new Set,this.uc=new Hr(Qe.comparator),this.cc=new Map,this.ac=new ok,this.hc={},this.lc=new Map,this.fc=Jf.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Fq(n,e){return Gk.apply(this,arguments)}function Gk(){return Gk=(0,De.Z)(function*(n,e){const t=pO(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const c=yield Fm(t.localStore,ws(e));t.isPrimaryClient&&dD(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Wk(t,e,r,"current"===h,c.resumeToken)}return i}),Gk.apply(this,arguments)}function Wk(n,e,t,r,i){return qk.apply(this,arguments)}function qk(){return qk=(0,De.Z)(function*(n,e,t,r,i){n._c=(S,R,V)=>{return(H=(0,De.Z)(function*(Q,ye,Ye,ct){let pt=ye.view.Wu(Ye);pt.$i&&(pt=yield aD(Q.localStore,ye.query,!1).then(({documents:Bt})=>ye.view.Wu(Bt,pt)));const gt=ct&&ct.targetChanges.get(ye.targetId),Nt=ye.view.applyChanges(pt,Q.isPrimaryClient,gt);return rO(Q,ye.targetId,Nt.Xu),Nt.snapshot}),function(Q,ye,Ye,ct){return H.apply(this,arguments)})(n,S,R,V);var H};const s=yield aD(n.localStore,e,!0),c=new t2(e,s.Hi),h=c.Wu(s.documents),p=Tb.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=c.applyChanges(h,n.isPrimaryClient,p);rO(n,t,y.Xu);const C=new Oq(e,t,c);return n.ic.set(e,C),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),qk.apply(this,arguments)}function Lq(n,e){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,De.Z)(function*(n,e){const t=tt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!wb(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Lm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Hb(t.remoteStore,r.targetId),zm(t,r.targetId)}).catch(Ed))):(zm(t,r.targetId),yield Lm(t.localStore,r.targetId,!0))}),Kk.apply(this,arguments)}function Yk(){return Yk=(0,De.Z)(function*(n,e,t){const r=gO(n);try{const i=yield function(s,c){const h=tt(s),p=Dr.now(),y=c.reduce((R,V)=>R.add(V.key),nn());let C,S;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let V=zs(),H=nn();return h.Gi.getEntries(R,y).next(Q=>{V=Q,V.forEach((ye,Ye)=>{Ye.isValidDocument()||(H=H.add(ye))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,V)).next(Q=>{C=Q;const ye=[];for(const Ye of c){const ct=GW(Ye,C.get(Ye.key).overlayedDocument);null!=ct&&ye.push(new ru(Ye.key,ct,lB(ct.value.mapValue),Sr.exists(!0)))}return h.mutationQueue.addMutationBatch(R,p,ye,c)}).next(Q=>{S=Q;const ye=Q.applyToLocalDocumentSet(C,H);return h.documentOverlayCache.saveOverlays(R,Q.batchId,ye)})}).then(()=>({batchId:S.batchId,changes:kB(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,h){let p=s.hc[s.currentUser.toKey()];p||(p=new Hr(Yt)),p=p.insert(c,h),s.hc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield su(r,i.changes),yield Bm(r.remoteStore)}catch(i){const s=Hm(i,"Failed to persist write");t.reject(s)}}),Yk.apply(this,arguments)}function n2(n,e){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,De.Z)(function*(n,e){const t=tt(n);try{const r=yield iq(t.localStore,e);e.targetChanges.forEach((i,s)=>{const c=t.cc.get(s);c&&(It(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.nc=!0:i.modifiedDocuments.size>0?It(c.nc):i.removedDocuments.size>0&&(It(c.nc),c.nc=!1))}),yield su(t,r,e)}catch(r){yield Ed(r)}}),Zk.apply(this,arguments)}function r2(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,c)=>{const h=c.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(s,c){const h=tt(s);h.onlineState=c;let p=!1;h.queries.forEach((y,C)=>{for(const S of C.listeners)S.bu(c)&&(p=!0)}),p&&$k(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Bq(n,e,t){return Qk.apply(this,arguments)}function Qk(){return Qk=(0,De.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let c=new Hr(Qe.comparator);c=c.insert(s,yr.newNoDocument(s,At.min()));const h=nn().add(s),p=new Sb(At.min(),new Map,new qn(Yt),c,h);yield n2(r,p),r.uc=r.uc.remove(s),r.cc.delete(e),iO(r)}else yield Lm(r.localStore,e,!1).then(()=>zm(r,e,t)).catch(Ed)}),Qk.apply(this,arguments)}function Uq(n,e){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,De.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const i=yield rq(t.localStore,e);nO(t,r,null),tO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield su(t,i)}catch(i){yield Ed(i)}}),Xk.apply(this,arguments)}function Hq(n,e,t){return Jk.apply(this,arguments)}function Jk(){return Jk=(0,De.Z)(function*(n,e,t){const r=tt(n);try{const i=yield function(s,c){const h=tt(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.mutationQueue.lookupMutationBatch(p,c).next(C=>(It(null!==C),y=C.keys(),h.mutationQueue.removeMutationBatch(p,C))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>h.localDocuments.getDocuments(p,y))})}(r.localStore,e);nO(r,e,t),tO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield su(r,i)}catch(i){yield Ed(i)}}),Jk.apply(this,arguments)}function eO(){return eO=(0,De.Z)(function*(n,e){const t=tt(n);iu(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const c=tt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Hm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),eO.apply(this,arguments)}function tO(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function nO(n,e,t){const r=tt(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function zm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||s2(n,r)})}function s2(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Hb(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),iO(n))}function rO(n,e,t){for(const r of t)r instanceof JU?(n.ac.addReference(r.key,e),$q(n,r)):r instanceof e2?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||s2(n,r.key)):ht()}function $q(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.oc.add(r),iO(n))}function iO(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Qe(In.fromString(e)),r=n.fc.next();n.cc.set(r,new Nq(t)),n.uc=n.uc.insert(t,r),dD(n.remoteStore,new xd(ws(Sm(t.path)),r,2,Do.at))}}function su(n,e,t){return sO.apply(this,arguments)}function sO(){return sO=(0,De.Z)(function*(n,e,t){const r=tt(n),i=[],s=[],c=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,p)=>{c.push(r._c(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const C=uk.Ci(p.targetId,y);s.push(C)}}))}),yield Promise.all(c),r.sc.Wo(i),yield(h=(0,De.Z)(function*(p,y){const C=tt(p);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ge.forEach(y,R=>ge.forEach(R.Si,V=>C.persistence.referenceDelegate.addReference(S,R.targetId,V)).next(()=>ge.forEach(R.Di,V=>C.persistence.referenceDelegate.removeReference(S,R.targetId,V)))))}catch(S){if(!Cd(S))throw S;ze("LocalStore","Failed to update sequence numbers: "+S)}for(const S of y){const R=S.targetId;if(!S.fromCache){const V=C.qi.get(R),Q=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);C.qi=C.qi.insert(R,Q)}}}),function(p,y){return h.apply(this,arguments)})(r.localStore,s))}),sO.apply(this,arguments)}function zq(n,e){return oO.apply(this,arguments)}function oO(){return oO=(0,De.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield kU(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(c=>{c.forEach(h=>{h.reject(new Be(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield su(t,r.ji)}var i}),oO.apply(this,arguments)}function Gq(n,e){const t=tt(n),r=t.cc.get(e);if(r&&r.nc)return nn().add(r.key);{let i=nn();const s=t.rc.get(e);if(!s)return i;for(const c of s){const h=t.ic.get(c);i=i.unionWith(h.view.ju)}return i}}function Wq(n,e){return aO.apply(this,arguments)}function aO(){return aO=(0,De.Z)(function*(n,e){const t=tt(n),r=yield aD(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&rO(t,e.targetId,i.Xu),i}),aO.apply(this,arguments)}function qq(n,e){return lO.apply(this,arguments)}function lO(){return lO=(0,De.Z)(function*(n,e){const t=tt(n);return FU(t.localStore,e).then(r=>su(t,r))}),lO.apply(this,arguments)}function Kq(n,e,t,r){return cO.apply(this,arguments)}function cO(){return cO=(0,De.Z)(function*(n,e,t,r){const i=tt(n),s=yield function(c,h){const p=tt(c),y=tt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.Tn(C,h).next(S=>S?p.localDocuments.getDocuments(C,S):ge.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield Bm(i.remoteStore):"acknowledged"===t||"rejected"===t?(nO(i,e,r||null),tO(i,e),h=e,tt(tt(i.localStore).mutationQueue).An(h)):ht(),yield su(i,s)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),cO.apply(this,arguments)}function uO(){return uO=(0,De.Z)(function*(n,e){const t=tt(n);if(pO(t),gO(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield o2(t,r.toArray());t.dc=!0,yield Fk(t.remoteStore,!0);for(const s of i)dD(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((s,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(zm(t,c),Lm(t.localStore,c,!0))),Hb(t.remoteStore,c)}),yield i,yield o2(t,r),function(s){const c=tt(s);c.cc.forEach((h,p)=>{Hb(c.remoteStore,p)}),c.ac.fs(),c.cc=new Map,c.uc=new Hr(Qe.comparator)}(t),t.dc=!1,yield Fk(t.remoteStore,!1)}}),uO.apply(this,arguments)}function o2(n,e,t){return dO.apply(this,arguments)}function dO(){return dO=(0,De.Z)(function*(n,e,t){const r=tt(n),i=[],s=[];for(const c of e){let h;const p=r.rc.get(c);if(p&&0!==p.length){h=yield Fm(r.localStore,ws(p[0]));for(const y of p){const C=r.ic.get(y),S=yield Wq(r,C);S.snapshot&&s.push(S.snapshot)}}else{const y=yield PU(r.localStore,c);h=yield Fm(r.localStore,y),yield Wk(r,a2(y),c,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(s),i}),dO.apply(this,arguments)}function a2(n){return dB(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Zq(n){const e=tt(n);return tt(tt(e.localStore).persistence).vi()}function Qq(n,e,t,r){return hO.apply(this,arguments)}function hO(){return hO=(0,De.Z)(function*(n,e,t,r){const i=tt(n);if(i.dc)return void ze("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const c=yield FU(i.localStore,pB(s[0])),h=Sb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,pi.EMPTY_BYTE_STRING);yield su(i,c,h);break}case"rejected":yield Lm(i.localStore,e,!0),zm(i,e,r);break;default:ht()}}),hO.apply(this,arguments)}function Xq(n,e,t){return fO.apply(this,arguments)}function fO(){return fO=(0,De.Z)(function*(n,e,t){const r=pO(n);if(r.dc){for(const i of e){if(r.rc.has(i)){ze("SyncEngine","Adding an already active target "+i);continue}const s=yield PU(r.localStore,i),c=yield Fm(r.localStore,s);yield Wk(r,a2(s),c.targetId,!1,c.resumeToken),dD(r.remoteStore,c)}for(const i of t)r.rc.has(i)&&(yield Lm(r.localStore,i,!1).then(()=>{Hb(r.remoteStore,i),zm(r,i)}).catch(Ed))}}),fO.apply(this,arguments)}function pO(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=n2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bq.bind(null,e),e.sc.Wo=Mq.bind(null,e.eventManager),e.sc.wc=xq.bind(null,e.eventManager),e}function gO(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Hq.bind(null,e),e}class l2{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,De.Z)(function*(){t.yt=Bb(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return RU(this.persistence,new xU,e.initialUser,this.yt)}yc(e){return new AU(sD.Bs,this.yt)}gc(e){return new UU}terminate(){var e=this;return(0,De.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class c2 extends l2{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield gO(r.Ac.syncEngine),yield Bm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return RU(this.persistence,new xU,e.initialUser,this.yt)}Tc(e,t){return new j3(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new DW(t,this.persistence);return new IW(e.asyncQueue,r)}yc(e){const t=ck(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gs.withCacheSize(this.cacheSizeBytes):Gs.DEFAULT;return new lk(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jU(),uD(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new UU}}class e6 extends c2{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof yk&&(r.sharedClientState.syncEngine={Fr:Kq.bind(null,i),$r:Qq.bind(null,i),Br:Xq.bind(null,i),vi:Zq.bind(null,i),Mr:qq.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,De.Z)(function*(c){yield function Yq(n,e){return uO.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}gc(e){const t=jU();if(!yk.C(t))throw new Be(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ck(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yk(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class mO{initialize(e,t){var r=this;return(0,De.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>r2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=zq.bind(null,r.syncEngine),yield Fk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Aq}createDatastore(e){const t=Bb(e.databaseInfo.databaseId),r=new dq(e.databaseInfo);return new pq(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>r2(this.syncEngine,h,0),c=HU.C()?new HU:new lq,new _q(t,r,i,s,c);var t,r,i,s,c}createSyncEngine(e,t){return function(r,i,s,c,h,p,y){const C=new Pq(r,i,s,c,h,p);return y&&(C.dc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,De.Z)(function*(t){const r=tt(t);ze("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Vm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _O(n,e,t){if(!t)throw new Be(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function u2(n,e,t,r){if(!0===e&&!0===r)throw new Be(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function d2(n){if(!Qe.isDocumentKey(n))throw new Be(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function h2(n){if(Qe.isDocumentKey(n))throw new Be(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Be(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fD(n);throw new Be(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function f2(n,e){if(e<=0)throw new Be(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const p2=new Map;class g2{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Be(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Be(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,u2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jb{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Be(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Be(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new hW;switch(t.type){case"gapi":return new mW(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Be(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=p2.get(e);t&&(ze("ComponentProvider","Removing Datastore"),p2.delete(e),t.terminate())}(this),Promise.resolve()}}function m2(n,e,t,r={}){var i;const s=(n=mn(n,jb))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Lf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=Ti.MOCK_USER;else{c=(0,ne.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Be(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ti(p)}n._authCredentials=new fW(new OV(c,h))}}class vr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}}class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class rc extends Ui{constructor(e,t,r){super(e,t,Sm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new Qe(e))}withConverter(e){return new rc(this.firestore,e,this._path)}}function _2(n,e,...t){if(n=(0,ne.m9)(n),_O("collection","path",e),n instanceof jb){const r=In.fromString(e,...t);return h2(r),new rc(n,null,r)}{if(!(n instanceof vr||n instanceof rc))throw new Be(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return h2(r),new rc(n.firestore,null,r)}}function pD(n,e,...t){if(n=(0,ne.m9)(n),1===arguments.length&&(e=PV.R()),_O("doc","path",e),n instanceof jb){const r=In.fromString(e,...t);return d2(r),new vr(n,null,new Qe(r))}{if(!(n instanceof vr||n instanceof rc))throw new Be(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return d2(r),new vr(n.firestore,n instanceof rc?n.converter:null,new Qe(r))}}function y2(n,e){return n=(0,ne.m9)(n),e=(0,ne.m9)(e),(n instanceof vr||n instanceof rc)&&(e instanceof vr||e instanceof rc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function yO(n,e){return n=(0,ne.m9)(n),e=(0,ne.m9)(e),n instanceof Ui&&e instanceof Ui&&n.firestore===e.firestore&&wb(n._query,e._query)&&n.converter===e.converter}function v2(n,e=10240){let t=0;return{read:()=>(0,De.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,De.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class gD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class n6{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new fi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,De.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,De.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,De.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new Rq(JSON.parse(s),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,De.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,De.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,De.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class s6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,De.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Be(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,De.Z)(function*(s,c){const h=tt(s),p=Mb(h.yt)+"/documents",y={documents:c.map(V=>Ab(h.yt,V))},C=yield h._o("BatchGetDocuments",p,y,c.length),S=new Map;C.forEach(V=>{const H=function r3(n,e){return"found"in e?function(t,r){It(!!r.found);const i=tc(t,r.found.name),s=Kr(r.found.updateTime),c=r.found.createTime?Kr(r.found.createTime):At.min(),h=new Bi({mapValue:{fields:r.found.fields}});return yr.newFoundDocument(i,s,c,h)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const i=tc(t,r.missing),s=Kr(r.readTime);return yr.newNoDocument(i,s)}(n,e):ht()}(h.yt,V);S.set(H.key.toString(),H)});const R=[];return c.forEach(V=>{const H=S.get(V.toString());It(!!H),R.push(H)}),R}),function(s,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,De.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Qe.fromPath(i);e.mutations.push(new zR(s,e.precondition(s)))}),yield(r=(0,De.Z)(function*(i,s){const c=tt(i),h=Mb(c.yt)+"/documents",p={writes:s.map(y=>xb(c.yt,y))};yield c.ao("Commit",h,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Be(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(At.min())?Sr.exists(!1):Sr.updateTime(t):Sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Be(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sr.updateTime(t)}return Sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class o6{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new vk(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,De.Z)(function*(){const t=new s6(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!pb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!MB(t)}return!1}}class a6{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ti.UNAUTHENTICATED,this.clientId=PV.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,De.Z)(function*(h){ze("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ze("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,De.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(ve.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Hm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function b2(n,e){return vO.apply(this,arguments)}function vO(){return vO=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,De.Z)(function*(s){r.isEqual(s)||(yield kU(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),vO.apply(this,arguments)}function w2(n,e){return bO.apply(this,arguments)}function bO(){return bO=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wO(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>YU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>YU(e.remoteStore,s)),n.onlineComponents=e}),bO.apply(this,arguments)}function wO(n){return EO.apply(this,arguments)}function EO(){return EO=(0,De.Z)(function*(n){return n.offlineComponents||(ze("FirestoreClient","Using default OfflineComponentProvider"),yield b2(n,new l2)),n.offlineComponents}),EO.apply(this,arguments)}function mD(n){return CO.apply(this,arguments)}function CO(){return CO=(0,De.Z)(function*(n){return n.onlineComponents||(ze("FirestoreClient","Using default OnlineComponentProvider"),yield w2(n,new mO)),n.onlineComponents}),CO.apply(this,arguments)}function E2(n){return wO(n).then(e=>e.persistence)}function _D(n){return wO(n).then(e=>e.localStore)}function IO(n){return mD(n).then(e=>e.remoteStore)}function DO(n){return mD(n).then(e=>e.syncEngine)}function Gm(n){return SO.apply(this,arguments)}function SO(){return SO=(0,De.Z)(function*(n){const e=yield mD(n),t=e.eventManager;return t.onListen=Fq.bind(null,e.syncEngine),t.onUnlisten=Lq.bind(null,e.syncEngine),t}),SO.apply(this,arguments)}function I2(n,e,t={}){const r=new fi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,s,c,h,p){const y=new gD({next:S=>{s.enqueueAndForget(()=>Hk(i,C));const R=S.docs.has(c);!R&&S.fromCache?p.reject(new Be(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&h&&"server"===h.source?p.reject(new Be(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),C=new zk(Sm(c.path),y,{includeMetadataChanges:!0,Nu:!0});return Bk(i,C)}(yield Gm(n),n.asyncQueue,e,t,r)})),r.promise}function D2(n,e,t={}){const r=new fi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,s,c,h,p){const y=new gD({next:S=>{s.enqueueAndForget(()=>Hk(i,C)),S.fromCache&&"server"===h.source?p.reject(new Be(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),C=new zk(c,y,{includeMetadataChanges:!0,Nu:!0});return Bk(i,C)}(yield Gm(n),n.asyncQueue,e,t,r)})),r.promise}class g6{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new vk(this,"async_queue_retry"),this.Wc=()=>{const t=uD();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=uD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=uD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new fi;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,De.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Cd(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,qr("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=Vk.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&ht()}verifyOperationInProgress(){}Xc(){var e=this;return(0,De.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function TO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class m6{constructor(){this._progressObserver={},this._taskCompletionResolver=new fi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class br extends jb{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new g6,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||S2(this),this._firestoreClient.terminate()}}function y6(n,e){const t="object"==typeof n?n:(0,ns.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,ns._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,ne.P0)("firestore");s&&m2(i,...s)}return i}function Yr(n){return n._firestoreClient||S2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function S2(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new SW(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new a6(n._authCredentials,n._appCheckCredentials,n._queue,r)}function T2(n,e,t){const r=new fi;return n.asyncQueue.enqueue((0,De.Z)(function*(){try{yield b2(n,t),yield w2(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(c=s).name?c.code===ve.FAILED_PRECONDITION||c.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;Lf("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var c})).then(()=>r.promise)}function A2(n){if(n._initialized||n._terminated)throw new Be(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ic{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ic(pi.fromBase64String(e))}catch(t){throw new Be(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ic(pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ou{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Be(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tp{constructor(e){this._methodName=e}}class yD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Be(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Be(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}const T6=/^__.*__$/;class A6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ru(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mm(e,this.data,t,this.fieldTransforms)}}class M2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ru(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function x2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class vD{constructor(e,t,r,i,s,c){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new vD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return ED(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(x2(this.sa)&&T6.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class M6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||Bb(e)}da(e,t,r,i=!1){return new vD({sa:e,methodName:t,fa:r,path:Br.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function np(n){const e=n._freezeSettings(),t=Bb(n._databaseId);return new M6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bD(n,e,t,r,i,s={}){const c=n.da(s.merge||s.mergeFields?2:0,e,t,i);RO("Data must be an object, but it was:",c,r);const h=O2(r,c);let p,y;if(s.merge)p=new $s(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const C=[];for(const S of s.mergeFields){const R=kO(e,S,t);if(!c.contains(R))throw new Be(ve.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);P2(C,R)||C.push(R)}p=new $s(C),y=c.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,y=c.fieldTransforms;return new A6(new Bi(h),p,y)}class $b extends tp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $b}}function R2(n,e,t){return new vD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class AO extends tp{_toFieldTransform(e){return new Eb(e.path,new Tm)}isEqual(e){return e instanceof AO}}class x6 extends tp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=R2(this,e,!0),r=this._a.map(s=>rp(s,t)),i=new Wf(r);return new Eb(e.path,i)}isEqual(e){return this===e}}class R6 extends tp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=R2(this,e,!0),r=this._a.map(s=>rp(s,t)),i=new qf(r);return new Eb(e.path,i)}isEqual(e){return this===e}}class k6 extends tp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Am(e.yt,yB(e.yt,this.wa));return new Eb(e.path,t)}isEqual(e){return this===e}}function MO(n,e,t,r){const i=n.da(1,e,t);RO("Data must be an object, but it was:",i,r);const s=[],c=Bi.empty();Uf(r,(p,y)=>{const C=wD(e,p,t);y=(0,ne.m9)(y);const S=i.ca(C);if(y instanceof $b)s.push(C);else{const R=rp(y,S);null!=R&&(s.push(C),c.set(C,R))}});const h=new $s(s);return new M2(c,h,i.fieldTransforms)}function xO(n,e,t,r,i,s){const c=n.da(1,e,t),h=[kO(e,r,t)],p=[i];if(s.length%2!=0)throw new Be(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<s.length;R+=2)h.push(kO(e,s[R])),p.push(s[R+1]);const y=[],C=Bi.empty();for(let R=h.length-1;R>=0;--R)if(!P2(y,h[R])){const V=h[R];let H=p[R];H=(0,ne.m9)(H);const Q=c.ca(V);if(H instanceof $b)y.push(V);else{const ye=rp(H,Q);null!=ye&&(y.push(V),C.set(V,ye))}}const S=new $s(y);return new M2(C,S,c.fieldTransforms)}function k2(n,e,t,r=!1){return rp(t,n.da(r?4:3,e))}function rp(n,e){if(N2(n=(0,ne.m9)(n)))return RO("Unsupported field value:",e,n),O2(n,e);if(n instanceof tp)return function(t,r){if(!x2(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const c of t){let h=rp(c,r.aa(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,ne.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yB(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Dr.fromDate(t);return{timestampValue:Rm(r.yt,i)}}if(t instanceof Dr){const i=new Dr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Rm(r.yt,i)}}if(t instanceof yD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ic)return{bytesValue:BB(r.yt,t._byteString)};if(t instanceof vr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:GR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${fD(t)}`)}(n,e)}function O2(n,e){const t={};return $V(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Uf(n,(r,i)=>{const s=rp(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function N2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Dr||n instanceof yD||n instanceof ic||n instanceof vr||n instanceof tp)}function RO(n,e,t){if(!N2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=fD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function kO(n,e,t){if((e=(0,ne.m9)(e))instanceof ou)return e._internalPath;if("string"==typeof e)return wD(n,e);throw ED("Field path arguments must be of type string or ",n,!1,void 0,t)}const O6=new RegExp("[~\\*/\\[\\]]");function wD(n,e,t){if(e.search(O6)>=0)throw ED(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ou(...e.split("."))._internalPath}catch{throw ED(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ED(n,e,t,r,i){const s=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new Be(ve.INVALID_ARGUMENT,h+n+p)}function P2(n,e){return n.some(t=>t.isEqual(e))}class zb{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new N6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(CD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class N6 extends zb{data(){return super.data()}}function CD(n,e){return"string"==typeof e?wD(n,e):e instanceof ou?e._internalPath:e._delegate._internalPath}function F2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Be(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OO{}class Gb extends OO{}function Pd(n,e,...t){let r=[];e instanceof OO&&r.push(e),r=r.concat(t),function(i){const s=i.filter(h=>h instanceof Wm).length,c=i.filter(h=>h instanceof Wb).length;if(s>1||s>0&&c>0)throw new Be(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Wb extends Gb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Wb(e,t,r)}_apply(e){const t=this._parse(e);return U2(e._query,t),new Ui(e.firestore,e.converter,HR(e._query,t))}_parse(e){const t=np(e.firestore);return function(i,s,c,h,p,y,C){let S;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Be(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){B2(C,y);const R=[];for(const V of C)R.push(V2(h,i,V));S={arrayValue:{values:R}}}else S=V2(h,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||B2(C,y),S=k2(c,"where",C,"in"===y||"not-in"===y);return gn.create(p,y,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Wm extends OO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:$n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const c=i.getFlattenedFilters();for(const h of c)U2(s,h),s=HR(s,h)}(e._query,t),new Ui(e.firestore,e.converter,HR(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class NO extends Gb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new NO(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Be(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Be(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Im(i,s);return function(h,p){if(null===BR(h)){const y=$I(h);null!==y&&H2(0,y,p.field)}}(r,c),c}(e._query,this._field,this._direction);return new Ui(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new nu(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ID extends Gb{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ID(e,t,r)}_apply(e){return new Ui(e.firestore,e.converter,zI(e._query,this._limit,this._limitType))}}class DD extends Gb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new DD(e,t,r)}_apply(e){const t=L2(e,this.type,this._docOrFields,this._inclusive);return new Ui(e.firestore,e.converter,(i=t,new nu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class SD extends Gb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new SD(e,t,r)}_apply(e){const t=L2(e,this.type,this._docOrFields,this._inclusive);return new Ui(e.firestore,e.converter,(i=t,new nu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function L2(n,e,t,r){if(t[0]=(0,ne.m9)(t[0]),t[0]instanceof zb)return function(i,s,c,h,p){if(!h)throw new Be(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const C of Gf(i))if(C.field.isKeyField())y.push($f(s,h.key));else{const S=h.data.field(C.field);if(kR(S))throw new Be(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const R=C.field.canonicalString();throw new Be(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(S)}return new Ad(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=np(n.firestore);return function(s,c,h,p,y,C){const S=s.explicitOrderBy;if(y.length>S.length)throw new Be(ve.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let V=0;V<y.length;V++){const H=y[V];if(S[V].field.isKeyField()){if("string"!=typeof H)throw new Be(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof H}`);if(!UR(s)&&-1!==H.indexOf("/"))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${H}' contains a slash.`);const Q=s.path.child(In.fromString(H));if(!Qe.isDocumentKey(Q))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const ye=new Qe(Q);R.push($f(c,ye))}else{const Q=k2(h,p,H);R.push(Q)}}return new Ad(R,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function V2(n,e,t){if("string"==typeof(t=(0,ne.m9)(t))){if(""===t)throw new Be(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UR(e)&&-1!==t.indexOf("/"))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(In.fromString(t));if(!Qe.isDocumentKey(r))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $f(n,new Qe(r))}if(t instanceof vr)return $f(n,t._key);throw new Be(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fD(t)}.`)}function B2(n,e){if(!Array.isArray(n)||0===n.length)throw new Be(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Be(ve.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function U2(n,e){if(e.isInequality()){const r=$I(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=BR(n);null!==s&&H2(0,i,s)}const t=function(r,i){for(const s of r)for(const c of s.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Be(ve.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function H2(n,e,t){if(!t.isEqual(e))throw new Be(ve.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class PO{convertValue(e,t="none"){switch(jf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return Uf(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new yD(Ur(e.latitude),Ur(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=GV(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mb(e));default:return null}}convertTimestamp(e){const t=Dd(e);return new Dr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=In.fromString(e);It(YB(r));const i=new Id(r.get(1),r.get(3)),s=new Qe(r.popFirst(5));return i.isEqual(t)||qr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function TD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class $6 extends PO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ic(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}class ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class au extends zb{constructor(e,t,r,i,s,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(CD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class qb extends au{data(e={}){return super.data(e)}}class Fd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ip(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qb(this._firestore,this._userDataWriter,r.key,r,new ip(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Be(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new qb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ip(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new qb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ip(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:z6(c.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function z6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function $2(n,e){return n instanceof au&&e instanceof au?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fd&&e instanceof Fd&&n._firestore===e._firestore&&yO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ld extends PO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ic(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}function z2(n,e,t){n=mn(n,vr);const r=mn(n.firestore,br),i=TD(n.converter,e,t);return qm(r,[bD(np(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Sr.none())])}function G2(n,e,t,...r){n=mn(n,vr);const i=mn(n.firestore,br),s=np(i);let c;return c="string"==typeof(e=(0,ne.m9)(e))||e instanceof ou?xO(s,"updateDoc",n._key,e,t,r):MO(s,"updateDoc",n._key,e),qm(i,[c.toMutation(n._key,Sr.exists(!0))])}function W2(n,...e){var t,r,i;n=(0,ne.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||TO(e[c])||(s=e[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(TO(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let p,y,C;if(n instanceof vr)y=mn(n.firestore,br),C=Sm(n._key.path),p={next:S=>{e[c]&&e[c](FO(y,n,S))},error:e[c+1],complete:e[c+2]};else{const S=mn(n,Ui);y=mn(S.firestore,br),C=S._query;const R=new Ld(y);p={next:V=>{e[c]&&e[c](new Fd(y,R,S,V))},error:e[c+1],complete:e[c+2]},F2(n._query)}return function(S,R,V,H){const Q=new gD(H),ye=new zk(R,Q,V);return S.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return Bk(yield Gm(S),ye)})),()=>{Q.bc(),S.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return Hk(yield Gm(S),ye)}))}}(Yr(y),C,h,p)}function qm(n,e){return function(t,r){const i=new fi;return t.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function Vq(n,e,t){return Yk.apply(this,arguments)}(yield DO(t),r,i)})),i.promise}(Yr(n),e)}function FO(n,e,t){const r=t.docs.get(e._key),i=new Ld(n);return new au(n,i,e._key,r,new ip(t.hasPendingWrites,t.fromCache),e.converter)}const e4={maxAttempts:5};class q2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=np(e)}set(e,t,r){this._verifyNotCommitted();const i=Vd(e,this._firestore),s=TD(i.converter,t,r),c=bD(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Sr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Vd(e,this._firestore);let c;return c="string"==typeof(t=(0,ne.m9)(t))||t instanceof ou?xO(this._dataReader,"WriteBatch.update",s._key,t,r,i):MO(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(c.toMutation(s._key,Sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vd(e,this._firestore);return this._mutations=this._mutations.concat(new xm(t._key,Sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vd(n,e){if((n=(0,ne.m9)(n)).firestore!==e)throw new Be(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class t4 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=np(e)}get(e){const t=Vd(e,this._firestore),r=new $6(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const s=i[0];if(s.isFoundDocument())return new zb(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new zb(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=Vd(e,this._firestore),s=TD(i.converter,t,r),c=bD(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const s=Vd(e,this._firestore);let c;return c="string"==typeof(t=(0,ne.m9)(t))||t instanceof ou?xO(this._dataReader,"Transaction.update",s._key,t,r,i):MO(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,c),this}delete(e){const t=Vd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Vd(e,this._firestore),r=new Ld(this._firestore);return super.get(e).then(i=>new au(this._firestore,r,t._key,i._document,new ip(!1,!1),t.converter))}}function LO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Y2(){if(typeof Uint8Array>"u")throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function Z2(){if(!function TW(){return typeof atob<"u"}())throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){bm=ns.SDK_VERSION,(0,ns._registerComponent)(new hm.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),c=new br(new pW(t.getProvider("auth-internal")),new _W(t.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Be(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(h.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(kV,"3.8.1",n),(0,ns.registerVersion)(kV,"3.8.1","esm2017")}();class Kb{constructor(e){this._delegate=e}static fromBase64String(e){return Z2(),new Kb(ic.fromBase64String(e))}static fromUint8Array(e){return Y2(),new Kb(ic.fromUint8Array(e))}toBase64(){return Z2(),this._delegate.toBase64()}toUint8Array(){return Y2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function VO(n){return function u4(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class d4{enableIndexedDbPersistence(e,t){return function v6(n,e){A2(n=mn(n,br));const t=Yr(n),r=n._freezeSettings(),i=new mO;return T2(t,i,new c2(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function b6(n){A2(n=mn(n,br));const e=Yr(n),t=n._freezeSettings(),r=new mO;return T2(e,r,new e6(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function w6(n){if(n._initialized&&!n._terminated)throw new Be(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new fi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{yield(t=(0,De.Z)(function*(r){if(!ml.C())return Promise.resolve();const i=r+"main";yield ml.delete(i)}),function(r){return t.apply(this,arguments)})(ck(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Q2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Id||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){m2(this._delegate,e,t,r)}enableNetwork(){return function C6(n){return function l6(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield E2(n),t=yield IO(n);return e.setNetworkEnabled(!0),function(r){const i=tt(r);return i._u.delete(0),Ub(i)}(t)}))}(Yr(n=mn(n,br)))}(this._delegate)}disableNetwork(){return function I6(n){return function c6(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield E2(n),t=yield IO(n);return e.setNetworkEnabled(!1),(r=(0,De.Z)(function*(i){const s=tt(i);s._u.add(0),yield Vm(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Yr(n=mn(n,br)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,u2("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function E6(n){return function(e){const t=new fi;return e.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function jq(n,e){return eO.apply(this,arguments)}(yield DO(e),t)})),t.promise}(Yr(n=mn(n,br)))}(this._delegate)}onSnapshotsInSync(e){return function J6(n,e){return function h6(n,e){const t=new gD(e);return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield Gm(n),i=t,tt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield Gm(n),i=t,void tt(r).Ru.delete(i);var r,i}))}}(Yr(n=mn(n,br)),TO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Km(this,_2(this._delegate,e))}catch(t){throw Cs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ba(this,pD(this._delegate,e))}catch(t){throw Cs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Is(this,function t6(n,e){if(n=mn(n,jb),_O("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Be(ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ui(n,null,(t=e,new nu(In.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Cs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function n4(n,e,t){n=mn(n,br);const r=Object.assign(Object.assign({},e4),t);return function(i){if(i.maxAttempts<1)throw new Be(ve.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,c){const h=new fi;return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){const p=yield function C2(n){return mD(n).then(e=>e.datastore)}(i);new o6(i.asyncQueue,p,c,s,h).run()})),h.promise}(Yr(n),i=>e(new t4(n,i)),r)}(this._delegate,t=>e(new X2(this,t)))}batch(){return Yr(this._delegate),new J2(new q2(this._delegate,e=>qm(this._delegate,e)))}loadBundle(e){return function D6(n,e){const t=Yr(n=mn(n,br)),r=new m6;return function f6(n,e,t,r){const i=function(s,c){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return v2(p,y);if(p instanceof ArrayBuffer)return v2(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new n6(p,c);var p}(t,Bb(e));n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){!function Jq(n,e,t){const r=tt(n);var i;(i=(0,De.Z)(function*(s,c,h){try{const p=yield c.getMetadata();if(yield function(R,V){const H=tt(R),Q=Kr(V.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",ye=>H.Ns.getBundleMetadata(ye,V.id)).then(ye=>!!ye&&ye.createTime.compareTo(Q)>=0)}(s.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=p).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(XU(p));const y=new kq(p,s.localStore,c.yt);let C=yield c.mc();for(;C;){const R=yield y.Fu(C);R&&h._updateProgress(R),C=yield c.mc()}const S=yield y.complete();return yield su(s,S.Lu,void 0),yield function(R,V){const H=tt(R);return H.persistence.runTransaction("Save bundle","readwrite",Q=>H.Ns.saveBundleMetadata(Q,V))}(s.localStore,p),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(p){return Lf("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var R}),function(s,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield DO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function S6(n,e){return function p6(n,e){return n.asyncQueue.enqueue((0,De.Z)(function*(){return function(t,r){const i=tt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield _D(n),e)}))}(Yr(n=mn(n,br)),e).then(t=>t?new Ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Is(this,t):null)}}class AD extends PO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kb(new ic(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ba.forKey(t,this.firestore,null)}}class X2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}get(e){const t=op(e);return this._delegate.get(t).then(r=>new Yb(this._firestore,new au(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=op(e);return r?(LO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=op(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=op(e);return this._delegate.delete(t),this}}class J2{constructor(e){this._delegate=e}set(e,t,r){const i=op(e);return r?(LO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=op(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=op(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new qb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zb(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new sp(e,new AD(e),t),i.set(t,s)),s}}sp.INSTANCES=new WeakMap;class ba{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ba(t,new vr(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new ba(t,new vr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Km(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Km(this.firestore,_2(this._delegate,e))}catch(t){throw Cs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ne.m9)(e))instanceof vr&&y2(this._delegate,e)}set(e,t){t=LO("DocumentReference.set",t);try{return t?z2(this._delegate,e,t):z2(this._delegate,e)}catch(r){throw Cs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?G2(this._delegate,e):G2(this._delegate,e,t,...r)}catch(i){throw Cs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Q6(n){return qm(mn(n.firestore,br),[new xm(n._key,Sr.none())])}(this._delegate)}onSnapshot(...e){const t=eH(e),r=tH(e,i=>new Yb(this.firestore,new au(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return W2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function W6(n){n=mn(n,vr);const e=mn(n.firestore,br),t=Yr(e),r=new Ld(e);return function u6(n,e){const t=new fi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,s,c){try{const h=yield function(p,y){const C=tt(p);return C.persistence.runTransaction("read document","readonly",S=>C.localDocuments.getDocument(S,y))}(i,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Be(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=Hm(h,`Failed to get document '${s} from cache`);c.reject(p)}}),function(i,s,c){return r.apply(this,arguments)})(yield _D(n),e,t);var r})),t.promise}(t,n._key).then(i=>new au(e,r,n._key,i,new ip(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function q6(n){n=mn(n,vr);const e=mn(n.firestore,br);return I2(Yr(e),n._key,{source:"server"}).then(t=>FO(e,n,t))}(this._delegate):function G6(n){n=mn(n,vr);const e=mn(n.firestore,br);return I2(Yr(e),n._key).then(t=>FO(e,n,t))}(this._delegate),t.then(r=>new Yb(this.firestore,new au(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ba(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}function Cs(n,e,t){return n.message=n.message.replace(e,t),n}function eH(n){for(const e of n)if("object"==typeof e&&!VO(e))return e;return{}}function tH(n,e){var t,r;let i;return i=VO(n[0])?n[0]:VO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Yb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ba(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $2(this._delegate,e._delegate)}}class Zb extends Yb{data(e){const t=this._delegate.data(e);return function dW(n,e){n||ht()}(void 0!==t),t}}class Is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}where(e,t,r){try{return new Is(this.firestore,Pd(this._delegate,function P6(n,e,t){const r=e,i=CD("where",n);return Wb._create(i,r,t)}(e,t,r)))}catch(i){throw Cs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Is(this.firestore,Pd(this._delegate,function F6(n,e="asc"){const t=e,r=CD("orderBy",n);return NO._create(r,t)}(e,t)))}catch(r){throw Cs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Is(this.firestore,Pd(this._delegate,function L6(n){return f2("limit",n),ID._create("limit",n,"F")}(e)))}catch(t){throw Cs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Is(this.firestore,Pd(this._delegate,function V6(n){return f2("limitToLast",n),ID._create("limitToLast",n,"L")}(e)))}catch(t){throw Cs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Is(this.firestore,Pd(this._delegate,function B6(...n){return DD._create("startAt",n,!0)}(...e)))}catch(t){throw Cs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Is(this.firestore,Pd(this._delegate,function U6(...n){return DD._create("startAfter",n,!1)}(...e)))}catch(t){throw Cs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Is(this.firestore,Pd(this._delegate,function H6(...n){return SD._create("endBefore",n,!1)}(...e)))}catch(t){throw Cs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Is(this.firestore,Pd(this._delegate,function j6(...n){return SD._create("endAt",n,!0)}(...e)))}catch(t){throw Cs(t,"endAt()","Query.endAt()")}}isEqual(e){return yO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Y6(n){n=mn(n,Ui);const e=mn(n.firestore,br),t=Yr(e),r=new Ld(e);return function d6(n,e){const t=new fi;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,s,c){try{const h=yield aD(i,s,!0),p=new t2(s,h.Hi),y=p.Wu(h.documents),C=p.applyChanges(y,!1);c.resolve(C.snapshot)}catch(h){const p=Hm(h,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(i,s,c){return r.apply(this,arguments)})(yield _D(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Fd(e,r,n,i))}(this._delegate):"server"===e?.source?function Z6(n){n=mn(n,Ui);const e=mn(n.firestore,br),t=Yr(e),r=new Ld(e);return D2(t,n._query,{source:"server"}).then(i=>new Fd(e,r,n,i))}(this._delegate):function K6(n){n=mn(n,Ui);const e=mn(n.firestore,br),t=Yr(e),r=new Ld(e);return F2(n._query),D2(t,n._query).then(i=>new Fd(e,r,n,i))}(this._delegate),t.then(r=>new BO(this.firestore,new Fd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=eH(e),r=tH(e,i=>new BO(this.firestore,new Fd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return W2(this._delegate,t,r)}withConverter(e){return new Is(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}class f4{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class BO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new f4(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Zb(this._firestore,r))})}isEqual(e){return $2(this._delegate,e._delegate)}}class Km extends Is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ba(this.firestore,e):null}doc(e){try{return new ba(this.firestore,void 0===e?pD(this._delegate):pD(this._delegate,e))}catch(t){throw Cs(t,"doc()","CollectionReference.doc()")}}add(e){return function X6(n,e){const t=mn(n.firestore,br),r=pD(n),i=TD(n.converter,e);return qm(t,[bD(np(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ba(this.firestore,t))}isEqual(e){return y2(this._delegate,e._delegate)}withConverter(e){return new Km(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}function op(n){return mn(n,vr)}class UO{constructor(...e){this._delegate=new ou(...e)}static documentId(){return new UO(Br.keyField().canonicalString())}isEqual(e){return(e=(0,ne.m9)(e))instanceof ou&&this._delegate._internalPath.isEqual(e._internalPath)}}class ap{constructor(e){this._delegate=e}static serverTimestamp(){const e=function i4(){return new AO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ap(e)}static delete(){const e=function r4(){return new $b("deleteField")}();return e._methodName="FieldValue.delete",new ap(e)}static arrayUnion(...e){const t=function s4(...n){return new x6("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ap(t)}static arrayRemove(...e){const t=function o4(...n){return new R6("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ap(t)}static increment(e){const t=function a4(n){return new k6("increment",n)}(e);return t._methodName="FieldValue.increment",new ap(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const p4={Firestore:Q2,GeoPoint:yD,Timestamp:Dr,Blob:Kb,Transaction:X2,WriteBatch:J2,DocumentReference:ba,DocumentSnapshot:Yb,Query:Is,QueryDocumentSnapshot:Zb,QuerySnapshot:BO,CollectionReference:Km,FieldPath:UO,FieldValue:ap,setLogLevel:function h4(n){!function uW(n){wd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function m4(n){(function g4(n,e){n.INTERNAL.registerComponent(new hm.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},p4)))})(n,(e,t)=>new Q2(e,t,new d4)),n.registerVersion("@firebase/firestore-compat","0.3.1")}(Kx.Z);var MD=L(5363),_4=L(6063);class y4 extends an.x{constructor(e=1/0,t=1/0,r=_4.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:c}=this;t||(r.push(e),!i&&r.push(s.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let c=0;c<s.length&&!e.closed;c+=r?1:2)e.next(s[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const c=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var nH=L(3099);function rH(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,nH.B)({connector:()=>new y4(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function iH(n,e){return(0,zr.m)(e)?pr(()=>n,e):pr(()=>n)}var HO=L(9468),lu=L(259);class lp{constructor(e){return e}}class xD{constructor(){return(0,lu.C6)()}}const jO=new d.OlP("angularfire2._apps"),b4={provide:lp,useFactory:function v4(n){return n&&1===n.length?n[0]:new lp((0,lu.Mq)())},deps:[[new d.FiY,jO]]},w4={provide:xD,deps:[[new d.FiY,jO]]};function E4(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new lp(r)}}let C4=(()=>{class n{constructor(t){(0,lu.KN)("angularfire",pn.q4.full,"core"),(0,lu.KN)("angularfire",pn.q4.full,"app"),(0,lu.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[b4,w4]}),n})();function I4(n,...e){return{ngModule:C4,providers:[{provide:jO,useFactory:E4(n),multi:!0,deps:[d.R0b,d.zs3,pn.HU,...e]}]}}const D4=(0,pn.u3)(lu.ZF,!0),$O=new Map,sH={activated:!1,tokenObservers:[]},S4={initialized:!1,enabled:!1};function Hi(n){return $O.get(n)||Object.assign({},sH)}function RD(){return S4}class k4{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,De.Z)(function*(){t.stop();try{t.pending=new ne.BH,yield function O4(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ne.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ds=new ne.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function aH(n){if(!Hi(n).activated)throw Ds.create("use-before-activation",{appName:n.name})}function WO(n,e){return qO.apply(this,arguments)}function qO(){return qO=(0,De.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const s={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,s)}catch(S){throw Ds.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==c.status)throw Ds.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(S){throw Ds.create("fetch-parse-error",{originalErrorMessage:S?.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),C=Date.now();return{token:h.token,expireTimeMillis:C+y,issuedAtTimeMillis:C}}),qO.apply(this,arguments)}function L4(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Qb="firebase-app-check-store";let ND=null;function cH(){return ND||(ND=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ds.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Qb,{keyPath:"compositeKey"})}}catch(t){e(Ds.create("storage-open",{originalErrorMessage:t?.message}))}}),ND)}function KO(){return KO=(0,De.Z)(function*(n,e){const r=(yield cH()).transaction(Qb,"readwrite"),s=r.objectStore(Qb).put({compositeKey:n,value:e});return new Promise((c,h)=>{s.onsuccess=p=>{c()},r.onerror=p=>{var y;h(Ds.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),KO.apply(this,arguments)}const Xb=new pl.Yd("@firebase/app-check");function QO(n,e){return(0,ne.hl)()?function H4(n,e){return function uH(n,e){return KO.apply(this,arguments)}(function hH(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Xb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function fH(){return RD().enabled}function pH(){return JO.apply(this,arguments)}function JO(){return JO=(0,De.Z)(function*(){const n=RD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),JO.apply(this,arguments)}const q4={error:"UNKNOWN_ERROR"};function K4(n){return ne.US.encodeString(JSON.stringify(n),!1)}function PD(n){return eN.apply(this,arguments)}function eN(){return eN=(0,De.Z)(function*(n,e=!1){const t=n.app;aH(t);const r=Hi(t);let s,i=r.token;if(i&&!Ym(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(Ym(p)?i=p:yield QO(t,void 0))}if(!e&&i&&Ym(i))return{token:i.token};let h,c=!1;if(fH()){r.exchangeTokenPromise||(r.exchangeTokenPromise=WO(L4(t,yield pH()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const p=yield r.exchangeTokenPromise;return yield QO(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Hi(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Xb.warn(p.message):Xb.error(p),s=p}return i?s?h=Ym(i)?{token:i.token,internalError:s}:_H(s):(h={token:i.token},r.token=i,yield QO(t,i)):h=_H(s),c&&mH(t,h),h}),eN.apply(this,arguments)}function nN(n,e){const t=Hi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function gH(n){const{app:e}=n,t=Hi(e);let r=t.tokenRefresher;r||(r=function Y4(n){const{app:e}=n;return new k4((0,De.Z)(function*(){let r;if(r=Hi(e).token?yield PD(n,!0):yield PD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Hi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function mH(n,e){const t=Hi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Ym(n){return n.expireTimeMillis-Date.now()>0}function _H(n){return{token:K4(q4),error:n}}class Z4{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Hi(this.app);for(const t of e)nN(this.app,t.next);return Promise.resolve()}}const DH="app-check-internal";!function uK(){(0,ns._registerComponent)(new hm.wA("app-check",n=>function Q4(n,e){return new Z4(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(DH).initialize()})),(0,ns._registerComponent)(new hm.wA(DH,n=>function X4(n){return{getToken:e=>PD(n,e),addTokenListener:e=>function tN(n,e,t,r){const{app:i}=n,s=Hi(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Ym(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),gH(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>gH(n))}(n,"INTERNAL",e),removeTokenListener:e=>nN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ns.registerVersion)("@firebase/app-check","0.6.1")}();class Zm{constructor(){return(0,pn.vb)("app-check")}}typeof window<"u"&&window,L(9260);const TH=new d.OlP("angularfire2.auth.use-emulator"),AH=new d.OlP("angularfire2.auth.settings"),MH=new d.OlP("angularfire2.auth.tenant-id"),xH=new d.OlP("angularfire2.auth.langugage-code"),RH=new d.OlP("angularfire2.auth.use-device-language"),kH=new d.OlP("angularfire.auth.persistence"),OH=(n,e,t,r,i,s,c,h)=>(0,va.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),c)for(const[y,C]of Object.entries(c))p.settings[y]=C;return h&&p.setPersistence(h),p},[t,r,i,s,c,h]);let NH=(()=>{class n{constructor(t,r,i,s,c,h,p,y,C,S,R,V){const H=new an.x,Q=st(void 0).pipe((0,MD.Q)(c.outsideAngular),pr(()=>s.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,9568)))),(0,it.U)(()=>(0,va.on)(t,s,r)),(0,it.U)(ye=>OH(ye,s,h,y,C,S,p,R)),rH({bufferSize:1,refCount:!1}));if(Lo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{Q.pipe(J()).subscribe();const Ye=Q.pipe(pr(gt=>gt.getRedirectResult().then(Nt=>Nt,()=>null)),pn.iC,rH({bufferSize:1,refCount:!1})),ct=Q.pipe(pr(gt=>new sr.y(Nt=>({unsubscribe:s.runOutsideAngular(()=>gt.onAuthStateChanged(Bt=>Nt.next(Bt),Bt=>Nt.error(Bt),()=>Nt.complete()))})))),pt=Q.pipe(pr(gt=>new sr.y(Nt=>({unsubscribe:s.runOutsideAngular(()=>gt.onIdTokenChanged(Bt=>Nt.next(Bt),Bt=>Nt.error(Bt),()=>Nt.complete()))}))));this.authState=Ye.pipe(iH(ct),(0,HO.R)(c.outsideAngular),(0,MD.Q)(c.insideAngular)),this.user=Ye.pipe(iH(pt),(0,HO.R)(c.outsideAngular),(0,MD.Q)(c.insideAngular)),this.idToken=this.user.pipe(pr(gt=>gt?(0,yn.D)(gt.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(pr(gt=>gt?(0,yn.D)(gt.getIdTokenResult()):st(null))),this.credential=(0,uf.T)(Ye,H,this.authState.pipe(gr(gt=>!gt))).pipe((0,it.U)(gt=>gt?.user?gt:null),(0,HO.R)(c.outsideAngular),(0,MD.Q)(c.insideAngular))}return(0,va.pX)(this,Q,s,{spy:{apply:(ye,Ye,ct)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&ct.then(pt=>H.next(pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(va.Dh),d.LFG(va.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(TH,8),d.LFG(AH,8),d.LFG(MH,8),d.LFG(xH,8),d.LFG(RH,8),d.LFG(kH,8),d.LFG(Zm,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function PH(n,e){return function mK(n,e=fy.z){return new sr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function aN(n,e){return PH(n,e).pipe((0,it.U)(t=>({payload:t,type:"query"})))}function LD(n,e){return aN(n,e).pipe(ui(void 0),hI(),(0,it.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const p=i.find(C=>C.doc.ref.isEqual(c.ref)),y=t?.payload.docs.find(C=>C.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function FH(n,e,t){return LD(n,t).pipe(bt((r,i)=>function yK(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function vK(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return lN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),X0(),(0,it.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function lN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function LH(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class VH{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=LD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,it.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ui(void 0),hI(),gr(([r,i])=>i.length>0||!r),(0,it.U)(([r,i])=>i),pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=LH(e);return FH(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return aN(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pn.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(pn.iC)}add(e){return this.ref.add(e)}doc(e){return new BH(this.ref.doc(e),this.afs)}}class BH{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=UH(r,t);return new VH(i,s,this.afs)}snapshotChanges(){return function _K(n,e){return PH(n,e).pipe(ui(void 0),hI(),(0,it.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,it.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,yn.D)(this.ref.get(e)).pipe(pn.iC)}}class bK{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?LD(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),gr(t=>t.length>0),pn.iC):LD(this.query,this.afs.schedulers.outsideAngular).pipe(pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=LH(e);return FH(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return aN(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),pn.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(pn.iC)}}const wK=new d.OlP("angularfire2.enableFirestorePersistence"),EK=new d.OlP("angularfire2.firestore.persistenceSettings"),CK=new d.OlP("angularfire2.firestore.settings"),IK=new d.OlP("angularfire2.firestore.use-emulator");function UH(n,e=(t=>t)){return{query:e(n),ref:n}}let HH=(()=>{class n{constructor(t,r,i,s,c,h,p,y,C,S,R,V,H,Q,ye,Ye,ct){this.schedulers=p;const pt=(0,va.on)(t,h,r),gt=C;S&&OH(pt,h,R,H,Q,ye,V,Ye),[this.firestore,this.persistenceEnabled$]=(0,va.cc)(`${pt.name}.firestore`,"AngularFirestore",pt.name,()=>{const Nt=h.runOutsideAngular(()=>pt.firestore());if(s&&Nt.settings(s),gt&&Nt.useEmulator(...gt),i&&!Lo(c)){const Bt=()=>{try{return(0,yn.D)(Nt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(vn){return typeof console<"u"&&console.warn(vn),st(!1)}};return[Nt,h.runOutsideAngular(Bt)]}return[Nt,st(!1)]},[s,gt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:c}=UH(i,r),h=this.schedulers.ngZone.run(()=>s);return new VH(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),s=this.firestore.collectionGroup(t);return new bK(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new BH(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(va.Dh),d.LFG(va.xv,8),d.LFG(wK,8),d.LFG(CK,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(EK,8),d.LFG(IK,8),d.LFG(NH,8),d.LFG(TH,8),d.LFG(AH,8),d.LFG(MH,8),d.LFG(xH,8),d.LFG(RH,8),d.LFG(kH,8),d.LFG(Zm,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class DK{}class Bd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Bd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Bd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Bd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===s.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class SK{encodeKey(e){return jH(e)}encodeValue(e){return jH(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const AK=/%(\d[a-f0-9])/gi,MK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function jH(n){return encodeURIComponent(n).replace(AK,(e,t)=>MK[t]??e)}function VD(n){return`${n}`}class Ud{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new SK,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function TK(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[c,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(c)||[];p.push(h),t.set(c,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(VD):[VD(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ud({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(VD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(VD(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class xK{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function $H(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function zH(n){return typeof Blob<"u"&&n instanceof Blob}function GH(n){return typeof FormData<"u"&&n instanceof FormData}class Jb{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function RK(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Bd),this.context||(this.context=new xK),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new Ud,this.urlWithParams=t}serializeBody(){return null===this.body?null:$H(this.body)||zH(this.body)||GH(this.body)||function kK(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ud?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||GH(this.body)?null:zH(this.body)?this.body.type||null:$H(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ud?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,y=e.params||this.params;const C=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((S,R)=>S.set(R,e.setHeaders[R]),p)),e.setParams&&(y=Object.keys(e.setParams).reduce((S,R)=>S.set(R,e.setParams[R]),y)),new Jb(t,r,s,{params:y,headers:p,context:C,reportProgress:h,responseType:i,withCredentials:c})}}var ji=(()=>((ji=ji||{})[ji.Sent=0]="Sent",ji[ji.UploadProgress=1]="UploadProgress",ji[ji.ResponseHeader=2]="ResponseHeader",ji[ji.DownloadProgress=3]="DownloadProgress",ji[ji.Response=4]="Response",ji[ji.User=5]="User",ji))();class cN extends class OK{constructor(e,t=200,r="OK"){this.headers=e.headers||new Bd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=ji.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new cN({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function uN(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let qH=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Jb)s=t;else{let p,y;p=i.headers instanceof Bd?i.headers:new Bd(i.headers),i.params&&(y=i.params instanceof Ud?i.params:new Ud({fromObject:i.params})),s=new Jb(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=st(s).pipe(ue(p=>this.handler.handle(p)));if(t instanceof Jb||"events"===i.observe)return c;const h=c.pipe(gr(p=>p instanceof cN));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,it.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,it.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,it.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,it.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ud).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,uN(i,r))}post(t,r,i={}){return this.request("POST",t,uN(i,r))}put(t,r,i={}){return this.request("PUT",t,uN(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(DK))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const PK=["*"];let BD;function ew(n){return function FK(){if(void 0===BD&&(BD=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(BD=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return BD}()?.createHTML(n)||n}function KH(n){return Error(`Unable to find icon with the name "${n}"`)}function YH(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function ZH(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class cp{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let UD=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new cp(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const c=this._sanitizer.sanitize(d.q3G.HTML,i);if(!c)throw ZH(i);const h=ew(c);return this._addSvgIconConfig(t,r,new cp("",h,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new cp(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(d.q3G.HTML,r);if(!s)throw ZH(r);const c=ew(s);return this._addSvgIconSetConfig(t,new cp("",c,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,t);if(!r)throw YH(t);const i=this._cachedIconsByUrl.get(r);return i?st(HD(i)):this._loadSvgIconFromConfig(new cp(t,null)).pipe((0,Ie.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,it.U)(s=>HD(s)))}getNamedSvgIcon(t,r=""){const i=QH(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(r);return c?this._getSvgFromIconSetConfigs(t,c):Ps(KH(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?st(HD(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,it.U)(r=>HD(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?st(i):tx(r.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Ze(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(d.q3G.RESOURCE_URL,c.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),st(null)})))).pipe((0,it.U)(()=>{const c=this._extractIconWithNameFromAnySet(t,r);if(!c)throw KH(t);return c}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const c=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(c,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Ie.b)(r=>t.svgText=r),(0,it.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?st(null):this._fetchIcon(t).pipe((0,Ie.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,i);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),i);const h=this._svgElementFromString(ew("<svg></svg>"));return h.appendChild(c),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(ew("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:c,value:h}=i[s];"id"!==c&&r.setAttribute(c,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw function LK(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const c=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,r);if(!c)throw YH(r);const h=this._inProgressUrlFetches.get(c);if(h)return h;const p=this._httpClient.get(c,{responseType:"text",withCredentials:s}).pipe((0,it.U)(y=>ew(y)),Fs(()=>this._inProgressUrlFetches.delete(c)),(0,nH.B)());return this._inProgressUrlFetches.set(c,p),p}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(QH(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return BK(s)?new cp(s.url,null,s.options):new cp(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qH,8),d.LFG(lo),d.LFG(ce,8),d.LFG(d.qLn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function HD(n){return n.cloneNode(!0)}function QH(n,e){return n+":"+e}function BK(n){return!(!n.url||!n.options)}const UK=jy(class{constructor(n){this._elementRef=n}}),HK=new d.OlP("MAT_ICON_DEFAULT_OPTIONS"),jK=new d.OlP("mat-icon-location",{providedIn:"root",factory:function $K(){const n=(0,d.f3M)(ce),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),XH=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],zK=XH.map(n=>`[${n}]`).join(", "),GK=/^url\(['"]?#(.*?)['"]?\)$/;let WK=(()=>{class n extends UK{constructor(t,r,i,s,c,h){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=c,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=sa.w0.EMPTY,h&&(h.color&&(this.color=this.defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Wl(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(c=>{s.setAttribute(c.name,`url('${t}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(zK),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)XH.forEach(c=>{const h=r[s],p=h.getAttribute(c),y=p?p.match(GK):null;if(y){let C=i.get(h);C||(C=[],i.set(h,C)),C.push({name:c,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(hn(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(UD),d.$8M("aria-hidden"),d.Y36(jK),d.Y36(d.qLn),d.Y36(HK,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(d.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),d.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[d.qOj],ngContentSelectors:PK,decls:1,vars:0,template:function(t,r){1&t&&(d.F$t(),d.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),qK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ys,ys]}),n})(),KK=(()=>{class n{constructor(){this.image="player1.png",this.playerActive=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-player"]],inputs:{name:"name",image:"image",playerActive:"playerActive"},decls:4,vars:4,consts:[[1,"player"],[3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"img",1),d.TgZ(2,"span"),d._uU(3),d.qZA()()),2&t&&(d.ekj("player-active",r.playerActive),d.xp6(1),d.MGl("src","/assets/img/profile/",r.image,"",d.LSH),d.xp6(2),d.Oqu(r.name))},styles:[".player[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#999;width:auto;border-top-left-radius:50px;border-bottom-left-radius:50px;border-right:0;box-shadow:-2px 3px 8px #0006}span[_ngcontent-%COMP%]{font-size:2rem;margin:0 1.5rem;color:#000}img[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:cover}.player-active[_ngcontent-%COMP%]{background-color:#ffa73b;border:4px solid #ffdfb7;border-right:0;box-shadow:-4px 10px 15px #0009;transform:scale(1.1)}"]}),n})();const YK=["*",[["mat-card-footer"]]],ZK=["*","mat-card-footer"];let QK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),XK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),JK=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:ZK,decls:2,vars:0,template:function(t,r){1&t&&(d.F$t(YK),d.Hsn(0),d.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),e8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ys,ys]}),n})(),t8=(()=>{class n{constructor(){this.cardAction=[{title:"Waterfall",description:"Everyone has to start drinking at the same time. As soon as player 1 stops drinking, player 2 may stop drinking. Player 3 may stop as soon as player 2 stops drinking, and so on."},{title:"You",description:"You decide who drinks"},{title:"Me",description:"Congrats! Drink a shot!"},{title:"Category",description:"Come up with a category (e.g. Colors). Each player must enumerate one item from the category."},{title:"Bust a jive",description:"Player 1 makes a dance move. Player 2 repeats the dance move and adds a second one. "},{title:"Chicks",description:"All girls drink."},{title:"Heaven",description:"Put your hands up! The last player drinks!"},{title:"Mate",description:"Pick a mate. Your mate must always drink when you drink and the other way around."},{title:"Thumbmaster",description:""},{title:"Men",description:"All men drink."},{title:"Quizmaster",description:""},{title:"Never have i ever...",description:"Say something you nnever did. Everyone who did it has to drink."},{title:"Rule",description:"Make a rule. Everyone needs to drink when he breaks the rule."}],this.title="",this.description=""}ngOnInit(){}ngOnChanges(){if(this.card){let t=+this.card.split("_")[1];this.title=this.cardAction[t-1].title,this.description=this.cardAction[t-1].description}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-game-text"]],inputs:{card:"card"},features:[d.TTD],decls:5,vars:2,template:function(t,r){1&t&&(d.TgZ(0,"mat-card")(1,"mat-card-title"),d._uU(2),d.qZA(),d.TgZ(3,"mat-card-content"),d._uU(4),d.qZA()()),2&t&&(d.xp6(2),d.Oqu(r.card?r.title:"Please add at least two players"),d.xp6(2),d.Oqu(r.card?r.description:"Then you can start by clicking on the stack of cards."))},dependencies:[JK,QK,XK]}),n})();const n8=function(n){return{"top.px":n}};function r8(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-player",10),d.NdJ("click",function(){const s=d.CHM(t).index,c=d.oxw();return d.KtG(c.editPlayer(s))}),d.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=d.oxw();d.Q6J("ngStyle",d.VKq(4,n8,80+90*r))("playerActive",r===i.game.currentPlayer)("image",i.game.player_images[r])("name",t)}}const i8=function(n){return{"right.px":n}};function s8(n,e){1&n&&d._UZ(0,"img",11),2&n&&d.Q6J("ngStyle",d.VKq(1,i8,10*e.index))}function o8(n,e){if(1&n&&d._UZ(0,"img",12),2&n){const t=e.$implicit,r=d.oxw();d.MGl("src","assets/img/cards/",t,".png",d.LSH),d.Q6J("ngClass",r.game.playedCards.length>1?null:"shadow")}}function a8(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"img",13),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.pickCard())}),d.qZA()}if(2&n){const t=d.oxw();d.MGl("src","assets/img/cards/",t.game.currentCard,".png",d.LSH)}}const l8=function(){return[0,1,2,3]},c8=[{path:"",component:(()=>{class n{constructor(t,r){this.firestore=t,this.router=r}ngOnInit(){}newGame(){let t=new ny;this.firestore.collection("games").add(t.toJson()).then(r=>{this.router.navigateByUrl("/game/"+r.id)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(HH),d.Y36(Wr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-start-screen"]],decls:6,vars:0,consts:[[1,"startscreen"],["src","assets/img/cards/aces.png"],[3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"img",1),d.TgZ(2,"h1"),d._uU(3,"House of Cards"),d.qZA(),d.TgZ(4,"a",2),d.NdJ("click",function(){return r.newGame()}),d._uU(5,"NEW GAME"),d.qZA()())},styles:[".startscreen[_ngcontent-%COMP%]{background:url(bg_start.6424c278356e14c7.png) repeat;background-size:250px;width:100vw;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff;font-family:Cambria,Cochin,Georgia,Times,Times New Roman,serif}.startscreen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50vh}.startscreen[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#fff;padding:5px 10px;border-radius:5px;font-size:1.5rem;color:green;font-weight:900;font-family:sans-serif;cursor:pointer}.startscreen[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background-color:#227b3570}"]}),n})()},{path:"game/:id",component:(()=>{class n{constructor(t,r,i,s){this.route=t,this.firestore=r,this.dialog=i,this.el=s}ngOnInit(){this.newGame(),this.route.params.subscribe(t=>{this.gameId=t.id,this.firestore.collection("games").doc(this.gameId).valueChanges().subscribe(r=>{console.log("Game update",r),this.game.currentPlayer=r.currentPlayer,this.game.playedCards=r.playedCards,this.game.players=r.players,this.game.player_images=r.player_images,this.game.stack=r.stack,this.game.pickCardAnimation=r.pickCardAnimtation,this.game.currentCard=r.currentCard})})}newGame(){this.game=new ny}pickCard(){this.game.players.length>1&&(this.game.pickCardAnimation||(this.game.currentCard=this.game.stack.pop(),this.game.pickCardAnimation=!0,setTimeout(()=>{this.game.currentPlayer++,this.game.currentPlayer=this.game.currentPlayer%this.game.players.length},1e3),this.saveGame(),setTimeout(()=>{this.game.playedCards.push(this.game.currentCard),this.game.pickCardAnimation=!1,this.saveGame()},1e3)))}editPlayer(t){console.log("Edit player",t),this.dialog.open(qx).afterClosed().subscribe(i=>{i&&("DELETE"==i||(console.log("Received change",i),this.game.player_images[t]=i,this.saveGame()))})}openDialog(){this.dialog.open(dI).afterClosed().subscribe(r=>{r&&r.length>0&&(this.game.players.push(r),this.game.player_images.push("player1.png"),this.saveGame())})}saveGame(){this.firestore.collection("games").doc(this.gameId).update(this.game.toJson())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Hl),d.Y36(HH),d.Y36(yf),d.Y36(d.SBq))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-game"]],decls:12,vars:7,consts:[["class","player-position",3,"ngStyle","playerActive","image","name","click",4,"ngFor","ngForOf"],[1,"field"],[1,"card-stack"],["class","shadow","src","assets/img/cards/card_cover.png","alt","back cards",3,"ngStyle",4,"ngFor","ngForOf"],["src","assets/img/cards/card_cover.png","alt","bottom card",2,"right","40px",3,"ngClass"],["src","assets/img/cards/card_cover.png","alt","pick card",1,"top-card",2,"right","40px",3,"click"],["class","played-card","style","right: 40px","alt","top card",3,"ngClass","src",4,"ngFor","ngForOf"],["class","pick-card","style","right: 40px","alt","top card",3,"src","click",4,"ngIf"],[1,"game-text",3,"card"],["mat-fab","","color","warn","aria-label","add button","autofocus","",1,"btn-add",3,"click"],[1,"player-position",3,"ngStyle","playerActive","image","name","click"],["src","assets/img/cards/card_cover.png","alt","back cards",1,"shadow",3,"ngStyle"],["alt","top card",1,"played-card",2,"right","40px",3,"ngClass","src"],["alt","top card",1,"pick-card",2,"right","40px",3,"src","click"]],template:function(t,r){1&t&&(d.YNc(0,r8,1,6,"app-player",0),d.TgZ(1,"div",1)(2,"div",2),d.YNc(3,s8,1,3,"img",3),d._UZ(4,"img",4),d.TgZ(5,"img",5),d.NdJ("click",function(){return r.pickCard()}),d.qZA(),d.YNc(6,o8,1,2,"img",6),d.YNc(7,a8,1,1,"img",7),d.qZA()(),d._UZ(8,"app-game-text",8),d.TgZ(9,"button",9),d.NdJ("click",function(){return r.openDialog()}),d.TgZ(10,"mat-icon"),d._uU(11,"add"),d.qZA()()),2&t&&(d.Q6J("ngForOf",r.game.players),d.xp6(3),d.Q6J("ngForOf",d.DdM(6,l8)),d.xp6(1),d.Q6J("ngClass",r.game.playedCards.length>1?"played-card shadow":null),d.xp6(2),d.Q6J("ngForOf",r.game.playedCards),d.xp6(1),d.Q6J("ngIf",r.game.pickCardAnimation),d.xp6(1),d.Q6J("card",r.game.currentCard))},dependencies:[_n,as,ir,El,tv,WK,KK,t8],styles:[".field[_ngcontent-%COMP%]{width:100vw;height:100vh;max-width:100vw;background:url(bg_start.6424c278356e14c7.png) repeat;background-size:250px;display:flex;justify-content:center;align-items:center}.card-stack[_ngcontent-%COMP%]{position:relative}.card-stack[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;max-width:120px}.shadow[_ngcontent-%COMP%]{box-shadow:-2px 10px 25px #00000080}.top-card[_ngcontent-%COMP%]{cursor:pointer;transition:all 125ms ease-in-out}.top-card[_ngcontent-%COMP%]:hover{transform:scale(1.1) translateY(-15px)}.played-card[_ngcontent-%COMP%]{transform:scale(1.3) translate(150px) translateY(-170px) rotate(-10deg)}.pick-card[_ngcontent-%COMP%]{animation:pick-card-animation 1s ease-in-out;transform:scale(1.3) translate(150px) translateY(-170px) rotate(-10deg)}@keyframes pick-card-animation{0%{transform:scale(1.1)}40%{transform:scale(1.7)}60%{transform:scale(1.7)}to{transform:scale(1.3) translate(150px) translateY(-170px) rotate(-10deg)}}.player-position[_ngcontent-%COMP%]{position:absolute;right:0;z-index:1}.btn-add[_ngcontent-%COMP%]{position:absolute;right:32px;bottom:32px}.game-text[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:0 100px;text-align:center;position:absolute;bottom:32px;left:32px;right:116px}"]}),n})()}];let u8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[T0.forRoot(c8),T0]}),n})(),d8=(()=>{class n{constructor(){this.title="house_of_cards"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Fc]}),n})();function JH(n){return new d.vHH(3e3,!1)}function W8(){return typeof window<"u"&&typeof window.document<"u"}function dN(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Hd(n){switch(n.length){case 0:return new mf;case 1:return n[0];default:return new Bg(n)}}function ej(n,e,t,r,i=new Map,s=new Map){const c=[],h=[];let p=-1,y=null;if(r.forEach(C=>{const S=C.get("offset"),R=S==p,V=R&&y||new Map;C.forEach((H,Q)=>{let ye=Q,Ye=H;if("offset"!==Q)switch(ye=e.normalizePropertyName(ye,c),Ye){case"!":Ye=i.get(Q);break;case cl:Ye=s.get(Q);break;default:Ye=e.normalizeStyleValue(Q,ye,Ye,c)}V.set(ye,Ye)}),R||h.push(V),y=V,p=S}),c.length)throw function N8(n){return new d.vHH(3502,!1)}();return h}function hN(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&fN(t,"start",n)));break;case"done":n.onDone(()=>r(t&&fN(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&fN(t,"destroy",n)))}}function fN(n,e,t){const s=pN(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(s._data=c),s}function pN(n,e,t,r,i="",s=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!c}}function So(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function tj(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let gN=(n,e)=>!1,nj=(n,e,t)=>[],rj=null;function mN(n){const e=n.parentNode||n.host;return e===rj?null:e}(dN()||typeof Element<"u")&&(W8()?(rj=(()=>document.documentElement)(),gN=(n,e)=>{for(;e;){if(e===n)return!0;e=mN(e)}return!1}):gN=(n,e)=>n.contains(e),nj=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let up=null,ij=!1;const sj=gN,oj=nj;let aj=(()=>{class n{validateStyleProperty(t){return function K8(n){up||(up=function Y8(){return typeof document<"u"?document.body:null}()||{},ij=!!up.style&&"WebkitAppearance"in up.style);let e=!0;return up.style&&!function q8(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in up.style,!e&&ij&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in up.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return sj(t,r)}getParentElement(t){return mN(t)}query(t,r,i){return oj(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,c,h=[],p){return new mf(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),_N=(()=>{class n{}return n.NOOP=new aj,n})();const yN="ng-enter",jD="ng-leave",$D="ng-trigger",zD=".ng-trigger",cj="ng-animating",vN=".ng-animating";function cu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:bN(parseFloat(e[1]),e[2])}function bN(n,e){return"s"===e?1e3*n:n}function GD(n,e,t){return n.hasOwnProperty("duration")?n:function X8(n,e,t){let i,s=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(JH()),{duration:0,delay:0,easing:""};i=bN(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=bN(parseFloat(p),h[4]));const y=h[5];y&&(c=y)}else i=n;if(!t){let h=!1,p=e.length;i<0&&(e.push(function h8(){return new d.vHH(3100,!1)}()),h=!0),s<0&&(e.push(function f8(){return new d.vHH(3101,!1)}()),h=!0),h&&e.splice(p,0,JH())}return{duration:i,delay:s,easing:c}}(n,e,t)}function tw(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function uj(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function jd(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function hj(n,e,t){return t?e+":"+t+";":""}function fj(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=hj(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=hj(0,n5(t),n.style[t]));n.setAttribute("style",e)}function sc(n,e,t){n.style&&(e.forEach((r,i)=>{const s=EN(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),dN()&&fj(n))}function dp(n,e){n.style&&(e.forEach((t,r)=>{const i=EN(r);n.style[i]=""}),dN()&&fj(n))}function nw(n){return Array.isArray(n)?1==n.length?n[0]:lC(n):n}const wN=new RegExp("{{\\s*(.+?)\\s*}}","g");function pj(n){let e=[];if("string"==typeof n){let t;for(;t=wN.exec(n);)e.push(t[1]);wN.lastIndex=0}return e}function rw(n,e,t){const r=n.toString(),i=r.replace(wN,(s,c)=>{let h=e[c];return null==h&&(t.push(function g8(n){return new d.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function WD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const t5=/-+([a-z0-9])/g;function EN(n){return n.replace(t5,(...e)=>e[1].toUpperCase())}function n5(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function To(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function m8(n){return new d.vHH(3004,!1)}()}}function gj(n,e){return window.getComputedStyle(n)[e]}function c5(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function u5(n,e,t){if(":"==n[0]){const p=function d5(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function x8(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function M8(n){return new d.vHH(3015,!1)}()),e;const i=r[1],s=r[2],c=r[3];e.push(mj(i,c));"<"==s[0]&&!("*"==i&&"*"==c)&&e.push(mj(c,i))}(r,t,e)):t.push(n),t}const ZD=new Set(["true","1"]),QD=new Set(["false","0"]);function mj(n,e){const t=ZD.has(n)||QD.has(n),r=ZD.has(e)||QD.has(e);return(i,s)=>{let c="*"==n||n==i,h="*"==e||e==s;return!c&&t&&"boolean"==typeof i&&(c=i?ZD.has(n):QD.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?ZD.has(e):QD.has(e)),c&&h}}const h5=new RegExp("s*:selfs*,?","g");function CN(n,e,t,r){return new f5(n).build(e,t,r)}class f5{constructor(e){this._driver=e}build(e,t,r){const i=new m5(t);return this._resetContextStyleTimingState(i),To(this,nw(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function y8(){return new d.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(C=>{p.name=C,s.push(this.visitState(p,t))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,t);r+=p.queryCount,i+=p.depCount,c.push(p)}else t.errors.push(function v8(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,c=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{pj(p).forEach(y=>{c.hasOwnProperty(y)||s.add(y)})})}),s.size&&(WD(s.values()),t.errors.push(function b8(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=To(this,nw(e.animation),t);return{type:1,matchers:c5(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:hp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>To(this,r,t)),options:hp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(c=>{t.currentTime=r;const h=To(this,c,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:hp(e.options)}}visitAnimate(e,t){const r=function y5(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return IN(GD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=IN(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=GD(t,e);return IN(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Ql({});if(5==s.type)i=this.visitKeyframes(s,t);else{let c=e.styles,h=!1;if(!c){h=!0;const y={};r.easing&&(y.easing=r.easing),c=Ql(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(c,t);p.isEmptyStep=h,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===cl?r.push(h):t.errors.push(new d.vHH(3002,!1)):r.push(uj(h));let s=!1,c=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(c=h.get("easing"),h.delete("easing")),!s))for(let p of h.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((h,p)=>{const y=t.collectedStyles.get(t.currentQuerySelector),C=y.get(p);let S=!0;C&&(s!=i&&s>=C.startTime&&i<=C.endTime&&(t.errors.push(function E8(n,e,t,r,i){return new d.vHH(3010,!1)}()),S=!1),s=C.startTime),S&&y.set(p,{startTime:s,endTime:i}),t.options&&function e5(n,e,t){const r=e.params||{},i=pj(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function p8(n){return new d.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function C8(){return new d.vHH(3011,!1)}()),r;let s=0;const c=[];let h=!1,p=!1,y=0;const C=e.steps.map(Ye=>{const ct=this._makeStyleAst(Ye,t);let pt=null!=ct.offset?ct.offset:function _5(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ct.styles),gt=0;return null!=pt&&(s++,gt=ct.offset=pt),p=p||gt<0||gt>1,h=h||gt<y,y=gt,c.push(gt),ct});p&&t.errors.push(function I8(){return new d.vHH(3012,!1)}()),h&&t.errors.push(function D8(){return new d.vHH(3200,!1)}());const S=e.steps.length;let R=0;s>0&&s<S?t.errors.push(function S8(){return new d.vHH(3202,!1)}()):0==s&&(R=1/(S-1));const V=S-1,H=t.currentTime,Q=t.currentAnimateTimings,ye=Q.duration;return C.forEach((Ye,ct)=>{const pt=R>0?ct==V?1:R*ct:c[ct],gt=pt*ye;t.currentTime=H+Q.delay+gt,Q.duration=gt,this._validateStyleAst(Ye,t),Ye.offset=pt,r.styles.push(Ye)}),r}visitReference(e,t){return{type:8,animation:To(this,nw(e.animation),t),options:hp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:hp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:hp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,c]=function p5(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(h5,"")),n=n.replace(/@\*/g,zD).replace(/@\w+/g,t=>zD+"-"+t.slice(1)).replace(/:animating/g,vN),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,So(t.collectedStyles,t.currentQuerySelector,new Map);const h=To(this,nw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:hp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function T8(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:GD(e.timings,t.errors,!0);return{type:12,animation:To(this,nw(e.animation),t),timings:r,options:null}}}class m5{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function hp(n){return n?(n=tw(n)).params&&(n.params=function g5(n){return n?tw(n):null}(n.params)):n={},n}function IN(n,e,t){return{duration:n,delay:e,easing:t}}function DN(n,e,t,r,i,s,c=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:c,subTimeline:h}}class XD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const w5=new RegExp(":enter","g"),C5=new RegExp(":leave","g");function SN(n,e,t,r,i,s=new Map,c=new Map,h,p,y=[]){return(new I5).buildKeyframes(n,e,t,r,i,s,c,h,p,y)}class I5{buildKeyframes(e,t,r,i,s,c,h,p,y,C=[]){y=y||new XD;const S=new TN(e,t,y,i,s,C,[]);S.options=p;const R=p.delay?cu(p.delay):0;S.currentTimeline.delayNextStep(R),S.currentTimeline.setStyles([c],null,S.errors,p),To(this,r,S);const V=S.timelines.filter(H=>H.containsAnimation());if(V.length&&h.size){let H;for(let Q=V.length-1;Q>=0;Q--){const ye=V[Q];if(ye.element===t){H=ye;break}}H&&!H.allowOnlyTimelineStyles()&&H.setStyles([h],null,S.errors,p)}return V.length?V.map(H=>H.buildKeyframes()):[DN(t,[],[],[],0,R,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);s!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const c="number"==typeof s?s:cu(rw(s,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const c=null!=r.duration?cu(r.duration):null,h=null!=r.delay?cu(r.delay):null;return 0!==c&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,c,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),To(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=JD);const c=cu(s.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>To(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?cu(e.options.delay):0;e.steps.forEach(c=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),To(this,c,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return GD(t.params?rw(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?cu(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=JD);let c=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((y,C)=>{t.currentQueryIndex=C;const S=t.createSubContext(e.options,y);s&&S.delayNextStep(s),y===t.element&&(p=S.currentTimeline),To(this,e.animation,S),S.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,c=Math.abs(s.duration),h=c*(t.currentQueryTotal-1);let p=c*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const C=t.currentTimeline;p&&C.delayNextStep(p);const S=C.currentTime;To(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const JD={};class TN{constructor(e,t,r,i,s,c,h,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=JD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new eS(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=cu(r.duration)),null!=r.delay&&(i.delay=cu(r.delay));const s=r.params;if(s){let c=i.params;c||(c=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!c.hasOwnProperty(h))&&(c[h]=rw(s[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new TN(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=JD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new D5(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,c){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(w5,"."+this._enterClassName)).replace(C5,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!s&&0==h.length&&c.push(function A8(n){return new d.vHH(3014,!1)}()),h}}class eS{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new eS(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||cl),this._currentKeyframe.set(t,cl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},c=function S5(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,cl)}else jd(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,p]of c){const y=rw(p,s,r);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??cl),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const y=jd(h,new Map,this._backFill);y.forEach((C,S)=>{"!"===C?e.add(S):C===cl&&t.add(S)}),r||y.set("offset",p/this.duration),i.push(y)});const s=e.size?WD(e.values()):[],c=t.size?WD(t.values()):[];if(r){const h=i[0],p=new Map(h);h.set("offset",0),p.set("offset",1),i=[h,p]}return DN(this.element,i,s,c,this.duration,this.startTime,this.easing,!1)}}class D5 extends eS{constructor(e,t,r,i,s,c,h=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],c=r+t,h=t/c,p=jd(e[0]);p.set("offset",0),s.push(p);const y=jd(e[0]);y.set("offset",vj(h)),s.push(y);const C=e.length-1;for(let S=1;S<=C;S++){let R=jd(e[S]);const V=R.get("offset");R.set("offset",vj((t+V*r)/c)),s.push(R)}r=c,t=0,i="",e=s}return DN(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function vj(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class AN{}const T5=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class A5 extends AN{normalizePropertyName(e,t){return EN(e)}normalizeStyleValue(e,t,r,i){let s="";const c=r.toString().trim();if(T5.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function _8(n,e){return new d.vHH(3005,!1)}())}return c+s}}function bj(n,e,t,r,i,s,c,h,p,y,C,S,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:c,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:C,totalTime:S,errors:R}}const MN={};class wj{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function M5(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,c,h,p,y,C){const S=[],R=this.ast.options&&this.ast.options.params||MN,H=this.buildStyles(r,h&&h.params||MN,S),Q=p&&p.params||MN,ye=this.buildStyles(i,Q,S),Ye=new Set,ct=new Map,pt=new Map,gt="void"===i,Nt={params:x5(Q,R),delay:this.ast.options?.delay},Bt=C?[]:SN(e,t,this.ast.animation,s,c,H,ye,Nt,y,S);let vn=0;if(Bt.forEach(hu=>{vn=Math.max(hu.duration+hu.delay,vn)}),S.length)return bj(t,this._triggerName,r,i,gt,H,ye,[],[],ct,pt,vn,S);Bt.forEach(hu=>{const fu=hu.element,Fz=So(ct,fu,new Set);hu.preStyleProps.forEach(Cp=>Fz.add(Cp));const Rw=So(pt,fu,new Set);hu.postStyleProps.forEach(Cp=>Rw.add(Cp)),fu!==t&&Ye.add(fu)});const Ts=WD(Ye.values());return bj(t,this._triggerName,r,i,gt,H,ye,Bt,Ts,ct,pt,vn)}}function x5(n,e){const t=tw(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class R5{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=tw(this.defaultParams);return Object.keys(e).forEach(s=>{const c=e[s];null!==c&&(i[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,h)=>{c&&(c=rw(c,i,t));const p=this.normalizer.normalizePropertyName(h,t);c=this.normalizer.normalizeStyleValue(h,p,c,t),r.set(p,c)})}),r}}class O5{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new R5(i.style,i.options&&i.options.params||{},r))}),Ej(this.states,"true","1"),Ej(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new wj(e,i,this.states))}),this.fallbackTransition=function N5(n,e,t){return new wj(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Ej(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const P5=new XD;class F5{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=CN(this._driver,t,r,[]);if(r.length)throw function P8(n){return new d.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=ej(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let c;const h=new Map;if(s?(c=SN(this._driver,t,s,yN,jD,new Map,new Map,r,P5,i),c.forEach(C=>{const S=So(h,C.element,new Map);C.postStyleProps.forEach(R=>S.set(R,null))})):(i.push(function F8(){return new d.vHH(3300,!1)}()),c=[]),i.length)throw function L8(n){return new d.vHH(3504,!1)}();h.forEach((C,S)=>{C.forEach((R,V)=>{C.set(V,this._driver.computeStyle(S,V,cl))})});const y=Hd(c.map(C=>{const S=h.get(C.element);return this._buildPlayer(C,new Map,S)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function V8(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=pN(t,"","","");return hN(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Cj="ng-animate-queued",xN="ng-animate-disabled",H5=[],Ij={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},j5={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},wa="__ng_removed";class RN{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function W5(n){return n??null}(r?e.value:e),r){const s=tw(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const iw="void",kN=new RN(iw);class $5{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ea(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function B8(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function U8(n){return new d.vHH(3303,!1)}();if(!function q5(n){return"start"==n||"done"==n}(r))throw function H8(n,e){return new d.vHH(3400,!1)}();const s=So(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};s.push(c);const h=So(this._engine.statesByElement,e,new Map);return h.has(t)||(Ea(e,$D),Ea(e,$D+"-"+t),h.set(t,kN)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function j8(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),c=new ON(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Ea(e,$D),Ea(e,$D+"-"+t),this._engine.statesByElement.set(e,h=new Map));let p=h.get(t);const y=new RN(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h.set(t,y),p||(p=kN),y.value!==iw&&p.value===y.value){if(!function Z5(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const Q=[],ye=s.matchStyles(p.value,p.params,Q),Ye=s.matchStyles(y.value,y.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{dp(e,ye),sc(e,Ye)})}return}const R=So(this._engine.playersByElement,e,[]);R.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==t&&Q.queued&&Q.destroy()});let V=s.matchTransition(p.value,y.value,e,y.params),H=!1;if(!V){if(!i)return;V=s.fallbackTransition,H=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:V,fromState:p,toState:y,player:c,isFallbackTransition:H}),H||(Ea(e,Cj),c.onStart(()=>{Qm(e,Cj)})),c.onDone(()=>{let Q=this.players.indexOf(c);Q>=0&&this.players.splice(Q,1);const ye=this._engine.playersByElement.get(e);if(ye){let Ye=ye.indexOf(c);Ye>=0&&ye.splice(Ye,1)}}),this.players.push(c),R.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,zD,!0);r.forEach(i=>{if(i[wa])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),c=new Map;if(s){const h=[];if(s.forEach((p,y)=>{if(c.set(y,p.value),this._triggers.has(y)){const C=this.trigger(e,y,iw,i);C&&h.push(C)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Hd(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const c=s.name;if(i.has(c))return;i.add(c);const p=this._triggers.get(c).fallbackTransition,y=r.get(c)||kN,C=new RN(iw),S=new ON(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:p,fromState:y,toState:C,player:S,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[wa];(!s||s===Ij)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ea(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,c=this._elementListeners.get(s);c&&c.forEach(h=>{if(h.name==r.triggerName){const p=pN(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,hN(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class z5{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new $5(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,h=this.driver.getParentElement(t);for(;h;){const p=i.get(h);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),c=!0;break}h=this.driver.getParentElement(h)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(tS(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!tS(t))return;const s=t[wa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ea(e,xN)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Qm(e,xN))}removeNode(e,t,r,i){if(tS(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[wa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return tS(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,zD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,vN,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Hd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[wa];if(t&&t.setForRemoval){if(e[wa]=Ij,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(xN)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ea(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Hd(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function $8(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new XD,i=[],s=new Map,c=[],h=new Map,p=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(wt=>{C.add(wt);const Pt=this.driver.query(wt,".ng-animate-queued",!0);for(let $t=0;$t<Pt.length;$t++)C.add(Pt[$t])});const S=this.bodyNode,R=Array.from(this.statesByElement.keys()),V=Tj(R,this.collectedEnterElements),H=new Map;let Q=0;V.forEach((wt,Pt)=>{const $t=yN+Q++;H.set(Pt,$t),wt.forEach(An=>Ea(An,$t))});const ye=[],Ye=new Set,ct=new Set;for(let wt=0;wt<this.collectedLeaveElements.length;wt++){const Pt=this.collectedLeaveElements[wt],$t=Pt[wa];$t&&$t.setForRemoval&&(ye.push(Pt),Ye.add(Pt),$t.hasAnimation?this.driver.query(Pt,".ng-star-inserted",!0).forEach(An=>Ye.add(An)):ct.add(Pt))}const pt=new Map,gt=Tj(R,Array.from(Ye));gt.forEach((wt,Pt)=>{const $t=jD+Q++;pt.set(Pt,$t),wt.forEach(An=>Ea(An,$t))}),e.push(()=>{V.forEach((wt,Pt)=>{const $t=H.get(Pt);wt.forEach(An=>Qm(An,$t))}),gt.forEach((wt,Pt)=>{const $t=pt.get(Pt);wt.forEach(An=>Qm(An,$t))}),ye.forEach(wt=>{this.processLeaveNode(wt)})});const Nt=[],Bt=[];for(let wt=this._namespaceList.length-1;wt>=0;wt--)this._namespaceList[wt].drainQueuedTransitions(t).forEach($t=>{const An=$t.player,ki=$t.element;if(Nt.push(An),this.collectedEnterElements.length){const is=ki[wa];if(is&&is.setForMove){if(is.previousTriggersValues&&is.previousTriggersValues.has($t.triggerName)){const Ip=is.previousTriggersValues.get($t.triggerName),Da=this.statesByElement.get($t.element);if(Da&&Da.has($t.triggerName)){const VS=Da.get($t.triggerName);VS.value=Ip,Da.set($t.triggerName,VS)}}return void An.destroy()}}const uc=!S||!this.driver.containsElement(S,ki),xo=pt.get(ki),Jd=H.get(ki),kr=this._buildInstruction($t,r,Jd,xo,uc);if(kr.errors&&kr.errors.length)return void Bt.push(kr);if(uc)return An.onStart(()=>dp(ki,kr.fromStyles)),An.onDestroy(()=>sc(ki,kr.toStyles)),void i.push(An);if($t.isFallbackTransition)return An.onStart(()=>dp(ki,kr.fromStyles)),An.onDestroy(()=>sc(ki,kr.toStyles)),void i.push(An);const Bz=[];kr.timelines.forEach(is=>{is.stretchStartingKeyframe=!0,this.disabledNodes.has(is.element)||Bz.push(is)}),kr.timelines=Bz,r.append(ki,kr.timelines),c.push({instruction:kr,player:An,element:ki}),kr.queriedElements.forEach(is=>So(h,is,[]).push(An)),kr.preStyleProps.forEach((is,Ip)=>{if(is.size){let Da=p.get(Ip);Da||p.set(Ip,Da=new Set),is.forEach((VS,XP)=>Da.add(XP))}}),kr.postStyleProps.forEach((is,Ip)=>{let Da=y.get(Ip);Da||y.set(Ip,Da=new Set),is.forEach((VS,XP)=>Da.add(XP))})});if(Bt.length){const wt=[];Bt.forEach(Pt=>{wt.push(function z8(n,e){return new d.vHH(3505,!1)}())}),Nt.forEach(Pt=>Pt.destroy()),this.reportError(wt)}const vn=new Map,Ts=new Map;c.forEach(wt=>{const Pt=wt.element;r.has(Pt)&&(Ts.set(Pt,Pt),this._beforeAnimationBuild(wt.player.namespaceId,wt.instruction,vn))}),i.forEach(wt=>{const Pt=wt.element;this._getPreviousPlayers(Pt,!1,wt.namespaceId,wt.triggerName,null).forEach(An=>{So(vn,Pt,[]).push(An),An.destroy()})});const hu=ye.filter(wt=>Mj(wt,p,y)),fu=new Map;Sj(fu,this.driver,ct,y,cl).forEach(wt=>{Mj(wt,p,y)&&hu.push(wt)});const Rw=new Map;V.forEach((wt,Pt)=>{Sj(Rw,this.driver,new Set(wt),p,"!")}),hu.forEach(wt=>{const Pt=fu.get(wt),$t=Rw.get(wt);fu.set(wt,new Map([...Array.from(Pt?.entries()??[]),...Array.from($t?.entries()??[])]))});const Cp=[],Lz=[],Vz={};c.forEach(wt=>{const{element:Pt,player:$t,instruction:An}=wt;if(r.has(Pt)){if(C.has(Pt))return $t.onDestroy(()=>sc(Pt,An.toStyles)),$t.disabled=!0,$t.overrideTotalTime(An.totalTime),void i.push($t);let ki=Vz;if(Ts.size>1){let xo=Pt;const Jd=[];for(;xo=xo.parentNode;){const kr=Ts.get(xo);if(kr){ki=kr;break}Jd.push(xo)}Jd.forEach(kr=>Ts.set(kr,ki))}const uc=this._buildAnimation($t.namespaceId,An,vn,s,Rw,fu);if($t.setRealPlayer(uc),ki===Vz)Cp.push($t);else{const xo=this.playersByElement.get(ki);xo&&xo.length&&($t.parentPlayer=Hd(xo)),i.push($t)}}else dp(Pt,An.fromStyles),$t.onDestroy(()=>sc(Pt,An.toStyles)),Lz.push($t),C.has(Pt)&&i.push($t)}),Lz.forEach(wt=>{const Pt=s.get(wt.element);if(Pt&&Pt.length){const $t=Hd(Pt);wt.setRealPlayer($t)}}),i.forEach(wt=>{wt.parentPlayer?wt.syncPlayerEvents(wt.parentPlayer):wt.destroy()});for(let wt=0;wt<ye.length;wt++){const Pt=ye[wt],$t=Pt[wa];if(Qm(Pt,jD),$t&&$t.hasAnimation)continue;let An=[];if(h.size){let uc=h.get(Pt);uc&&uc.length&&An.push(...uc);let xo=this.driver.query(Pt,vN,!0);for(let Jd=0;Jd<xo.length;Jd++){let kr=h.get(xo[Jd]);kr&&kr.length&&An.push(...kr)}}const ki=An.filter(uc=>!uc.destroyed);ki.length?K5(this,Pt,ki):this.processLeaveNode(Pt)}return ye.length=0,Cp.forEach(wt=>{this.players.push(wt),wt.onDone(()=>{wt.destroy();const Pt=this.players.indexOf(wt);this.players.splice(Pt,1)}),wt.play()}),Cp}elementContainsData(e,t){let r=!1;const i=t[wa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let c=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==iw;h.forEach(y=>{y.queued||!p&&y.triggerName!=i||c.push(y)})}}return(r||i)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),c}_beforeAnimationBuild(e,t,r){const s=t.element,c=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,C=y!==s,S=So(r,y,[]);this._getPreviousPlayers(y,C,c,h,t.toState).forEach(V=>{const H=V.getRealPlayer();H.beforeDestroy&&H.beforeDestroy(),V.destroy(),S.push(V)})}dp(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,c){const h=t.triggerName,p=t.element,y=[],C=new Set,S=new Set,R=t.timelines.map(H=>{const Q=H.element;C.add(Q);const ye=Q[wa];if(ye&&ye.removedBeforeQueried)return new mf(H.duration,H.delay);const Ye=Q!==p,ct=function Y5(n){const e=[];return Aj(n,e),e}((r.get(Q)||H5).map(vn=>vn.getRealPlayer())).filter(vn=>!!vn.element&&vn.element===Q),pt=s.get(Q),gt=c.get(Q),Nt=ej(0,this._normalizer,0,H.keyframes,pt,gt),Bt=this._buildPlayer(H,Nt,ct);if(H.subTimeline&&i&&S.add(Q),Ye){const vn=new ON(e,h,Q);vn.setRealPlayer(Bt),y.push(vn)}return Bt});y.forEach(H=>{So(this.playersByQueriedElement,H.element,[]).push(H),H.onDone(()=>function G5(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,H.element,H))}),C.forEach(H=>Ea(H,cj));const V=Hd(R);return V.onDestroy(()=>{C.forEach(H=>Qm(H,cj)),sc(p,t.toStyles)}),S.forEach(H=>{So(i,H,[]).push(V)}),V}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new mf(e.duration,e.delay)}}class ON{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new mf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>hN(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){So(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function tS(n){return n&&1===n.nodeType}function Dj(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Sj(n,e,t,r,i){const s=[];t.forEach(p=>s.push(Dj(p)));const c=[];r.forEach((p,y)=>{const C=new Map;p.forEach(S=>{const R=e.computeStyle(y,S,i);C.set(S,R),(!R||0==R.length)&&(y[wa]=j5,c.push(y))}),n.set(y,C)});let h=0;return t.forEach(p=>Dj(p,s[h++])),c}function Tj(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function c(h){if(!h)return 1;let p=s.get(h);if(p)return p;const y=h.parentNode;return p=t.has(y)?y:i.has(y)?1:c(y),s.set(h,p),p}return e.forEach(h=>{const p=c(h);1!==p&&t.get(p).push(h)}),t}function Ea(n,e){n.classList?.add(e)}function Qm(n,e){n.classList?.remove(e)}function K5(n,e,t){Hd(t).onDone(()=>n.processLeaveNode(e))}function Aj(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Bg?Aj(r.players,e):e.push(r)}}function Mj(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class nS{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new z5(e,t,r),this._timelineEngine=new F5(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const c=e+"-"+i;let h=this._triggerCache[c];if(!h){const p=[],C=CN(this._driver,s,p,[]);if(p.length)throw function O8(n,e){return new d.vHH(3404,!1)}();h=function k5(n,e,t){return new O5(n,e,t)}(i,C,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,c]=tj(r);this._timelineEngine.command(s,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[c,h]=tj(r);return this._timelineEngine.listen(c,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let X5=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&sc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(sc(this._element,this._initialStyles),this._endStyles&&(sc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(dp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(dp(this._element,this._endStyles),this._endStyles=null),sc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function NN(n){let e=null;return n.forEach((t,r)=>{(function J5(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class xj{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:gj(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class eY{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return sj(e,t)}getParentElement(e){return mN(e)}query(e,t,r){return oj(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,c=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(p.easing=s);const y=new Map,C=c.filter(V=>V instanceof xj);(function r5(n,e){return 0===n||0===e})(r,i)&&C.forEach(V=>{V.currentSnapshot.forEach((H,Q)=>y.set(Q,H))});let S=function J8(n){return n.length?n[0]instanceof Map?n:n.map(e=>uj(e)):[]}(t).map(V=>jd(V));S=function s5(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,c)=>{r.has(c)||i.push(c),r.set(c,s)}),i.length)for(let s=1;s<e.length;s++){let c=e[s];i.forEach(h=>c.set(h,gj(n,h)))}}return e}(e,S,y);const R=function Q5(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=NN(e[0]),e.length>1&&(r=NN(e[e.length-1]))):e instanceof Map&&(t=NN(e)),t||r?new X5(n,t,r):null}(e,S);return new xj(e,S,p,R)}}let tY=(()=>{class n extends iC{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?lC(t):t;return Rj(this._renderer,null,r,"register",[i]),new nY(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class nY extends class sC{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new rY(this._id,e,t||{},this._renderer)}}class rY{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Rj(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Rj(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const kj="@.disabled";let iY=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,c)=>{const h=c?.parentNode(s);h&&c.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(s);return C||(C=new Oj("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,C)),C}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=C=>{Array.isArray(C)?C.forEach(p):this.engine.registerTrigger(c,h,t,C.name,C)};return r.data.animation.forEach(p),new sY(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,h]=s;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(nS),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Oj{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==kj?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class sY extends Oj{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==kj?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function oY(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function aY(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let lY=(()=>{class n extends nS{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(_N),d.LFG(AN),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Nj=[{provide:iC,useClass:tY},{provide:AN,useFactory:function cY(){return new A5}},{provide:nS,useClass:lY},{provide:d.FYo,useFactory:function uY(n,e,t){return new iY(n,e,t)},deps:[ja,nS,d.R0b]}],PN=[{provide:_N,useFactory:()=>new eY},{provide:d.QbO,useValue:"BrowserAnimations"},...Nj],Pj=[{provide:_N,useClass:aj},{provide:d.QbO,useValue:"NoopAnimations"},...Nj];let dY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Pj:PN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:PN,imports:[oo]}),n})();const FN_firebase={apiKey:"AIzaSyCkywGw6NL_on259gyy__oqSZRoSwW1jPc",authDomain:"houseofcards-87806.firebaseapp.com",projectId:"houseofcards-87806",storageBucket:"houseofcards-87806.appspot.com",messagingSenderId:"756004794155",appId:"1:756004794155:web:0225171ed3cc40ff15df6e",measurementId:"G-C39KNEJC62"};var hY=L(1808);class LN{constructor(e){return e}}class VN{constructor(){return(0,pn.vb)("auth")}}const BN=new d.OlP("angularfire2.auth-instances");function pY(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new LN(r)}}const gY={provide:VN,deps:[[new d.FiY,BN]]},mY={provide:LN,useFactory:function fY(n,e){const t=(0,pn.JM)("auth",n,e);return t&&new LN(t)},deps:[[new d.FiY,BN],lp]};let _Y=(()=>{class n{constructor(){(0,lu.KN)("angularfire",pn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[mY,gY]}),n})();function yY(n,...e){return{ngModule:_Y,providers:[{provide:BN,useFactory:pY(n),multi:!0,deps:[d.R0b,d.zs3,pn.HU,xD,[new d.FiY,Zm],...e]}]}}const vY=(0,pn.u3)(hY.n,!0),Lj="@firebase/database";let UN="";class wY{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,ne.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,ne.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class EY{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,ne.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Bj=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wY(e)}}catch{}return new EY},fp=Bj("localStorage"),HN=Bj("sessionStorage"),Xm=new pl.Yd("@firebase/database"),Uj=function(){let n=1;return function(){return n++}}(),Hj=function(n){const e=(0,ne.dS)(n),t=new ne.gQ;t.update(e);const r=t.digest();return ne.US.encodeByteArray(r)},sw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=sw.apply(null,r):e+="object"==typeof r?(0,ne.Wl)(r):r,e+=" "}return e};let pp=null,jj=!0;const xi=function(...n){if(!0===jj&&(jj=!1,null===pp&&!0===HN.get("logging_enabled")&&function(n,e){(0,ne.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Xm.logLevel=pl.in.VERBOSE,pp=Xm.log.bind(Xm),e&&HN.set("logging_enabled",!0)):"function"==typeof n?pp=n:(pp=null,HN.remove("logging_enabled"))}(!0)),pp){const e=sw.apply(null,n);pp(e)}},ow=function(n){return function(...e){xi(n,...e)}},jN=function(...n){const e="FIREBASE INTERNAL ERROR: "+sw(...n);Xm.error(e)},oc=function(...n){const e=`FIREBASE FATAL ERROR: ${sw(...n)}`;throw Xm.error(e),new Error(e)},rs=function(...n){const e="FIREBASE WARNING: "+sw(...n);Xm.warn(e)},iS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},$d="[MIN_NAME]",uu="[MAX_NAME]",gp=function(n,e){if(n===e)return 0;if(n===$d||e===uu)return-1;if(e===$d||n===uu)return 1;{const t=Wj(n),r=Wj(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},DY=function(n,e){return n===e?0:n<e?-1:1},aw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,ne.Wl)(e))},$N=function(n){if("object"!=typeof n||null===n)return(0,ne.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,ne.Wl)(e[r]),t+=":",t+=$N(n[e[r]]);return t+="}",t},zj=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Gj=function(n){(0,ne.hu)(!iS(n),"Invalid JSON number");const r=1023;let i,s,c,h,p;0===n?(s=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const C=y.join("");let S="";for(p=0;p<64;p+=8){let R=parseInt(C.substr(p,8),2).toString(16);1===R.length&&(R="0"+R),S+=R}return S.toLowerCase()},MY=new RegExp("^-?(0*)\\d{1,10}$"),Wj=function(n){if(MY.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Jm=function(n){try{n()}catch(e){setTimeout(()=>{throw rs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},lw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class OY{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){rs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class NY{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(xi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rs(e)}}let cw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Qj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,e$="websocket",t$="long_polling";class GN{constructor(e,t,r,i,s=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function n$(n,e,t){let r;if((0,ne.hu)("string"==typeof e,"typeof type must == string"),(0,ne.hu)("object"==typeof t,"typeof params must == object"),e===e$)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==t$)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function PY(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ri(t,(s,c)=>{i.push(s+"="+c)}),r+i.join("&")}class FY{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,ne.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,ne.p$)(this.counters_)}}const WN={},qN={};function KN(n){const e=n.toString();return WN[e]||(WN[e]=new FY),WN[e]}class VY{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Jm(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class zd{constructor(e,t,r,i,s,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ow(e),this.stats_=KN(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),n$(t,t$,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new VY(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,ne.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new YN((...s)=>{const[c,h,p,y,C]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Qj.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){zd.forceAllow_=!0}static forceDisallow(){zd.forceDisallow_=!0}static isAvailable(){return!((0,ne.Yr)()||!zd.forceAllow_&&(zd.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,ne.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,ne.h$)(t),i=zj(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,ne.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,ne.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class YN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ne.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Uj(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=YN.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){xi("frame writing exception"),h.stack&&xi(h.stack),xi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||xi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,ne.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{xi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let oS=null;typeof MozWebSocket<"u"?oS=MozWebSocket:typeof WebSocket<"u"&&(oS=WebSocket);let e_=(()=>{class n{constructor(t,r,i,s,c,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ow(this.connId),this.stats_=KN(r),this.connURL=n.connectionURL_(r,h,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,c){const h={v:"5"};return!(0,ne.Yr)()&&typeof location<"u"&&location.hostname&&Qj.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),c&&(h.p=c),n$(t,e$,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fp.set("previous_websocket_failure",!0);try{let i;if((0,ne.Yr)()){i={headers:{"User-Agent":`Firebase/5/${UN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new oS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==oS&&!n.forceDisallow_}static previouslyFailed(){return fp.isInMemoryStorage||!0===fp.get("previous_websocket_failure")}markConnectionHealthy(){fp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,ne.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,ne.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,ne.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=zj(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),c$=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[zd,e_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=e_&&e_.isAvailable();let i=r&&!e_.previouslyFailed();if(t.webSocketOnly&&(r||rs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[e_];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class m${constructor(e,t,r,i,s,c,h,p,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ow("c:"+this.id+":"),this.transportManager_=new c$(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=lw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=aw("t",e),r=aw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=aw("t",e),r=aw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=aw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?jN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&rs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),lw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _${put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class y${constructor(e){this.allowedEvents_=e,this.listeners_={},(0,ne.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,ne.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class aS extends y${constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,ne.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new aS}getInitialEvent(e){return(0,ne.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Bn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function On(){return new Bn("")}function ln(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Gd(n){return n.pieces_.length-n.pieceNum_}function Jn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Bn(n.pieces_,e)}function QN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function uw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function w$(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Bn(e,0)}function Tr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Bn(t,0)}function cn(n){return n.pieceNum_>=n.pieces_.length}function Ss(n,e){const t=ln(n),r=ln(e);if(null===t)return e;if(t===r)return Ss(Jn(n),Jn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function XN(n,e){if(Gd(n)!==Gd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ca(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Gd(n)>Gd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class aZ{constructor(e,t){this.errorPrefix_=t,this.parts_=uw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,ne.ug)(this.parts_[r]);E$(this)}}function E$(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+mp(n))}function mp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class JN extends y${constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new JN}getInitialEvent(e){return(0,ne.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const dw=1e3;let cS,_p=(()=>{class n extends _${constructor(t,r,i,s,c,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=ow("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,ne.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");JN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&aS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,c={r:s,a:t,b:r};this.log_((0,ne.Wl)(c)),(0,ne.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new ne.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,ne.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ne.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,p=>{const y=p.d,C=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==C&&this.removeListen_(i,s),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,ne.r3)(t,"w")){const i=(0,ne.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();rs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,ne.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,ne.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const c=s.s,h=s.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,ne.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const c={p:t};s&&(c.q=i,c.t=s),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,ne.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):jN("Unrecognized action received from server: "+(0,ne.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,ne.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=dw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=dw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,De.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const C=function(){y?y.close():(p=!0,s())};t.realtime_={close:C,sendRequest:function(V){(0,ne.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(V)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,H]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);p?xi("getToken() completed but was canceled"):(xi("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=H&&H.token,y=new m$(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,Q=>{rs(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(V){t.log_("Failed to get token: "+V),p||(t.repoInfo_.nodeAdmin&&rs(V),C())}}})()}interrupt(t){xi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){xi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,ne.xb)(this.interruptReasons_)&&(this.reconnectDelay_=dw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>$N(c)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Bn(t).toString();let s;if(this.listens.has(i)){const c=this.listens.get(i);s=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){xi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){xi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,ne.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+UN.replace(/\./g,"-")]=1,(0,ne.uI)()?t["framework.cordova"]=1:(0,ne.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=aS.getInstance().currentlyOnline();return(0,ne.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class fn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new fn(e,t)}}class lS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new fn($d,e),i=new fn($d,t);return 0!==this.compare(r,i)}minPost(){return fn.MIN}}class D$ extends lS{static get __EMPTY_NODE(){return cS}static set __EMPTY_NODE(e){cS=e}compare(e,t){return gp(e.name,t.name)}isDefinedOn(e){throw(0,ne.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return fn.MIN}maxPost(){return new fn(uu,cS)}makePost(e,t){return(0,ne.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new fn(e,cS)}toString(){return".key"}}const ac=new D$;class uS{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let tP,_l=(()=>{class n{constructor(t,r,i,s,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Ws.EMPTY_NODE,this.right=c??Ws.EMPTY_NODE}copy(t,r,i,s,c){return new n(t??this.key,r??this.value,i??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const c=i(t,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===c?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ws.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ws.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ws{constructor(e,t=Ws.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ws(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,_l.BLACK,null,null))}remove(e){return new Ws(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_l.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new uS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new uS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new uS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new uS(this.root_,null,this.comparator_,!0,e)}}function gZ(n,e){return gp(n.name,e.name)}function eP(n,e){return gp(n,e)}Ws.EMPTY_NODE=new class pZ{copy(e,t,r,i,s){return this}insert(e,t,r){return new _l(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const S$=function(n){return"number"==typeof n?"number:"+Gj(n):"string:"+n},T$=function(n){if(n.isLeafNode()){const e=n.val();(0,ne.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,ne.r3)(e,".sv"),"Priority must be a string or number.")}else(0,ne.hu)(n===tP||n.isEmpty(),"priority of unexpected type.");(0,ne.hu)(n===tP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let A$,M$,x$,t_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,ne.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),T$(this.priorityNode_)}static set __childrenNodeConstructor(t){A$=t}static get __childrenNodeConstructor(){return A$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return cn(t)?this:".priority"===ln(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=ln(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,ne.hu)(".priority"!==i||1===Gd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Jn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+S$(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Gj(this.value_):this.value_,this.lazyHash_=Hj(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,ne.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,ne.hu)(s>=0,"Unknown leaf type: "+r),(0,ne.hu)(c>=0,"Unknown leaf type: "+i),s===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ar=new class vZ extends lS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?gp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return fn.MIN}maxPost(){return new fn(uu,new t_("[PRIORITY-POST]",x$))}makePost(e,t){const r=M$(e);return new fn(t,new t_("[PRIORITY-POST]",r))}toString(){return".priority"}},bZ=Math.log(2);class wZ{constructor(e){this.count=parseInt(Math.log(e+1)/bZ,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const dS=function(n,e,t,r){n.sort(e);const i=function(p,y){const C=y-p;let S,R;if(0===C)return null;if(1===C)return S=n[p],R=t?t(S):S,new _l(R,S.node,_l.BLACK,null,null);{const V=parseInt(C/2,10)+p,H=i(p,V),Q=i(V+1,y);return S=n[V],R=t?t(S):S,new _l(R,S.node,_l.BLACK,H,Q)}},h=function(p){let y=null,C=null,S=n.length;const R=function(H,Q){const ye=S-H,Ye=S;S-=H;const ct=i(ye+1,Ye),pt=n[ye],gt=t?t(pt):pt;V(new _l(gt,pt.node,Q,null,ct))},V=function(H){y?(y.left=H,y=H):(C=H,y=H)};for(let H=0;H<p.count;++H){const Q=p.nextBitIsOne(),ye=Math.pow(2,p.count-(H+1));Q?R(ye,_l.BLACK):(R(ye,_l.BLACK),R(ye,_l.RED))}return C}(new wZ(n.length));return new Ws(r||e,h)};let nP;const n_={};class du{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,ne.hu)(n_&&ar,"ChildrenNode.ts has not been loaded"),nP=nP||new du({".priority":n_},{".priority":ar}),nP}get(e){const t=(0,ne.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ws?t:null}hasIndex(e){return(0,ne.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,ne.hu)(e!==ac,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(fn.Wrap);let h,c=s.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=s.getNext();h=i?dS(r,e.getCompare()):n_;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const C=Object.assign({},this.indexes_);return C[p]=h,new du(C,y)}addToIndexes(e,t){const r=(0,ne.UI)(this.indexes_,(i,s)=>{const c=(0,ne.DV)(this.indexSet_,s);if((0,ne.hu)(c,"Missing index implementation for "+s),i===n_){if(c.isDefinedOn(e.node)){const h=[],p=t.getIterator(fn.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),dS(h,c.getCompare())}return n_}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new fn(e.name,h))),p.insert(e,e.node)}});return new du(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,ne.UI)(this.indexes_,i=>{if(i===n_)return i;{const s=t.get(e.name);return s?i.remove(new fn(e.name,s)):i}});return new du(r,this.indexSet_)}}let hw,Jt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&T$(this.priorityNode_),this.children_.isEmpty()&&(0,ne.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return hw||(hw=new n(new Ws(eP),null,du.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?hw:r}}getChild(t){const r=ln(t);return null===r?this:this.getImmediateChild(r).getChild(Jn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,ne.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new fn(t,r);let s,c;r.isEmpty()?(s=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?hw:this.priorityNode_;return new n(s,h,c)}}updateChild(t,r){const i=ln(t);if(null===i)return r;{(0,ne.hu)(".priority"!==ln(t)||1===Gd(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Jn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,c=!0;if(this.forEachChild(ar,(h,p)=>{r[h]=p.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!t&&c&&s<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+S$(this.getPriority().val())+":"),this.forEachChild(ar,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":Hj(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const c=s.getPredecessorKey(new fn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new fn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new fn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,fn.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,fn.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)>0;)s.getNext(),c=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===fw?-1:0}withIndex(t){if(t===ac||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ac||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ar),s=r.getIterator(ar);let c=i.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===ac?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const fw=new class EZ extends Jt{constructor(){super(new Ws(eP),Jt.EMPTY_NODE,du.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Jt.EMPTY_NODE}isEmpty(){return!1}};function Rr(n,e=null){if(null===n)return Jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,ne.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new t_(n,Rr(e));if(n instanceof Array){let t=Jt.EMPTY_NODE;return Ri(n,(r,i)=>{if((0,ne.r3)(n,r)&&"."!==r.substring(0,1)){const s=Rr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Rr(e))}{const t=[];let r=!1;if(Ri(n,(c,h)=>{if("."!==c.substring(0,1)){const p=Rr(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new fn(c,p)))}}),0===t.length)return Jt.EMPTY_NODE;const s=dS(t,gZ,c=>c.name,eP);if(r){const c=dS(t,ar.getCompare());return new Jt(s,Rr(e),new du({".priority":c},{".priority":ar}))}return new Jt(s,Rr(e),du.Default)}}Object.defineProperties(fn,{MIN:{value:new fn($d,Jt.EMPTY_NODE)},MAX:{value:new fn(uu,fw)}}),D$.__EMPTY_NODE=Jt.EMPTY_NODE,t_.__childrenNodeConstructor=Jt,function mZ(n){tP=n}(fw),function yZ(n){x$=n}(fw),function _Z(n){M$=n}(Rr);class rP extends lS{constructor(e){super(),this.indexPath_=e,(0,ne.hu)(!cn(e)&&".priority"!==ln(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?gp(e.name,t.name):s}makePost(e,t){const r=Rr(e),i=Jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new fn(t,i)}maxPost(){const e=Jt.EMPTY_NODE.updateChild(this.indexPath_,fw);return new fn(uu,e)}toString(){return uw(this.indexPath_,0).join("/")}}const iP=new class IZ extends lS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?gp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return fn.MIN}maxPost(){return fn.MAX}makePost(e,t){const r=Rr(e);return new fn(t,r)}toString(){return".value"}};function gw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class oP{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ar}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ne.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ne.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$d}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ne.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ne.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ne.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ar}copy(){const e=new oP;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function k$(n){const e={};if(n.isDefault())return e;let t;if(n.index_===ar?t="$priority":n.index_===iP?t="$value":n.index_===ac?t="$key":((0,ne.hu)(n.index_ instanceof rP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,ne.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,ne.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,ne.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,ne.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,ne.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function O$(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ar&&(e.i=n.index_.toString()),e}class fS extends _${constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ow("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,ne.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const c=fS.getListenId_(e,r),h={};this.listens_[c]=h;const p=k$(e._queryParams);this.restRequest_(s+".json",p,(y,C)=>{let S=C;if(404===y&&(S=null,y=null),null===y&&this.onDataUpdate_(s,S,!1,r),(0,ne.DV)(this.listens_,c)===h){let R;R=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(R,null)}})}unlisten(e,t){const r=fS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=k$(e._queryParams),r=e._path.toString(),i=new ne.BH;return this.restRequest_(r+".json",t,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,ne.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,ne.cI)(h.responseText)}catch{rs("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&rs("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class kZ{constructor(){this.rootNode_=Jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function pS(){return{value:null,children:new Map}}function i_(n,e,t){if(cn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=ln(e);n.children.has(r)||n.children.set(r,pS()),i_(n.children.get(r),e=Jn(e),t)}}function uP(n,e,t){null!==n.value?t(e,n.value):function OZ(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{uP(i,new Bn(e.toString()+"/"+r),t)})}class NZ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ri(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class LZ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new NZ(e);const r=1e4+2e4*Math.random();lw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ri(e,(i,s)=>{s>0&&(0,ne.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),lw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ia=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ia||(Ia={})),Ia))();function fP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class gS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ia.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(cn(this.path)){if(null!=this.affectedTree.value)return(0,ne.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Bn(e));return new gS(On(),t,this.revert)}}return(0,ne.hu)(ln(this.path)===e,"operationForChild called for unrelated child."),new gS(Jn(this.path),this.affectedTree,this.revert)}}class yp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ia.OVERWRITE}operationForChild(e){return cn(this.path)?new yp(this.source,On(),this.snap.getImmediateChild(e)):new yp(this.source,Jn(this.path),this.snap)}}class s_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ia.MERGE}operationForChild(e){if(cn(this.path)){const t=this.children.subtree(new Bn(e));return t.isEmpty()?null:t.value?new yp(this.source,On(),t.value):new s_(this.source,On(),t)}return(0,ne.hu)(ln(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new s_(this.source,Jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Wd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(cn(e))return this.isFullyInitialized()&&!this.filtered_;const t=ln(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function yw(n,e,t,r,i,s){const c=r.filter(h=>h.type===t);c.sort((h,p)=>function HZ(n,e,t){if(null==e.childName||null==t.childName)throw(0,ne.g5)("Should only compare child_ events.");const r=new fn(e.childName,e.snapshotNode),i=new fn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),c.forEach(h=>{const p=function UZ(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function mS(n,e){return{eventCache:n,serverCache:e}}function vw(n,e,t,r){return mS(new Wd(e,t,r),n.serverCache)}function P$(n,e,t,r){return mS(n.eventCache,new Wd(e,t,r))}function _S(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function vp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let pP;class lr{constructor(e,t=(()=>(pP||(pP=new Ws(DY)),pP))()){this.value=e,this.children=t}static fromObject(e){let t=new lr(null);return Ri(e,(r,i)=>{t=t.set(new Bn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:On(),value:this.value};if(cn(e))return null;{const r=ln(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Jn(e),t);return null!=s?{path:Tr(new Bn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(cn(e))return this;{const t=ln(e),r=this.children.get(t);return null!==r?r.subtree(Jn(e)):new lr(null)}}set(e,t){if(cn(e))return new lr(t,this.children);{const r=ln(e),s=(this.children.get(r)||new lr(null)).set(Jn(e),t),c=this.children.insert(r,s);return new lr(this.value,c)}}remove(e){if(cn(e))return this.children.isEmpty()?new lr(null):new lr(null,this.children);{const t=ln(e),r=this.children.get(t);if(r){const i=r.remove(Jn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new lr(null):new lr(this.value,s)}return this}}get(e){if(cn(e))return this.value;{const t=ln(e),r=this.children.get(t);return r?r.get(Jn(e)):null}}setTree(e,t){if(cn(e))return t;{const r=ln(e),s=(this.children.get(r)||new lr(null)).setTree(Jn(e),t);let c;return c=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new lr(this.value,c)}}fold(e){return this.fold_(On(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Tr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,On(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(cn(e))return null;{const s=ln(e),c=this.children.get(s);return c?c.findOnPath_(Jn(e),Tr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,On(),t)}foreachOnPath_(e,t,r){if(cn(e))return this;{this.value&&r(t,this.value);const i=ln(e),s=this.children.get(i);return s?s.foreachOnPath_(Jn(e),Tr(t,i),r):new lr(null)}}foreach(e){this.foreach_(On(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Tr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class yl{constructor(e){this.writeTree_=e}static empty(){return new yl(new lr(null))}}function bw(n,e,t){if(cn(e))return new yl(new lr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const c=Ss(i,e);return s=s.updateChild(c,t),new yl(n.writeTree_.set(i,s))}{const i=new lr(t),s=n.writeTree_.setTree(e,i);return new yl(s)}}}function gP(n,e,t){let r=n;return Ri(t,(i,s)=>{r=bw(r,Tr(e,i),s)}),r}function F$(n,e){if(cn(e))return yl.empty();{const t=n.writeTree_.setTree(e,new lr(null));return new yl(t)}}function mP(n,e){return null!=bp(n,e)}function bp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ss(t.path,e)):null}function L$(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ar,(r,i)=>{e.push(new fn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new fn(r,i.value))}),e}function qd(n,e){if(cn(e))return n;{const t=bp(n,e);return new yl(null!=t?new lr(t):n.writeTree_.subtree(e))}}function _P(n){return n.writeTree_.isEmpty()}function o_(n,e){return V$(On(),n.writeTree_,e)}function V$(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,ne.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=V$(Tr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Tr(n,".priority"),r)),t}}function yS(n,e){return $$(e,n)}function qZ(n,e){if(n.snap)return Ca(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ca(Tr(n.path,t),e))return!0;return!1}function YZ(n){return n.visible}function B$(n,e,t){let r=yl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const c=s.path;let h;if(s.snap)Ca(t,c)?(h=Ss(t,c),r=bw(r,h,s.snap)):Ca(c,t)&&(h=Ss(c,t),r=bw(r,On(),s.snap.getChild(h)));else{if(!s.children)throw(0,ne.g5)("WriteRecord should have .snap or .children");if(Ca(t,c))h=Ss(t,c),r=gP(r,h,s.children);else if(Ca(c,t))if(h=Ss(c,t),cn(h))r=gP(r,On(),s.children);else{const p=(0,ne.DV)(s.children,ln(h));if(p){const y=p.getChild(Jn(h));r=bw(r,On(),y)}}}}}return r}function U$(n,e,t,r,i){if(r||i){const s=qd(n.visibleWrites,e);return!i&&_P(s)?t:i||null!=t||mP(s,On())?o_(B$(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Ca(y.path,e)||Ca(e,y.path))},e),t||Jt.EMPTY_NODE):null}{const s=bp(n.visibleWrites,e);if(null!=s)return s;{const c=qd(n.visibleWrites,e);return _P(c)?t:null!=t||mP(c,On())?o_(c,t||Jt.EMPTY_NODE):null}}}function vS(n,e,t,r){return U$(n.writeTree,n.treePath,e,t,r)}function yP(n,e){return function ZZ(n,e,t){let r=Jt.EMPTY_NODE;const i=bp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ar,(s,c)=>{r=r.updateImmediateChild(s,c)}),r;if(t){const s=qd(n.visibleWrites,e);return t.forEachChild(ar,(c,h)=>{const p=o_(qd(s,new Bn(c)),h);r=r.updateImmediateChild(c,p)}),L$(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return L$(qd(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function H$(n,e,t,r){return function QZ(n,e,t,r,i){(0,ne.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Tr(e,t);if(mP(n.visibleWrites,s))return null;{const c=qd(n.visibleWrites,s);return _P(c)?i.getChild(t):o_(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function bS(n,e){return function JZ(n,e){return bp(n.visibleWrites,e)}(n.writeTree,Tr(n.treePath,e))}function vP(n,e,t){return function XZ(n,e,t,r){const i=Tr(e,t),s=bp(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?o_(qd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function j$(n,e){return $$(Tr(n.treePath,e),n.writeTree)}function $$(n,e){return{treePath:n,writeTree:e}}class r7{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,ne.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,ne.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,gw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,function pw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,function r_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,ne.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,gw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const z$=new class i7{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class bP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Wd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:vp(this.viewCache_),s=function n7(n,e,t,r,i,s){return function e7(n,e,t,r,i,s,c){let h;const p=qd(n.visibleWrites,e),y=bp(p,On());if(null!=y)h=y;else{if(null==t)return[];h=o_(p,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const C=[],S=c.getCompare(),R=s?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let V=R.getNext();for(;V&&C.length<i;)0!==S(V,r)&&C.push(V),V=R.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function G$(n,e,t,r,i,s){const c=e.eventCache;if(null!=bS(r,t))return e;{let h,p;if(cn(t))if((0,ne.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=vp(e),S=yP(r,y instanceof Jt?y:Jt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,s)}else{const y=vS(r,vp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=ln(t);if(".priority"===y){(0,ne.hu)(1===Gd(t),"Can't have a priority with additional path components");const C=c.getNode();p=e.serverCache.getNode();const S=H$(r,t,C,p);h=null!=S?n.filter.updatePriority(C,S):c.getNode()}else{const C=Jn(t);let S;if(c.isCompleteForChild(y)){p=e.serverCache.getNode();const R=H$(r,t,c.getNode(),p);S=null!=R?c.getNode().getImmediateChild(y).updateChild(C,R):c.getNode().getImmediateChild(y)}else S=vP(r,y,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),y,S,C,i,s):c.getNode()}}return vw(e,h,c.isFullyInitialized()||cn(t),n.filter.filtersNodes())}}function wS(n,e,t,r,i,s,c,h){const p=e.serverCache;let y;const C=c?n.filter:n.filter.getIndexedFilter();if(cn(t))y=C.updateFullNode(p.getNode(),r,null);else if(C.filtersNodes()&&!p.isFiltered()){const V=p.getNode().updateChild(t,r);y=C.updateFullNode(p.getNode(),V,null)}else{const V=ln(t);if(!p.isCompleteForPath(t)&&Gd(t)>1)return e;const H=Jn(t),ye=p.getNode().getImmediateChild(V).updateChild(H,r);y=".priority"===V?C.updatePriority(p.getNode(),ye):C.updateChild(p.getNode(),V,ye,H,z$,null)}const S=P$(e,y,p.isFullyInitialized()||cn(t),C.filtersNodes());return G$(n,S,t,i,new bP(i,S,s),h)}function wP(n,e,t,r,i,s,c){const h=e.eventCache;let p,y;const C=new bP(i,e,s);if(cn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,c),p=vw(e,y,!0,n.filter.filtersNodes());else{const S=ln(t);if(".priority"===S)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=vw(e,y,h.isFullyInitialized(),h.isFiltered());else{const R=Jn(t),V=h.getNode().getImmediateChild(S);let H;if(cn(R))H=r;else{const Q=C.getCompleteChild(S);H=null!=Q?".priority"===QN(R)&&Q.getChild(w$(R)).isEmpty()?Q:Q.updateChild(R,r):Jt.EMPTY_NODE}p=V.equals(H)?e:vw(e,n.filter.updateChild(h.getNode(),S,H,R,C,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function W$(n,e){return n.eventCache.isCompleteForChild(e)}function q$(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function EP(n,e,t,r,i,s,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=cn(t)?r:new lr(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((S,R)=>{if(C.hasChild(S)){const H=q$(0,e.serverCache.getNode().getImmediateChild(S),R);p=wS(n,p,new Bn(S),H,i,s,c,h)}}),y.children.inorderTraversal((S,R)=>{const V=!e.serverCache.isCompleteForChild(S)&&null===R.value;if(!C.hasChild(S)&&!V){const Q=q$(0,e.serverCache.getNode().getImmediateChild(S),R);p=wS(n,p,new Bn(S),Q,i,s,c,h)}}),p}function m7(n,e){const t=vp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!cn(e)&&!t.getImmediateChild(ln(e)).isEmpty())?t.getChild(e):null}function Z$(n,e,t,r){e.type===Ia.MERGE&&null!==e.source.queryId&&((0,ne.hu)(vp(n.viewCache_),"We should always have a full cache before handling merges"),(0,ne.hu)(_S(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function a7(n,e,t,r,i){const s=new r7;let c,h;if(t.type===Ia.OVERWRITE){const y=t;y.source.fromUser?c=wP(n,e,y.path,y.snap,r,i,s):((0,ne.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!cn(y.path),c=wS(n,e,y.path,y.snap,r,i,h,s))}else if(t.type===Ia.MERGE){const y=t;y.source.fromUser?c=function c7(n,e,t,r,i,s,c){let h=e;return r.foreach((p,y)=>{const C=Tr(t,p);W$(e,ln(C))&&(h=wP(n,h,C,y,i,s,c))}),r.foreach((p,y)=>{const C=Tr(t,p);W$(e,ln(C))||(h=wP(n,h,C,y,i,s,c))}),h}(n,e,y.path,y.children,r,i,s):((0,ne.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),c=EP(n,e,y.path,y.children,r,i,h,s))}else if(t.type===Ia.ACK_USER_WRITE){const y=t;c=y.revert?function h7(n,e,t,r,i,s){let c;if(null!=bS(r,t))return e;{const h=new bP(r,e,i),p=e.eventCache.getNode();let y;if(cn(t)||".priority"===ln(t)){let C;if(e.serverCache.isFullyInitialized())C=vS(r,vp(e));else{const S=e.serverCache.getNode();(0,ne.hu)(S instanceof Jt,"serverChildren would be complete if leaf node"),C=yP(r,S)}y=n.filter.updateFullNode(p,C,s)}else{const C=ln(t);let S=vP(r,C,e.serverCache);null==S&&e.serverCache.isCompleteForChild(C)&&(S=p.getImmediateChild(C)),y=null!=S?n.filter.updateChild(p,C,S,Jn(t),h,s):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(p,C,Jt.EMPTY_NODE,Jn(t),h,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=vS(r,vp(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,s)))}return c=e.serverCache.isFullyInitialized()||null!=bS(r,On()),vw(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function u7(n,e,t,r,i,s,c){if(null!=bS(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(cn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return wS(n,e,t,p.getNode().getChild(t),i,s,h,c);if(cn(t)){let y=new lr(null);return p.getNode().forEachChild(ac,(C,S)=>{y=y.set(new Bn(C),S)}),EP(n,e,t,y,i,s,h,c)}return e}{let y=new lr(null);return r.foreach((C,S)=>{const R=Tr(t,C);p.isCompleteForPath(R)&&(y=y.set(C,p.getNode().getChild(R)))}),EP(n,e,t,y,i,s,h,c)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Ia.LISTEN_COMPLETE)throw(0,ne.g5)("Unknown operation type: "+t.type);c=function d7(n,e,t,r,i){const s=e.serverCache;return G$(n,P$(e,s.getNode(),s.isFullyInitialized()||cn(t),s.isFiltered()),t,r,z$,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function l7(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=_S(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(function R$(n){return{type:"value",snapshotNode:n}}(_S(e)))}}(e,c,p),{viewCache:c,changes:p}}(n.processor_,i,e,t,r);return function o7(n,e){(0,ne.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,ne.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,ne.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function Q$(n,e,t,r){return function BZ(n,e,t,r){const i=[],s=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function DZ(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),yw(n,i,"child_removed",e,r,t),yw(n,i,"child_added",e,r,t),yw(n,i,"child_moved",s,r,t),yw(n,i,"child_changed",e,r,t),yw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let ES,IS;function CP(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,ne.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Z$(s,e,t,r)}{let s=[];for(const c of n.views.values())s=s.concat(Z$(c,e,t,r));return s}}function Kd(n,e){let t=null;for(const r of n.views.values())t=t||m7(r,e);return t}class rz{constructor(e){this.listenProvider_=e,this.syncPointTree_=new lr(null),this.pendingWriteTree_=function t7(){return{visibleWrites:yl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function IP(n,e,t,r,i){return function $Z(n,e,t,r,i){(0,ne.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=bw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?a_(n,new yp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Zd(n,e,t=!1){const r=function GZ(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function WZ(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,ne.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&qZ(h,r.path)?i=!1:Ca(r.path,h.path)&&(s=!0)),c--}return!!i&&(s?(function KZ(n){n.visibleWrites=B$(n.allWrites,YZ,On()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=F$(n.visibleWrites,r.path):Ri(r.children,p=>{n.visibleWrites=F$(n.visibleWrites,Tr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new lr(null);return null!=r.snap?s=s.set(On(),!0):Ri(r.children,c=>{s=s.set(new Bn(c),!0)}),a_(n,new gS(r.path,s,t))}return[]}function ww(n,e,t){return a_(n,new yp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function SS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(c,h)=>{const y=Kd(h,Ss(c,e));if(y)return y});return U$(i,e,s,t,!0)}function a_(n,e){return sz(e,n.syncPointTree_,null,yS(n.pendingWriteTree_,On()))}function sz(n,e,t,r){if(cn(n.path))return oz(n,e,t,r);{const i=e.get(On());null==t&&null!=i&&(t=Kd(i,On()));let s=[];const c=ln(n.path),h=n.operationForChild(c),p=e.children.get(c);if(p&&h){const y=t?t.getImmediateChild(c):null,C=j$(r,c);s=s.concat(sz(h,p,y,C))}return i&&(s=s.concat(CP(i,n,r,t))),s}}function oz(n,e,t,r){const i=e.get(On());null==t&&null!=i&&(t=Kd(i,On()));let s=[];return e.children.inorderTraversal((c,h)=>{const p=t?t.getImmediateChild(c):null,y=j$(r,c),C=n.operationForChild(c);C&&(s=s.concat(oz(C,h,p,y)))}),i&&(s=s.concat(CP(i,n,r,t))),s}function SP(n,e){return n.tagToQueryMap.get(e)}function TP(n){const e=n.indexOf("$");return(0,ne.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Bn(n.substr(0,e))}}function AP(n,e,t){const r=n.syncPointTree_.get(e);return(0,ne.hu)(r,"Missing sync point for query tag that we're tracking"),CP(r,t,yS(n.pendingWriteTree_,e),null)}class MP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new MP(t)}node(){return this.node_}}class xP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Tr(this.path_,e);return new xP(this.syncTree_,t)}node(){return SS(this.syncTree_,this.path_)}}const lz=function(n,e,t){return n&&"object"==typeof n?((0,ne.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?V7(n[".sv"],e,t):"object"==typeof n[".sv"]?B7(n[".sv"],e):void(0,ne.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},V7=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,ne.hu)(!1,"Unexpected server value: "+n)},B7=function(n,e,t){n.hasOwnProperty("increment")||(0,ne.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,ne.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,ne.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},RP=function(n,e,t){return kP(n,new MP(e),t)};function kP(n,e,t){const r=n.getPriority().val(),i=lz(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const c=n,h=lz(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new t_(h,Rr(i)):n}{const c=n;return s=c,i!==c.getPriority().val()&&(s=s.updatePriority(new t_(i))),c.forEachChild(ar,(h,p)=>{const y=kP(p,e.getImmediateChild(h),t);y!==p&&(s=s.updateImmediateChild(h,y))}),s}}class OP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function AS(n,e){let t=e instanceof Bn?e:new Bn(e),r=n,i=ln(t);for(;null!==i;){const s=(0,ne.DV)(r.node.children,i)||{children:{},childCount:0};r=new OP(i,r,s),t=Jn(t),i=ln(t)}return r}function wp(n){return n.node.value}function NP(n,e){n.node.value=e,PP(n)}function uz(n){return n.node.childCount>0}function MS(n,e){Ri(n.node.children,(t,r)=>{e(new OP(t,n,r))})}function dz(n,e,t,r){t&&!r&&e(n),MS(n,i=>{dz(i,e,!0,r)}),t&&r&&e(n)}function Iw(n){return new Bn(null===n.parent?n.name:Iw(n.parent)+"/"+n.name)}function PP(n){null!==n.parent&&function j7(n,e,t){const r=function U7(n){return void 0===wp(n)&&!uz(n)}(t),i=(0,ne.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,PP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,PP(n))}(n.parent,n.name,n)}const $7=/[\[\].#$\/\u0000-\u001F\u007F]/,z7=/[\[\].#$\u0000-\u001F\u007F]/,FP=10485760,xS=function(n){return"string"==typeof n&&0!==n.length&&!$7.test(n)},Sw=function(n,e,t){const r=t instanceof Bn?new aZ(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+mp(r));if("function"==typeof e)throw new Error(n+"contains a function "+mp(r)+" with contents = "+e.toString());if(iS(e))throw new Error(n+"contains "+e.toString()+" "+mp(r));if("string"==typeof e&&e.length>FP/3&&(0,ne.ug)(e)>FP)throw new Error(n+"contains a string greater than "+FP+" utf8 bytes "+mp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Ri(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!xS(c)))throw new Error(n+" contains an invalid key ("+c+") "+mp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function lZ(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,ne.ug)(e),E$(n)})(r,c),Sw(n,h,r),function cZ(n){const e=n.parts_.pop();n.byteLength_-=(0,ne.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+mp(r)+" in addition to actual children.")}},pz=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!xS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!z7.test(n)}(n)}(t))throw new Error((0,ne.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class K7{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ao(n,e,t){(function RS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!XN(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function mz(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Y7(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Ca(r,e)||Ca(e,r))}function Y7(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();pp&&xi("event: "+t.toString()),Jm(r)}}}class Q7{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new K7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pS(),this.transactionQueueTree_=new OP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yz(n){const t=n.infoData_.getNode(new Bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Aw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:yz(n)})}function vz(n,e,t,r,i){n.dataUpdateCount++;const s=new Bn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const p=(0,ne.UI)(t,y=>Rr(y));c=function R7(n,e,t,r){const i=SP(n,r);if(i){const s=TP(i),c=s.path,h=s.queryId,p=Ss(c,e),y=lr.fromObject(t);return AP(n,c,new s_(fP(h),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Rr(t);c=function iz(n,e,t,r){const i=SP(n,r);if(null!=i){const s=TP(i),c=s.path,h=s.queryId,p=Ss(c,e);return AP(n,c,new yp(fP(h),p,t))}return[]}(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,ne.UI)(t,y=>Rr(y));c=function A7(n,e,t){const r=lr.fromObject(t);return a_(n,new s_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Rr(t);c=ww(n.serverSyncTree_,s,p)}let h=s;c.length>0&&(h=c_(n,s)),Ao(n.eventQueue_,h,c)}function bz(n,e){BP(n,"connected",e),!1===e&&function nQ(n){l_(n,"onDisconnectEvents");const e=Aw(n),t=pS();uP(n.onDisconnect_,On(),(i,s)=>{const c=function(n,e,t,r){return kP(e,new xP(t,n),r)}(i,s,n.serverSyncTree_,e);i_(t,i,c)});let r=[];uP(t,On(),(i,s)=>{r=r.concat(ww(n.serverSyncTree_,i,s));const c=function $P(n,e){const t=Iw(Cz(n,e)),r=AS(n.transactionQueueTree_,e);return function H7(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{zP(n,i)}),zP(n,r),dz(r,i=>{zP(n,i)}),t}(n,i);c_(n,c)}),n.onDisconnect_=pS(),Ao(n.eventQueue_,On(),r)}(n)}function BP(n,e,t){const r=new Bn("/.info/"+e),i=Rr(t);n.infoData_.updateSnapshot(r,i);const s=ww(n.infoSyncTree_,r,i);Ao(n.eventQueue_,r,s)}function kS(n){return n.nextWriteId_++}function l_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),xi(t,...e)}function jP(n,e,t){return SS(n.serverSyncTree_,e,t)||Jt.EMPTY_NODE}function OS(n,e=n.transactionQueueTree_){if(e||NS(n,e),wp(e)){const t=Iz(n,e);(0,ne.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function cQ(n,e,t){const r=t.map(y=>y.currentWriteId),i=jP(n,e,r);let s=i;const c=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,ne.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const S=Ss(e,C.path);s=s.updateChild(S,C.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,y=>{l_(n,"transaction put response",{path:p.toString(),status:y});let C=[];if("ok"===y){const S=[];for(let R=0;R<t.length;R++)t[R].status=2,C=C.concat(Zd(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&S.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();NS(n,AS(n.transactionQueueTree_,e)),OS(n,n.transactionQueueTree_),Ao(n.eventQueue_,e,C);for(let R=0;R<S.length;R++)Jm(S[R])}else{if("datastale"===y)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{rs("transaction at "+p.toString()+" failed: "+y);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=y}c_(n,e)}},c)}(n,Iw(e),t)}else uz(e)&&MS(e,t=>{OS(n,t)})}function c_(n,e){const t=Cz(n,e),r=Iw(t);return function uQ(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=Ss(t,p.path);let S,C=!1;if((0,ne.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)C=!0,S=p.abortReason,i=i.concat(Zd(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)C=!0,S="maxretry",i=i.concat(Zd(n.serverSyncTree_,p.currentWriteId,!0));else{const R=jP(n,p.path,c);p.currentInputSnapshot=R;const V=e[h].update(R.val());if(void 0!==V){Sw("transaction failed: Data returned ",V,p.path);let H=Rr(V);"object"==typeof V&&null!=V&&(0,ne.r3)(V,".priority")||(H=H.updatePriority(R.getPriority()));const ye=p.currentWriteId,Ye=Aw(n),ct=RP(H,R,Ye);p.currentOutputSnapshotRaw=H,p.currentOutputSnapshotResolved=ct,p.currentWriteId=kS(n),c.splice(c.indexOf(ye),1),i=i.concat(IP(n.serverSyncTree_,p.path,ct,p.currentWriteId,p.applyLocally)),i=i.concat(Zd(n.serverSyncTree_,ye,!0))}else C=!0,S="nodata",i=i.concat(Zd(n.serverSyncTree_,p.currentWriteId,!0))}Ao(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}NS(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Jm(r[h]);OS(n,n.transactionQueueTree_)}(n,Iz(n,t),r),r}function Cz(n,e){let t,r=n.transactionQueueTree_;for(t=ln(e);null!==t&&void 0===wp(r);)r=AS(r,t),t=ln(e=Jn(e));return r}function Iz(n,e){const t=[];return Dz(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Dz(n,e,t){const r=wp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);MS(e,i=>{Dz(n,i,t)})}function NS(n,e){const t=wp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,NP(e,t.length>0?t:void 0)}MS(e,r=>{NS(n,r)})}function zP(n,e){const t=wp(e);if(t){const r=[];let i=[],s=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,ne.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,t[c].status=3,t[c].abortReason="set"):((0,ne.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Zd(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?NP(e,void 0):t.length=s+1,Ao(n.eventQueue_,Iw(e),i);for(let c=0;c<r.length;c++)Jm(r[c])}}const GP=function(n,e){const t=fQ(n),r=t.namespace;return"firebase.com"===t.domain&&oc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&oc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new GN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Bn(t.pathString)}},fQ=function(n){let e="",t="",r="",i="",s="",c=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(C,S)),C<S&&(i=function dQ(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,S)));const R=function hQ(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):rs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));y=e.indexOf(":"),y>=0?(c="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const V=e.slice(0,y);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const H=e.indexOf(".");r=e.substring(0,H).toLowerCase(),t=e.substring(H+1),s=r}"ns"in R&&(s=R.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:s}};class Mo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return cn(this._path)?null:QN(this._path)}get ref(){return new vl(this._repo,this._path)}get _queryIdentifier(){const e=O$(this._queryParams),t=$N(e);return"{}"===t?"default":t}get _queryObject(){return O$(this._queryParams)}isEqual(e){if(!((e=(0,ne.m9)(e))instanceof Mo))return!1;const t=this._repo===e._repo,r=XN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function sZ(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class vl extends Mo{constructor(e,t){super(e,t,new oP,!1)}get parent(){const e=w$(this._path);return null===e?null:new vl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function v7(n){(0,ne.hu)(!ES,"__referenceConstructor has already been defined"),ES=n})(vl),function I7(n){(0,ne.hu)(!IS,"__referenceConstructor has already been defined"),IS=n}(vl);const qP={};class OQ{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function X7(n,e,t){if(n.stats_=KN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new fS(n.repoInfo_,(r,i,s,c)=>{vz(n,r,i,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>bz(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ne.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new _p(n.repoInfo_,e,(r,i,s,c)=>{vz(n,r,i,s,c)},r=>{bz(n,r)},r=>{!function J7(n,e){Ri(e,(t,r)=>{BP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function LY(n,e){const t=n.toString();return qN[t]||(qN[t]=e()),qN[t]}(n.repoInfo_,()=>new LZ(n.stats_,n.server_)),n.infoData_=new kZ,n.infoSyncTree_=new rz({startListening:(r,i,s,c)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=ww(n.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),BP(n,"connected",!1),n.serverSyncTree_=new rz({startListening:(r,i,s,c)=>(n.server_.listen(r,s,i,(h,p)=>{const y=c(h,p);Ao(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vl(this._repo,On())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function xQ(n,e){const t=qP[e];(!t||t[n.key]!==n)&&oc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Ez(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&oc("Cannot call "+e+" on a deleted database.")}}function NQ(n=(0,ns.getApp)(),e){const t=(0,ns._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,ne.P0)("database");r&&function PQ(n,e,t,r={}){(n=(0,ne.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&oc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&oc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new cw(cw.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,ne.Sg)(r.mockUserToken,n.app.options.projectId);s=new cw(c)}!function AQ(n,e,t,r){n.repoInfo_=new GN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}_p.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},_p.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function FQ(n){(function bY(n){UN=n})(ns.SDK_VERSION),(0,ns._registerComponent)(new hm.wA("database",(e,{instanceIdentifier:t})=>function MQ(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||oc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,c=GP(s,i),h=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${h.namespace}`,c=GP(s,i),h=c.repoInfo):p=!c.repoInfo.secure;const C=i&&p?new cw(cw.OWNER):new NY(n.name,n.options,e);pz("Invalid Firebase Database URL",c),cn(c.path)||oc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function RQ(n,e,t,r){let i=qP[e.name];i||(i={},qP[e.name]=i);let s=i[n.toURLString()];return s&&oc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Q7(n,!1,t,r),i[n.toURLString()]=s,s}(h,n,C,new OY(n.name,t));return new OQ(S,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(Lj,"0.14.1",n),(0,ns.registerVersion)(Lj,"0.14.1","esm2017")}();class KP{constructor(e){return e}}const Nz="database",YP=new d.OlP("angularfire2.database-instances");function HQ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new KP(r)}}const jQ={provide:class BQ{constructor(){return(0,pn.vb)(Nz)}},deps:[[new d.FiY,YP]]},$Q={provide:KP,useFactory:function UQ(n,e){const t=(0,pn.JM)(Nz,n,e);return t&&new KP(t)},deps:[[new d.FiY,YP],lp]};let zQ=(()=>{class n{constructor(){(0,lu.KN)("angularfire",pn.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[$Q,jQ]}),n})();function GQ(n,...e){return{ngModule:zQ,providers:[{provide:YP,useFactory:HQ(n),multi:!0,deps:[d.R0b,d.zs3,pn.HU,xD,[new d.FiY,VN],[new d.FiY,Zm],...e]}]}}const WQ=(0,pn.u3)(NQ,!0);class ZP{constructor(e){return e}}const Pz="firestore",QP=new d.OlP("angularfire2.firestore-instances");function YQ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ZP(r)}}const ZQ={provide:class qQ{constructor(){return(0,pn.vb)(Pz)}},deps:[[new d.FiY,QP]]},QQ={provide:ZP,useFactory:function KQ(n,e){const t=(0,pn.JM)(Pz,n,e);return t&&new ZP(t)},deps:[[new d.FiY,QP],lp]};let XQ=(()=>{class n{constructor(){(0,lu.KN)("angularfire",pn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[QQ,ZQ]}),n})();function JQ(n,...e){return{ngModule:XQ,providers:[{provide:QP,useFactory:YQ(n),multi:!0,deps:[d.R0b,d.zs3,pn.HU,xD,[new d.FiY,VN],[new d.FiY,Zm],...e]}]}}const e9=(0,pn.u3)(y6,!0);let t9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[d8]}),n.\u0275inj=d.cJS({imports:[va.hO.initializeApp(FN_firebase),oo,u8,dY,H1,qK,NM,bL,pL,e8,I4(()=>D4(FN_firebase)),yY(()=>vY()),GQ(()=>WQ()),JQ(()=>e9())]}),n})();(0,d.G48)(),Wa().bootstrapModule(t9).catch(n=>console.error(n))},9751:(mt,Re,L)=>{L.d(Re,{y:()=>pe});var d=L(930),z=L(727),P=L(8822),le=L(9635),he=L(2416),be=L(576),ce=L(2806);let pe=(()=>{class te{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const Ae=new te;return Ae.source=this,Ae.operator=Fe,Ae}subscribe(Fe,Ae,ot){const Ce=function q(te){return te&&te instanceof d.Lv||function K(te){return te&&(0,be.m)(te.next)&&(0,be.m)(te.error)&&(0,be.m)(te.complete)}(te)&&(0,z.Nn)(te)}(Fe)?Fe:new d.Hp(Fe,Ae,ot);return(0,ce.x)(()=>{const{operator:_e,source:Xe}=this;Ce.add(_e?_e.call(Ce,Xe):Xe?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(Ae){Fe.error(Ae)}}forEach(Fe,Ae){return new(Ae=we(Ae))((ot,Ce)=>{const _e=new d.Hp({next:Xe=>{try{Fe(Xe)}catch(Je){Ce(Je),_e.unsubscribe()}},error:Ce,complete:ot});this.subscribe(_e)})}_subscribe(Fe){var Ae;return null===(Ae=this.source)||void 0===Ae?void 0:Ae.subscribe(Fe)}[P.L](){return this}pipe(...Fe){return(0,le.U)(Fe)(this)}toPromise(Fe){return new(Fe=we(Fe))((Ae,ot)=>{let Ce;this.subscribe(_e=>Ce=_e,_e=>ot(_e),()=>Ae(Ce))})}}return te.create=Ge=>new te(Ge),te})();function we(te){var Ge;return null!==(Ge=te??he.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(mt,Re,L)=>{L.d(Re,{x:()=>ce});var d=L(9751),z=L(727);const le=(0,L(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=L(8737),be=L(2806);let ce=(()=>{class we extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const te=new pe(this,this);return te.operator=q,te}_throwIfClosed(){if(this.closed)throw new le}next(q){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(q)}})}error(q){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:te}=this;for(;te.length;)te.shift().error(q)}})}complete(){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:te,isStopped:Ge,observers:Fe}=this;return te||Ge?z.Lc:(this.currentObservers=null,Fe.push(q),new z.w0(()=>{this.currentObservers=null,(0,he.P)(Fe,q)}))}_checkFinalizedStatuses(q){const{hasError:te,thrownError:Ge,isStopped:Fe}=this;te?q.error(Ge):Fe&&q.complete()}asObservable(){const q=new d.y;return q.source=this,q}}return we.create=(K,q)=>new pe(K,q),we})();class pe extends ce{constructor(K,q){super(),this.destination=K,this.source=q}next(K){var q,te;null===(te=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===te||te.call(q,K)}error(K){var q,te;null===(te=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===te||te.call(q,K)}complete(){var K,q;null===(q=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===q||q.call(K)}_subscribe(K){var q,te;return null!==(te=null===(q=this.source)||void 0===q?void 0:q.subscribe(K))&&void 0!==te?te:z.Lc}}},930:(mt,Re,L)=>{L.d(Re,{Hp:()=>ot,Lv:()=>te});var d=L(576),z=L(727),P=L(2416),le=L(7849),he=L(5032);const be=we("C",void 0,void 0);function we(Pe,Oe,Se){return{kind:Pe,value:Oe,error:Se}}var K=L(3410),q=L(2806);class te extends z.w0{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,z.Nn)(Oe)&&Oe.add(this)):this.destination=Je}static create(Oe,Se,We){return new ot(Oe,Se,We)}next(Oe){this.isStopped?Xe(function pe(Pe){return we("N",Pe,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?Xe(function ce(Pe){return we("E",void 0,Pe)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?Xe(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Fe(Pe,Oe){return Ge.call(Pe,Oe)}class Ae{constructor(Oe){this.partialObserver=Oe}next(Oe){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Oe)}catch(We){Ce(We)}}error(Oe){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Oe)}catch(We){Ce(We)}else Ce(Oe)}complete(){const{partialObserver:Oe}=this;if(Oe.complete)try{Oe.complete()}catch(Se){Ce(Se)}}}class ot extends te{constructor(Oe,Se,We){let ae;if(super(),(0,d.m)(Oe)||!Oe)ae={next:Oe??void 0,error:Se??void 0,complete:We??void 0};else{let fe;this&&P.v.useDeprecatedNextContext?(fe=Object.create(Oe),fe.unsubscribe=()=>this.unsubscribe(),ae={next:Oe.next&&Fe(Oe.next,fe),error:Oe.error&&Fe(Oe.error,fe),complete:Oe.complete&&Fe(Oe.complete,fe)}):ae=Oe}this.destination=new Ae(ae)}}function Ce(Pe){P.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Pe):(0,le.h)(Pe)}function Xe(Pe,Oe){const{onStoppedNotification:Se}=P.v;Se&&K.z.setTimeout(()=>Se(Pe,Oe))}const Je={closed:!0,next:he.Z,error:function _e(Pe){throw Pe},complete:he.Z}},727:(mt,Re,L)=>{L.d(Re,{Lc:()=>be,w0:()=>he,Nn:()=>ce});var d=L(576);const P=(0,L(3888).d)(we=>function(q){we(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((te,Ge)=>`${Ge+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var le=L(8737);class he{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Fe of q)Fe.remove(this);else q.remove(this);const{initialTeardown:te}=this;if((0,d.m)(te))try{te()}catch(Fe){K=Fe instanceof P?Fe.errors:[Fe]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Fe of Ge)try{pe(Fe)}catch(Ae){K=K??[],Ae instanceof P?K=[...K,...Ae.errors]:K.push(Ae)}}if(K)throw new P(K)}}add(K){var q;if(K&&K!==this)if(this.closed)pe(K);else{if(K instanceof he){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(K)}}_hasParent(K){const{_parentage:q}=this;return q===K||Array.isArray(q)&&q.includes(K)}_addParent(K){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(K),q):q?[q,K]:K}_removeParent(K){const{_parentage:q}=this;q===K?this._parentage=null:Array.isArray(q)&&(0,le.P)(q,K)}remove(K){const{_finalizers:q}=this;q&&(0,le.P)(q,K),K instanceof he&&K._removeParent(this)}}he.EMPTY=(()=>{const we=new he;return we.closed=!0,we})();const be=he.EMPTY;function ce(we){return we instanceof he||we&&"closed"in we&&(0,d.m)(we.remove)&&(0,d.m)(we.add)&&(0,d.m)(we.unsubscribe)}function pe(we){(0,d.m)(we)?we():we.unsubscribe()}},2416:(mt,Re,L)=>{L.d(Re,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,Re,L)=>{L.d(Re,{E:()=>z});const z=new(L(9751).y)(he=>he.complete())},8996:(mt,Re,L)=>{L.d(Re,{D:()=>Oe});var d=L(8421),z=L(5363),P=L(9468),be=L(9751),pe=L(2202),we=L(576),K=L(9672);function te(Se,We){if(!Se)throw new Error("Iterable cannot be null");return new be.y(ae=>{(0,K.f)(ae,We,()=>{const fe=Se[Symbol.asyncIterator]();(0,K.f)(ae,We,()=>{fe.next().then(Ee=>{Ee.done?ae.complete():ae.next(Ee.value)})},0,!0)})})}var Ge=L(3670),Fe=L(8239),Ae=L(1144),ot=L(6495),Ce=L(2206),_e=L(4532),Xe=L(3260);function Oe(Se,We){return We?function Pe(Se,We){if(null!=Se){if((0,Ge.c)(Se))return function le(Se,We){return(0,d.Xf)(Se).pipe((0,P.R)(We),(0,z.Q)(We))}(Se,We);if((0,Ae.z)(Se))return function ce(Se,We){return new be.y(ae=>{let fe=0;return We.schedule(function(){fe===Se.length?ae.complete():(ae.next(Se[fe++]),ae.closed||this.schedule())})})}(Se,We);if((0,Fe.t)(Se))return function he(Se,We){return(0,d.Xf)(Se).pipe((0,P.R)(We),(0,z.Q)(We))}(Se,We);if((0,Ce.D)(Se))return te(Se,We);if((0,ot.T)(Se))return function q(Se,We){return new be.y(ae=>{let fe;return(0,K.f)(ae,We,()=>{fe=Se[pe.h](),(0,K.f)(ae,We,()=>{let Ee,ee;try{({value:Ee,done:ee}=fe.next())}catch(re){return void ae.error(re)}ee?ae.complete():ae.next(Ee)},0,!0)}),()=>(0,we.m)(fe?.return)&&fe.return()})}(Se,We);if((0,Xe.L)(Se))return function Je(Se,We){return te((0,Xe.Q)(Se),We)}(Se,We)}throw(0,_e.z)(Se)}(Se,We):(0,d.Xf)(Se)}},8421:(mt,Re,L)=>{L.d(Re,{Xf:()=>Ge});var d=L(655),z=L(1144),P=L(8239),le=L(9751),he=L(3670),be=L(2206),ce=L(4532),pe=L(6495),we=L(3260),K=L(576),q=L(7849),te=L(8822);function Ge(Pe){if(Pe instanceof le.y)return Pe;if(null!=Pe){if((0,he.c)(Pe))return function Fe(Pe){return new le.y(Oe=>{const Se=Pe[te.L]();if((0,K.m)(Se.subscribe))return Se.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,z.z)(Pe))return function Ae(Pe){return new le.y(Oe=>{for(let Se=0;Se<Pe.length&&!Oe.closed;Se++)Oe.next(Pe[Se]);Oe.complete()})}(Pe);if((0,P.t)(Pe))return function ot(Pe){return new le.y(Oe=>{Pe.then(Se=>{Oe.closed||(Oe.next(Se),Oe.complete())},Se=>Oe.error(Se)).then(null,q.h)})}(Pe);if((0,be.D)(Pe))return _e(Pe);if((0,pe.T)(Pe))return function Ce(Pe){return new le.y(Oe=>{for(const Se of Pe)if(Oe.next(Se),Oe.closed)return;Oe.complete()})}(Pe);if((0,we.L)(Pe))return function Xe(Pe){return _e((0,we.Q)(Pe))}(Pe)}throw(0,ce.z)(Pe)}function _e(Pe){return new le.y(Oe=>{(function Je(Pe,Oe){var Se,We,ae,fe;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Se=(0,d.KL)(Pe);!(We=yield Se.next()).done;)if(Oe.next(We.value),Oe.closed)return}catch(Ee){ae={error:Ee}}finally{try{We&&!We.done&&(fe=Se.return)&&(yield fe.call(Se))}finally{if(ae)throw ae.error}}Oe.complete()})})(Pe,Oe).catch(Se=>Oe.error(Se))})}},6451:(mt,Re,L)=>{L.d(Re,{T:()=>be});var d=L(8189),z=L(8421),P=L(515),le=L(3269),he=L(8996);function be(...ce){const pe=(0,le.yG)(ce),we=(0,le._6)(ce,1/0),K=ce;return K.length?1===K.length?(0,z.Xf)(K[0]):(0,d.J)(we)((0,he.D)(K,pe)):P.E}},5403:(mt,Re,L)=>{L.d(Re,{x:()=>z});var d=L(930);function z(le,he,be,ce,pe){return new P(le,he,be,ce,pe)}class P extends d.Lv{constructor(he,be,ce,pe,we,K){super(he),this.onFinalize=we,this.shouldUnsubscribe=K,this._next=be?function(q){try{be(q)}catch(te){he.error(te)}}:super._next,this._error=pe?function(q){try{pe(q)}catch(te){he.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(q){he.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:be}=this;super.unsubscribe(),!be&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4004:(mt,Re,L)=>{L.d(Re,{U:()=>P});var d=L(4482),z=L(5403);function P(le,he){return(0,d.e)((be,ce)=>{let pe=0;be.subscribe((0,z.x)(ce,we=>{ce.next(le.call(he,we,pe++))}))})}},8189:(mt,Re,L)=>{L.d(Re,{J:()=>P});var d=L(5577),z=L(4671);function P(le=1/0){return(0,d.z)(z.y,le)}},5577:(mt,Re,L)=>{L.d(Re,{z:()=>pe});var d=L(4004),z=L(8421),P=L(4482),le=L(9672),he=L(5403),ce=L(576);function pe(we,K,q=1/0){return(0,ce.m)(K)?pe((te,Ge)=>(0,d.U)((Fe,Ae)=>K(te,Fe,Ge,Ae))((0,z.Xf)(we(te,Ge))),q):("number"==typeof K&&(q=K),(0,P.e)((te,Ge)=>function be(we,K,q,te,Ge,Fe,Ae,ot){const Ce=[];let _e=0,Xe=0,Je=!1;const Pe=()=>{Je&&!Ce.length&&!_e&&K.complete()},Oe=We=>_e<te?Se(We):Ce.push(We),Se=We=>{Fe&&K.next(We),_e++;let ae=!1;(0,z.Xf)(q(We,Xe++)).subscribe((0,he.x)(K,fe=>{Ge?.(fe),Fe?Oe(fe):K.next(fe)},()=>{ae=!0},void 0,()=>{if(ae)try{for(_e--;Ce.length&&_e<te;){const fe=Ce.shift();Ae?(0,le.f)(K,Ae,()=>Se(fe)):Se(fe)}Pe()}catch(fe){K.error(fe)}}))};return we.subscribe((0,he.x)(K,Oe,()=>{Je=!0,Pe()})),()=>{ot?.()}}(te,Ge,we,q)))}},5363:(mt,Re,L)=>{L.d(Re,{Q:()=>le});var d=L(9672),z=L(4482),P=L(5403);function le(he,be=0){return(0,z.e)((ce,pe)=>{ce.subscribe((0,P.x)(pe,we=>(0,d.f)(pe,he,()=>pe.next(we),be),()=>(0,d.f)(pe,he,()=>pe.complete(),be),we=>(0,d.f)(pe,he,()=>pe.error(we),be)))})}},3099:(mt,Re,L)=>{L.d(Re,{B:()=>he});var d=L(8421),z=L(7579),P=L(930),le=L(4482);function he(ce={}){const{connector:pe=(()=>new z.x),resetOnError:we=!0,resetOnComplete:K=!0,resetOnRefCountZero:q=!0}=ce;return te=>{let Ge,Fe,Ae,ot=0,Ce=!1,_e=!1;const Xe=()=>{Fe?.unsubscribe(),Fe=void 0},Je=()=>{Xe(),Ge=Ae=void 0,Ce=_e=!1},Pe=()=>{const Oe=Ge;Je(),Oe?.unsubscribe()};return(0,le.e)((Oe,Se)=>{ot++,!_e&&!Ce&&Xe();const We=Ae=Ae??pe();Se.add(()=>{ot--,0===ot&&!_e&&!Ce&&(Fe=be(Pe,q))}),We.subscribe(Se),!Ge&&ot>0&&(Ge=new P.Hp({next:ae=>We.next(ae),error:ae=>{_e=!0,Xe(),Fe=be(Je,we,ae),We.error(ae)},complete:()=>{Ce=!0,Xe(),Fe=be(Je,K),We.complete()}}),(0,d.Xf)(Oe).subscribe(Ge))})(te)}}function be(ce,pe,...we){if(!0===pe)return void ce();if(!1===pe)return;const K=new P.Hp({next:()=>{K.unsubscribe(),ce()}});return pe(...we).subscribe(K)}},9468:(mt,Re,L)=>{L.d(Re,{R:()=>z});var d=L(4482);function z(P,le=0){return(0,d.e)((he,be)=>{be.add(P.schedule(()=>he.subscribe(be),le))})}},8505:(mt,Re,L)=>{L.d(Re,{b:()=>he});var d=L(576),z=L(4482),P=L(5403),le=L(4671);function he(be,ce,pe){const we=(0,d.m)(be)||ce||pe?{next:be,error:ce,complete:pe}:be;return we?(0,z.e)((K,q)=>{var te;null===(te=we.subscribe)||void 0===te||te.call(we);let Ge=!0;K.subscribe((0,P.x)(q,Fe=>{var Ae;null===(Ae=we.next)||void 0===Ae||Ae.call(we,Fe),q.next(Fe)},()=>{var Fe;Ge=!1,null===(Fe=we.complete)||void 0===Fe||Fe.call(we),q.complete()},Fe=>{var Ae;Ge=!1,null===(Ae=we.error)||void 0===Ae||Ae.call(we,Fe),q.error(Fe)},()=>{var Fe,Ae;Ge&&(null===(Fe=we.unsubscribe)||void 0===Fe||Fe.call(we)),null===(Ae=we.finalize)||void 0===Ae||Ae.call(we)}))}):le.y}},4408:(mt,Re,L)=>{L.d(Re,{o:()=>he});var d=L(727);class z extends d.w0{constructor(ce,pe){super()}schedule(ce,pe=0){return this}}const P={setInterval(be,ce,...pe){const{delegate:we}=P;return we?.setInterval?we.setInterval(be,ce,...pe):setInterval(be,ce,...pe)},clearInterval(be){const{delegate:ce}=P;return(ce?.clearInterval||clearInterval)(be)},delegate:void 0};var le=L(8737);class he extends z{constructor(ce,pe){super(ce,pe),this.scheduler=ce,this.work=pe,this.pending=!1}schedule(ce,pe=0){var we;if(this.closed)return this;this.state=ce;const K=this.id,q=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(q,K,pe)),this.pending=!0,this.delay=pe,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(q,this.id,pe),this}requestAsyncId(ce,pe,we=0){return P.setInterval(ce.flush.bind(ce,this),we)}recycleAsyncId(ce,pe,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return pe;null!=pe&&P.clearInterval(pe)}execute(ce,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(ce,pe);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,pe){let K,we=!1;try{this.work(ce)}catch(q){we=!0,K=q||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:ce,scheduler:pe}=this,{actions:we}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(we,this),null!=ce&&(this.id=this.recycleAsyncId(pe,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,Re,L)=>{L.d(Re,{v:()=>P});var d=L(6063);class z{constructor(he,be=z.now){this.schedulerActionCtor=he,this.now=be}schedule(he,be=0,ce){return new this.schedulerActionCtor(this,he).schedule(ce,be)}}z.now=d.l.now;class P extends z{constructor(he,be=z.now){super(he,be),this.actions=[],this._active=!1}flush(he){const{actions:be}=this;if(this._active)return void be.push(he);let ce;this._active=!0;do{if(ce=he.execute(he.state,he.delay))break}while(he=be.shift());if(this._active=!1,ce){for(;he=be.shift();)he.unsubscribe();throw ce}}}},4986:(mt,Re,L)=>{L.d(Re,{P:()=>le,z:()=>P});var d=L(4408);const P=new(L(7565).v)(d.o),le=P},6063:(mt,Re,L)=>{L.d(Re,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(mt,Re,L)=>{L.d(Re,{z:()=>d});const d={setTimeout(z,P,...le){const{delegate:he}=d;return he?.setTimeout?he.setTimeout(z,P,...le):setTimeout(z,P,...le)},clearTimeout(z){const{delegate:P}=d;return(P?.clearTimeout||clearTimeout)(z)},delegate:void 0}},2202:(mt,Re,L)=>{L.d(Re,{h:()=>z});const z=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,Re,L)=>{L.d(Re,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(mt,Re,L)=>{L.d(Re,{_6:()=>be,jO:()=>le,yG:()=>he});var d=L(576),z=L(3532);function P(ce){return ce[ce.length-1]}function le(ce){return(0,d.m)(P(ce))?ce.pop():void 0}function he(ce){return(0,z.K)(P(ce))?ce.pop():void 0}function be(ce,pe){return"number"==typeof P(ce)?ce.pop():pe}},8737:(mt,Re,L)=>{function d(z,P){if(z){const le=z.indexOf(P);0<=le&&z.splice(le,1)}}L.d(Re,{P:()=>d})},3888:(mt,Re,L)=>{function d(z){const le=z(he=>{Error.call(he),he.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}L.d(Re,{d:()=>d})},2806:(mt,Re,L)=>{L.d(Re,{O:()=>le,x:()=>P});var d=L(2416);let z=null;function P(he){if(d.v.useDeprecatedSynchronousErrorHandling){const be=!z;if(be&&(z={errorThrown:!1,error:null}),he(),be){const{errorThrown:ce,error:pe}=z;if(z=null,ce)throw pe}}else he()}function le(he){d.v.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=he)}},9672:(mt,Re,L)=>{function d(z,P,le,he=0,be=!1){const ce=P.schedule(function(){le(),be?z.add(this.schedule(null,he)):this.unsubscribe()},he);if(z.add(ce),!be)return ce}L.d(Re,{f:()=>d})},4671:(mt,Re,L)=>{function d(z){return z}L.d(Re,{y:()=>d})},1144:(mt,Re,L)=>{L.d(Re,{z:()=>d});const d=z=>z&&"number"==typeof z.length&&"function"!=typeof z},2206:(mt,Re,L)=>{L.d(Re,{D:()=>z});var d=L(576);function z(P){return Symbol.asyncIterator&&(0,d.m)(P?.[Symbol.asyncIterator])}},576:(mt,Re,L)=>{function d(z){return"function"==typeof z}L.d(Re,{m:()=>d})},3670:(mt,Re,L)=>{L.d(Re,{c:()=>P});var d=L(8822),z=L(576);function P(le){return(0,z.m)(le[d.L])}},6495:(mt,Re,L)=>{L.d(Re,{T:()=>P});var d=L(2202),z=L(576);function P(le){return(0,z.m)(le?.[d.h])}},8239:(mt,Re,L)=>{L.d(Re,{t:()=>z});var d=L(576);function z(P){return(0,d.m)(P?.then)}},3260:(mt,Re,L)=>{L.d(Re,{L:()=>le,Q:()=>P});var d=L(655),z=L(576);function P(he){return(0,d.FC)(this,arguments,function*(){const ce=he.getReader();try{for(;;){const{value:pe,done:we}=yield(0,d.qq)(ce.read());if(we)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(pe)}}finally{ce.releaseLock()}})}function le(he){return(0,z.m)(he?.getReader)}},3532:(mt,Re,L)=>{L.d(Re,{K:()=>z});var d=L(576);function z(P){return P&&(0,d.m)(P.schedule)}},4482:(mt,Re,L)=>{L.d(Re,{A:()=>z,e:()=>P});var d=L(576);function z(le){return(0,d.m)(le?.lift)}function P(le){return he=>{if(z(he))return he.lift(function(be){try{return le(be,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(mt,Re,L)=>{function d(){}L.d(Re,{Z:()=>d})},9635:(mt,Re,L)=>{L.d(Re,{U:()=>P,z:()=>z});var d=L(4671);function z(...le){return P(le)}function P(le){return 0===le.length?d.y:1===le.length?le[0]:function(be){return le.reduce((ce,pe)=>pe(ce),be)}}},7849:(mt,Re,L)=>{L.d(Re,{h:()=>P});var d=L(2416),z=L(3410);function P(le){z.z.setTimeout(()=>{const{onUnhandledError:he}=d.v;if(!he)throw le;he(le)})}},4532:(mt,Re,L)=>{function d(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Re,{z:()=>d})},655:(mt,Re,L)=>{function le(ee,re){var me={};for(var de in ee)Object.prototype.hasOwnProperty.call(ee,de)&&re.indexOf(de)<0&&(me[de]=ee[de]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var je=0;for(de=Object.getOwnPropertySymbols(ee);je<de.length;je++)re.indexOf(de[je])<0&&Object.prototype.propertyIsEnumerable.call(ee,de[je])&&(me[de[je]]=ee[de[je]])}return me}function pe(ee,re,me,de){return new(me||(me=Promise))(function(He,_t){function un(bn){try{qe(de.next(bn))}catch(Nn){_t(Nn)}}function Kt(bn){try{qe(de.throw(bn))}catch(Nn){_t(Nn)}}function qe(bn){bn.done?He(bn.value):function je(He){return He instanceof me?He:new me(function(_t){_t(He)})}(bn.value).then(un,Kt)}qe((de=de.apply(ee,re||[])).next())})}function Ce(ee){return this instanceof Ce?(this.v=ee,this):new Ce(ee)}function _e(ee,re,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var je,de=me.apply(ee,re||[]),He=[];return je={},_t("next"),_t("throw"),_t("return"),je[Symbol.asyncIterator]=function(){return this},je;function _t(sn){de[sn]&&(je[sn]=function(on){return new Promise(function(Zt,jt){He.push([sn,on,Zt,jt])>1||un(sn,on)})})}function un(sn,on){try{!function Kt(sn){sn.value instanceof Ce?Promise.resolve(sn.value.v).then(qe,bn):Nn(He[0][2],sn)}(de[sn](on))}catch(Zt){Nn(He[0][3],Zt)}}function qe(sn){un("next",sn)}function bn(sn){un("throw",sn)}function Nn(sn,on){sn(on),He.shift(),He.length&&un(He[0][0],He[0][1])}}function Je(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,re=ee[Symbol.asyncIterator];return re?re.call(ee):(ee=function te(ee){var re="function"==typeof Symbol&&Symbol.iterator,me=re&&ee[re],de=0;if(me)return me.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&de>=ee.length&&(ee=void 0),{value:ee&&ee[de++],done:!ee}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),me={},de("next"),de("throw"),de("return"),me[Symbol.asyncIterator]=function(){return this},me);function de(He){me[He]=ee[He]&&function(_t){return new Promise(function(un,Kt){!function je(He,_t,un,Kt){Promise.resolve(Kt).then(function(qe){He({value:qe,done:un})},_t)}(un,Kt,(_t=ee[He](_t)).done,_t.value)})}}}L.d(Re,{FC:()=>_e,KL:()=>Je,_T:()=>le,mG:()=>pe,qq:()=>Ce})},4650:(mt,Re,L)=>{L.d(Re,{$8M:()=>Pl,$Z:()=>NT,AFp:()=>If,AaK:()=>pe,BQk:()=>Tg,CHM:()=>ih,CRH:()=>AC,CZH:()=>Dv,CqO:()=>Cy,D6c:()=>De,DdM:()=>mC,EJc:()=>Cx,EiD:()=>Ul,EpF:()=>Ey,F$t:()=>IA,F4k:()=>mE,FYo:()=>zS,FiY:()=>Ie,G48:()=>Vv,Gf:()=>hi,GfV:()=>Zw,Gpc:()=>q,Hsn:()=>yE,Ikx:()=>Ly,JOm:()=>ua,JVY:()=>Hp,KtG:()=>Uo,L6k:()=>__,LAX:()=>v_,LFG:()=>hn,LSH:()=>$p,Lbi:()=>Tv,Lck:()=>MM,MGl:()=>Yc,MMx:()=>Zy,NdJ:()=>Iy,OlP:()=>Ln,Oqu:()=>kE,PXZ:()=>QC,Q6J:()=>by,QGY:()=>Kc,QP$:()=>Ve,QbO:()=>wx,Qsj:()=>nF,R0b:()=>vs,RDi:()=>Bp,Rgc:()=>jg,SBq:()=>Lc,Sil:()=>Av,Suo:()=>dl,TTD:()=>As,TgZ:()=>Ig,VKq:()=>_C,WFA:()=>Dy,X6Q:()=>lL,XFs:()=>et,Xpm:()=>Me,Xts:()=>D_,Y36:()=>Gh,YKP:()=>hC,YNc:()=>yy,Yjl:()=>j,Yz7:()=>on,Z0I:()=>$i,ZZ4:()=>$v,_Bn:()=>fd,_UZ:()=>cd,_Vd:()=>Fc,_c5:()=>wL,_uU:()=>HA,aQg:()=>zv,c2e:()=>jC,cJS:()=>jt,cg1:()=>Vy,d8E:()=>Zl,dDg:()=>KC,dqk:()=>Ft,eBb:()=>y_,eFA:()=>Tf,ekj:()=>AE,eoX:()=>om,f3M:()=>gr,g9A:()=>HC,h0i:()=>Zc,hGG:()=>Kx,iGM:()=>cv,ifc:()=>vt,ip1:()=>UC,jDz:()=>yf,kL8:()=>tM,lG2:()=>X,lqb:()=>ca,lri:()=>Rv,mCW:()=>_,n5z:()=>Os,oAB:()=>rn,oxw:()=>Sy,pB0:()=>zu,q3G:()=>jn,q4F:()=>Qw,qLn:()=>Lh,qOj:()=>sE,qZA:()=>Dg,qzn:()=>Ls,rWj:()=>qC,sBO:()=>Xc,sIi:()=>Zh,s_b:()=>zg,soG:()=>Sf,tb:()=>Df,tp0:()=>ut,uIk:()=>lE,vHH:()=>Ae,vpe:()=>ma,wAp:()=>Ot,xp6:()=>A0,ynx:()=>Sg,z2F:()=>lm,z3N:()=>_s,zSh:()=>qp,zs3:()=>vo});var d=L(7579),z=L(727),P=L(9751),le=L(6451),he=L(3099);function be(o){for(let a in o)if(o[a]===be)return a;throw Error("Could not find renamed property on target object.")}function ce(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function pe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(pe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function we(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const K=be({__forward_ref__:be});function q(o){return o.__forward_ref__=q,o.toString=function(){return pe(this())},o}function te(o){return Ge(o)?o():o}function Ge(o){return"function"==typeof o&&o.hasOwnProperty(K)&&o.__forward_ref__===q}class Ae extends Error{constructor(a,l){super(function ot(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function Ce(o){return"string"==typeof o?o:null==o?"":String(o)}function Oe(o,a){throw new Ae(-201,!1)}function Kt(o,a){null==o&&function qe(o,a,l,u){throw new Error(`ASSERTION ERROR: ${o}`+(null==u?"":` [Expected=> ${l} ${u} ${a} <=Actual]`))}(a,o,null,"!=")}function on(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function jt(o){return{providers:o.providers||[],imports:o.imports||[]}}function Or(o){return Zr(o,Qr)||Zr(o,Oi)}function $i(o){return null!==Or(o)}function Zr(o,a){return o.hasOwnProperty(a)?o[a]:null}function Gi(o){return o&&(o.hasOwnProperty(Kn)||o.hasOwnProperty(Wi))?o[Kn]:null}const Qr=be({\u0275prov:be}),Kn=be({\u0275inj:be}),Oi=be({ngInjectableDef:be}),Wi=be({ngInjectorDef:be});var et=(()=>((et=et||{})[et.Default=0]="Default",et[et.Host=1]="Host",et[et.Self=2]="Self",et[et.SkipSelf=4]="SkipSelf",et[et.Optional=8]="Optional",et))();let cr;function Mn(o){const a=cr;return cr=o,a}function Ar(o,a,l){const u=Or(o);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:l&et.Optional?null:void 0!==a?a:void Oe(pe(o))}function xn(o){return{toString:o}.toString()}var Pn=(()=>((Pn=Pn||{})[Pn.OnPush=0]="OnPush",Pn[Pn.Default=1]="Default",Pn))(),vt=(()=>{return(o=vt||(vt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",vt;var o})();const Ft=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jr={},xt=[],Xr=be({\u0275cmp:be}),Ut=be({\u0275dir:be}),ii=be({\u0275pipe:be}),en=be({\u0275mod:be}),wr=be({\u0275fac:be}),Vn=be({__NG_ELEMENT_ID__:be});let nt=0;function Me(o){return xn(()=>{const l=!0===o.standalone,u={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Pn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||xt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||vt.Emulated,id:"c"+nt++,styles:o.styles||xt,_:null,setInput:null,schemas:o.schemas||null,tView:null},g=o.dependencies,v=o.features;return f.inputs=G(o.inputs,u),f.outputs=G(o.outputs),v&&v.forEach(w=>w(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(Tt).filter(Rt):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(oe).filter(Rt):null,f})}function Tt(o){return O(o)||U(o)}function Rt(o){return null!==o}function rn(o){return xn(()=>({type:o.type,bootstrap:o.bootstrap||xt,declarations:o.declarations||xt,imports:o.imports||xt,exports:o.exports||xt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function G(o,a){if(null==o)return jr;const l={};for(const u in o)if(o.hasOwnProperty(u)){let f=o[u],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=u,a&&(a[f]=g)}return l}const X=Me;function j(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function O(o){return o[Xr]||null}function U(o){return o[Ut]||null}function oe(o){return o[ii]||null}function Ve(o){const a=O(o)||U(o)||oe(o);return null!==a&&a.standalone}function at(o,a){const l=o[en]||null;if(!l&&!0===a)throw new Error(`Type ${pe(o)} does not have '\u0275mod' property.`);return l}function ur(o){return Array.isArray(o)&&"object"==typeof o[1]}function mi(o){return Array.isArray(o)&&!0===o[1]}function eo(o){return 0!=(8&o.flags)}function wl(o){return 2==(2&o.flags)}function Aa(o){return 1==(1&o.flags)}function oi(o){return null!==o.template}function hc(o){return 0!=(256&o[2])}function Nr(o,a){return o.hasOwnProperty(wr)?o[wr]:null}class Po{constructor(a,l,u){this.previousValue=a,this.currentValue=l,this.firstChange=u}isFirstChange(){return this.firstChange}}function As(){return vu}function vu(o){return o.type.prototype.ngOnChanges&&(o.setInput=fc),Il}function Il(){const o=Fo(this),a=o?.current;if(a){const l=o.previous;if(l===jr)o.previous=a;else for(let u in a)l[u]=a[u];o.current=null,this.ngOnChanges(a)}}function fc(o,a,l,u){const f=Fo(o)||function nh(o,a){return o[bu]=a}(o,{previous:jr,current:null}),g=f.current||(f.current={}),v=f.previous,w=this.declaredInputs[l],I=v[w];g[w]=new Po(I&&I.currentValue,a,v===jr),o[u]=a}As.ngInherit=!0;const bu="__ngSimpleChanges__";function Fo(o){return o[bu]||null}function Gn(o){for(;Array.isArray(o);)o=o[0];return o}function Ni(o,a){return Gn(a[o])}function Pr(o,a){return Gn(a[o.index])}function Vo(o,a){return o.data[a]}function dn(o,a){const l=a[o];return ur(l)?l:l[0]}function Ms(o){return 64==(64&o[2])}function bi(o,a){return null==a?null:o[a]}function Ra(o){o[18]=0}function Yn(o,a){o[5]+=a;let l=o,u=o[3];for(;null!==u&&(1===a&&1===l[5]||-1===a&&0===l[5]);)u[5]+=a,l=u,u=u[3]}const Vt={lFrame:Ha(null),bindingsEnabled:!0};function ro(){return Vt.bindingsEnabled}function Ne(){return Vt.lFrame.lView}function Qt(){return Vt.lFrame.tView}function ih(o){return Vt.lFrame.contextLView=o,o[8]}function Uo(o){return Vt.lFrame.contextLView=null,o}function dr(){let o=Ho();for(;null!==o&&64===o.type;)o=o.parent;return o}function Ho(){return Vt.lFrame.currentTNode}function Jr(o,a){const l=Vt.lFrame;l.currentTNode=o,l.isParent=a}function Tl(){return Vt.lFrame.isParent}function jo(){Vt.lFrame.isParent=!1}function hr(){const o=Vt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Va(){return Vt.lFrame.bindingIndex++}function Iu(o,a){const l=Vt.lFrame;l.bindingIndex=l.bindingRootIndex=o,$o(a)}function $o(o){Vt.lFrame.currentDirectiveIndex=o}function yc(o){const a=Vt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Ba(){return Vt.lFrame.currentQueryIndex}function vc(o){Vt.lFrame.currentQueryIndex=o}function Ua(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Du(o,a,l){if(l&et.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||l&et.Host||(f=Ua(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const u=Vt.lFrame=ah();return u.currentTNode=a,u.lView=o,!0}function zo(o){const a=ah(),l=o[1];Vt.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function ah(){const o=Vt.lFrame,a=null===o?null:o.child;return null===a?Ha(o):a}function Ha(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function lh(){const o=Vt.lFrame;return Vt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Su=lh;function xs(){const o=lh();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Un(){return Vt.lFrame.selectedIndex}function hs(o){Vt.lFrame.selectedIndex=o}function Hn(){const o=Vt.lFrame;return Vo(o.tView,o.selectedIndex)}function Al(o,a){for(let l=a.directiveStart,u=a.directiveEnd;l<u;l++){const g=o.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:M,ngOnDestroy:N}=g;v&&(o.contentHooks||(o.contentHooks=[])).push(-l,v),w&&((o.contentHooks||(o.contentHooks=[])).push(l,w),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,w)),I&&(o.viewHooks||(o.viewHooks=[])).push(-l,I),M&&((o.viewHooks||(o.viewHooks=[])).push(l,M),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,M)),null!=N&&(o.destroyHooks||(o.destroyHooks=[])).push(l,N)}}function Go(o,a,l){qo(o,a,3,l)}function Wo(o,a,l,u){(3&o[2])===l&&qo(o,a,l,u)}function Mu(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function qo(o,a,l,u){const g=u??-1,v=a.length-1;let w=0;for(let I=void 0!==u?65535&o[18]:0;I<v;I++)if("number"==typeof a[I+1]){if(w=a[I],null!=u&&w>=u)break}else a[I]<0&&(o[18]+=65536),(w<g||-1==g)&&(xu(o,l,a,I),o[18]=(4294901760&o[18])+I+2),I++}function xu(o,a,l,u){const f=l[u]<0,g=l[u+1],w=o[f?-l[u]:l[u]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class wi{constructor(a,l,u){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=u}}function fs(o,a,l){let u=0;for(;u<l.length;){const f=l[u];if("number"==typeof f){if(0!==f)break;u++;const g=l[u++],v=l[u++],w=l[u++];o.setAttribute(a,v,w,g)}else{const g=f,v=l[++u];Dc(g)?o.setProperty(a,g,v):o.setAttribute(a,g,v),u++}}return u}function $a(o){return 3===o||4===o||6===o}function Dc(o){return 64===o.charCodeAt(0)}function za(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let u=0;u<a.length;u++){const f=a[u];"number"==typeof f?l=f:0===l||ku(o,l,f,null,-1===l||2===l?a[++u]:null)}}return o}function ku(o,a,l,u,f){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const w=o[g++];if("number"==typeof w){if(w===a){v=-1;break}if(w>a){v=g-1;break}}}for(;g<o.length;){const w=o[g];if("number"==typeof w)break;if(w===l){if(null===u)return void(null!==f&&(o[g+1]=f));if(u===o[g+1])return void(o[g+2]=f)}g++,null!==u&&g++,null!==f&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,l),null!==u&&o.splice(g++,0,u),null!==f&&o.splice(g++,0,f)}function dh(o){return-1!==o}function fr(o){return 32767&o}function ks(o,a){let l=function hh(o){return o>>16}(o),u=a;for(;l>0;)u=u[15],l--;return u}let Sc=!0;function Ga(o){const a=Sc;return Sc=o,a}let Ou=0;const li={};function ps(o,a){const l=kl(o,a);if(-1!==l)return l;const u=a[1];u.firstCreatePass&&(o.injectorIndex=a.length,Tc(u.data,o),Tc(a,null),Tc(u.blueprint,null));const f=Wa(o,a),g=o.injectorIndex;if(dh(f)){const v=fr(f),w=ks(f,a),I=w[1].data;for(let M=0;M<8;M++)a[g+M]=w[v+M]|I[v+M]}return a[g+8]=f,g}function Tc(o,a){o.push(0,0,0,0,0,0,0,0,a)}function kl(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Wa(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,u=null,f=a;for(;null!==f;){if(u=ea(f),null===u)return-1;if(l++,f=f[15],-1!==u.injectorIndex)return u.injectorIndex|l<<16}return-1}function so(o,a,l){!function Nu(o,a,l){let u;"string"==typeof l?u=l.charCodeAt(0)||0:l.hasOwnProperty(Vn)&&(u=l[Vn]),null==u&&(u=l[Vn]=Ou++);const f=255&u;a.data[o+(f>>5)]|=1<<f}(o,a,l)}function Yo(o,a,l){if(l&et.Optional||void 0!==o)return o;Oe()}function oo(o,a,l,u){if(l&et.Optional&&void 0===u&&(u=null),0==(l&(et.Self|et.Host))){const f=o[9],g=Mn(void 0);try{return f?f.get(a,u,l&et.Optional):Ar(a,u,l&et.Optional)}finally{Mn(g)}}return Yo(u,0,l)}function Zo(o,a,l,u=et.Default,f){if(null!==o){if(1024&a[2]){const v=function gh(o,a,l,u,f){let g=o,v=a;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const w=Pu(g,v,l,u|et.Self,li);if(w!==li)return w;let I=g.parent;if(!I){const M=v[21];if(M){const N=M.get(l,li,u);if(N!==li)return N}I=ea(v),v=v[15]}g=I}return f}(o,a,l,u,li);if(v!==li)return v}const g=Pu(o,a,l,u,li);if(g!==li)return g}return oo(a,l,u,f)}function Pu(o,a,l,u,f){const g=function ph(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Vn)?o[Vn]:void 0;return"number"==typeof a?a>=0?255&a:Ac:a}(l);if("function"==typeof g){if(!Du(a,o,u))return u&et.Host?Yo(f,0,u):oo(a,l,u,f);try{const v=g(u);if(null!=v||u&et.Optional)return v;Oe()}finally{Su()}}else if("number"==typeof g){let v=null,w=kl(o,a),I=-1,M=u&et.Host?a[16][6]:null;for((-1===w||u&et.SkipSelf)&&(I=-1===w?Wa(o,a):a[w+8],-1!==I&&Nl(u,!1)?(v=a[1],w=fr(I),a=ks(I,a)):w=-1);-1!==w;){const N=a[1];if(Qo(g,w,N.data)){const B=Ol(w,a,l,v,u,M);if(B!==li)return B}I=a[w+8],-1!==I&&Nl(u,a[1].data[w+8]===M)&&Qo(g,w,a)?(v=N,w=fr(I),a=ks(I,a)):w=-1}}return f}function Ol(o,a,l,u,f,g){const v=a[1],w=v.data[o+8],N=Ka(w,v,l,null==u?wl(w)&&Sc:u!=v&&0!=(3&w.type),f&et.Host&&g===w);return null!==N?Yi(a,v,N,w):li}function Ka(o,a,l,u,f){const g=o.providerIndexes,v=a.data,w=1048575&g,I=o.directiveStart,N=g>>20,Y=f?w+N:o.directiveEnd;for(let ie=u?w:w+N;ie<Y;ie++){const Te=v[ie];if(ie<I&&l===Te||ie>=I&&Te.type===l)return ie}if(f){const ie=v[I];if(ie&&oi(ie)&&ie.type===l)return I}return null}function Yi(o,a,l,u){let f=o[l];const g=a.data;if(function Ic(o){return o instanceof wi}(f)){const v=f;v.resolving&&function Xe(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${o}${l}`)}(function _e(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ce(o)}(g[l]));const w=Ga(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Mn(v.injectImpl):null;Du(o,u,et.Default);try{f=o[l]=v.factory(void 0,g,o,u),a.firstCreatePass&&l>=u.directiveStart&&function Cc(o,a,l){const{ngOnChanges:u,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(u){const v=vu(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,v)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,g))}(l,g[l],a)}finally{null!==I&&Mn(I),Ga(w),v.resolving=!1,Su()}}return f}function Qo(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function Nl(o,a){return!(o&et.Self||o&et.Host&&a)}class Xo{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,u){return Zo(this._tNode,this._lView,a,u,l)}}function Ac(){return new Xo(dr(),Ne())}function Os(o){return xn(()=>{const a=o.prototype.constructor,l=a[wr]||Jo(a),u=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==u;){const g=f[wr]||Jo(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Jo(o){return Ge(o)?()=>{const a=Jo(te(o));return a&&a()}:Nr(o)}function ea(o){const a=o[1],l=a.type;return 2===l?a.declTNode:1===l?o[6]:null}function Pl(o){return function qa(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const u=l.length;let f=0;for(;f<u;){const g=l[f];if($a(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<u&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(dr(),o)}const ta="__parameters__";function ra(o,a,l){return xn(()=>{const u=function Mc(o){return function(...l){if(o){const u=o(...l);for(const f in u)this[f]=u[f]}}}(a);function f(...g){if(this instanceof f)return u.apply(this,g),this;const v=new f(...g);return w.annotation=v,w;function w(I,M,N){const B=I.hasOwnProperty(ta)?I[ta]:Object.defineProperty(I,ta,{value:[]})[ta];for(;B.length<=N;)B.push(null);return(B[N]=B[N]||[]).push(v),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Ln{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=on({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rn(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let u=o[l];Array.isArray(u)?(a===o&&(a=o.slice(0,l)),Rn(u,a)):a!==o&&a.push(u)}return a}function ms(o,a){o.forEach(l=>Array.isArray(l)?ms(l,a):a(l))}function co(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function sr(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function uo(o,a){const l=[];for(let u=0;u<o;u++)l.push(a);return l}function it(o,a,l){let u=Qi(o,a);return u>=0?o[1|u]=l:(u=~u,function yh(o,a,l,u){let f=o.length;if(f==a)o.push(l,u);else if(1===f)o.push(u,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=u}}(o,u,a,l)),u}function xc(o,a){const l=Qi(o,a);if(l>=0)return o[1|l]}function Qi(o,a){return function Za(o,a,l){let u=0,f=o.length>>l;for(;f!==u;){const g=u+(f-u>>1),v=o[g<<l];if(a===v)return g<<l;v>a?f=g:u=g+1}return~(f<<l)}(o,a,1)}const ci={},Ll="__NG_DI_FLAG__",zr="ngTempTokenPath",Fr=/\n/gm,kn="__source";let po;function go(o){const a=po;return po=o,a}function pr(o,a=et.Default){if(void 0===po)throw new Ae(-203,!1);return null===po?Ar(o,void 0,a):po.get(o,a&et.Optional?null:void 0,a)}function hn(o,a=et.Default){return(function er(){return cr}()||pr)(te(o),a)}function gr(o,a=et.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),hn(o,a)}function D(o){const a=[];for(let l=0;l<o.length;l++){const u=te(o[l]);if(Array.isArray(u)){if(0===u.length)throw new Ae(900,!1);let f,g=et.Default;for(let v=0;v<u.length;v++){const w=u[v],I=k(w);"number"==typeof I?-1===I?f=w.token:g|=I:f=w}a.push(hn(f,g))}else a.push(hn(u))}return a}function T(o,a){return o[Ll]=a,o.prototype[Ll]=a,o}function k(o){return o[Ll]}const Ie=T(ra("Optional"),8),ut=T(ra("SkipSelf"),4);let Ih,Rc;function Bp(o){Ih=o}function _o(o){return function Hu(){if(void 0===Rc&&(Rc=null,Ft.trustedTypes))try{Rc=Ft.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Rc}()?.createHTML(o)||o}class tl{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Bl extends tl{getTypeName(){return"HTML"}}class Oc extends tl{getTypeName(){return"Style"}}class Sh extends tl{getTypeName(){return"Script"}}class $u extends tl{getTypeName(){return"URL"}}class Th extends tl{getTypeName(){return"ResourceURL"}}function _s(o){return o instanceof tl?o.changingThisBreaksApplicationSecurity:o}function Ls(o,a){const l=function Ah(o){return o instanceof tl&&o.getTypeName()||null}(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function Hp(o){return new Bl(o)}function __(o){return new Oc(o)}function y_(o){return new Sh(o)}function v_(o){return new $u(o)}function zu(o){return new Th(o)}class b_{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(_o(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch{return null}}}class w_{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const u=this.inertDocument.createElement("body");l.appendChild(u)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=_o(a),l;const u=this.inertDocument.createElement("body");return u.innerHTML=_o(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const v=l.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let u=a.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const m=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function _(o){return(o=String(o)).match(m)?o:"unsafe:"+o}function E(o){const a={};for(const l of o.split(","))a[l]=!0;return a}function x(...o){const a={};for(const l of o)for(const u in l)l.hasOwnProperty(u)&&(a[u]=!0);return a}const F=E("area,br,col,hr,img,wbr"),se=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Le=E("rp,rt"),Cn=x(F,x(se,E("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),x(Le,E("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),x(Le,se)),ei=E("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Wu=x(ei,E("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),E("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),qu=E("script,style,template");class nl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,u=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?u=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,u&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!Cn.hasOwnProperty(l))return this.sanitizedSomething=!0,!qu.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const u=a.attributes;for(let f=0;f<u.length;f++){const g=u.item(f),v=g.name,w=v.toLowerCase();if(!Wu.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let I=g.value;ei[w]&&(I=_(I)),this.buf.push(" ",v,'="',Ku(I),'"')}return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();Cn.hasOwnProperty(l)&&!F.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(Ku(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const jp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xh=/([^\#-~ |!])/g;function Ku(o){return o.replace(/&/g,"&amp;").replace(jp,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(xh,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Nc;function Ul(o,a){let l=null;try{Nc=Nc||function Mh(o){const a=new w_(o);return function b(){try{return!!(new window.DOMParser).parseFromString(_o(""),"text/html")}catch{return!1}}()?new b_(a):a}(o);let u=a?String(a):"";l=Nc.getInertBodyElement(u);let f=5,g=u;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,u=g,g=l.innerHTML,l=Nc.getInertBodyElement(u)}while(u!==g);return _o((new nl).sanitizeChildren(oa(l)||l))}finally{if(l){const u=oa(l)||l;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function oa(o){return"content"in o&&function E_(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var jn=(()=>((jn=jn||{})[jn.NONE=0]="NONE",jn[jn.HTML=1]="HTML",jn[jn.STYLE=2]="STYLE",jn[jn.SCRIPT=3]="SCRIPT",jn[jn.URL=4]="URL",jn[jn.RESOURCE_URL=5]="RESOURCE_URL",jn))();function $p(o){const a=function Rh(){const o=Ne();return o&&o[12]}();return a?a.sanitize(jn.URL,o)||"":Ls(o,"URL")?_s(o):_(Ce(o))}const D_=new Ln("ENVIRONMENT_INITIALIZER"),Vw=new Ln("INJECTOR",-1),Bw=new Ln("INJECTOR_DEF_TYPES");class Uw{get(a,l=ci){if(l===ci){const u=new Error(`NullInjectorError: No provider for ${pe(a)}!`);throw u.name="NullInjectorError",u}return l}}function US(...o){return{\u0275providers:Hw(0,o)}}function Hw(o,...a){const l=[],u=new Set;let f;return ms(a,g=>{const v=g;Gp(v,l,[],u)&&(f||(f=[]),f.push(v))}),void 0!==f&&jw(f,l),l}function jw(o,a){for(let l=0;l<o.length;l++){const{providers:f}=o[l];ms(f,g=>{a.push(g)})}}function Gp(o,a,l,u){if(!(o=te(o)))return!1;let f=null,g=Gi(o);const v=!g&&O(o);if(g||v){if(v&&!v.standalone)return!1;f=o}else{const I=o.ngModule;if(g=Gi(I),!g)return!1;f=I}const w=u.has(f);if(v){if(w)return!1;if(u.add(f),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const M of I)Gp(M,a,l,u)}}else{if(!g)return!1;{if(null!=g.imports&&!w){let M;u.add(f);try{ms(g.imports,N=>{Gp(N,a,l,u)&&(M||(M=[]),M.push(N))})}finally{}void 0!==M&&jw(M,a)}if(!w){const M=Nr(f)||(()=>new f);a.push({provide:f,useFactory:M,deps:xt},{provide:Bw,useValue:f,multi:!0},{provide:D_,useValue:()=>hn(f),multi:!0})}const I=g.providers;null==I||w||ms(I,N=>{a.push(N)})}}return f!==o&&void 0!==o.providers}const $w=be({provide:String,useValue:be});function kh(o){return null!==o&&"object"==typeof o&&$w in o}function Vs(o){return"function"==typeof o}const qp=new Ln("Set Injector scope."),Kp={},Hl={};let Yp;function Zp(){return void 0===Yp&&(Yp=new Uw),Yp}class ca{}class S_ extends ca{constructor(a,l,u,f){super(),this.parent=l,this.source=u,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xp(a,v=>this.processProvider(v)),this.records.set(Vw,Yu(void 0,this)),f.has("environment")&&this.records.set(ca,Yu(void 0,this));const g=this.records.get(qp);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Bw.multi,xt,et.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=go(this),u=Mn(void 0);try{return a()}finally{go(l),Mn(u)}}get(a,l=ci,u=et.Default){this.assertNotDestroyed();const f=go(this),g=Mn(void 0);try{if(!(u&et.SkipSelf)){let w=this.records.get(a);if(void 0===w){const I=function jS(o){return"function"==typeof o||"object"==typeof o&&o instanceof Ln}(a)&&Or(a);w=I&&this.injectableDefInScope(I)?Yu(Oh(a),Kp):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(u&et.Self?Zp():this.parent).get(a,l=u&et.Optional&&l===ci?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[zr]=v[zr]||[]).unshift(pe(a)),f)throw v;return function $(o,a,l,u){const f=o[zr];throw a[kn]&&f.unshift(a[kn]),o.message=function J(o,a,l,u=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=pe(a);if(Array.isArray(a))f=a.map(pe).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let w=a[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):pe(w)))}f=`{${g.join(", ")}}`}return`${l}${u?"("+u+")":""}[${f}]: ${o.replace(Fr,"\n  ")}`}("\n"+o.message,f,l,u),o.ngTokenPath=f,o[zr]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{Mn(g),go(f)}}resolveInjectorInitializers(){const a=go(this),l=Mn(void 0);try{const u=this.get(D_.multi,xt,et.Self);for(const f of u)f()}finally{go(a),Mn(l)}}toString(){const a=[],l=this.records;for(const u of l.keys())a.push(pe(u));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processProvider(a){let l=Vs(a=te(a))?a:te(a&&a.provide);const u=function T_(o){return kh(o)?Yu(void 0,o.useValue):Yu(Qp(o),Kp)}(a);if(Vs(a)||!0!==a.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=Yu(void 0,Kp,!0),f.factory=()=>D(f.multi),this.records.set(l,f)),l=a,f.multi.push(a)}this.records.set(l,u)}hydrate(a,l){return l.value===Kp&&(l.value=Hl,l.value=l.factory()),"object"==typeof l.value&&l.value&&function HS(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=te(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Oh(o){const a=Or(o),l=null!==a?a.factory:Nr(o);if(null!==l)return l;if(o instanceof Ln)throw new Ae(204,!1);if(o instanceof Function)return function Gw(o){const a=o.length;if(a>0)throw uo(a,"?"),new Ae(204,!1);const l=function zn(o){const a=o&&(o[Qr]||o[Oi]);if(a){const l=function zi(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Ae(204,!1)}function Qp(o,a,l){let u;if(Vs(o)){const f=te(o);return Nr(f)||Oh(f)}if(kh(o))u=()=>te(o.useValue);else if(function la(o){return!(!o||!o.useFactory)}(o))u=()=>o.useFactory(...D(o.deps||[]));else if(function Wp(o){return!(!o||!o.useExisting)}(o))u=()=>hn(te(o.useExisting));else{const f=te(o&&(o.useClass||o.provide));if(!function Nh(o){return!!o.deps}(o))return Nr(f)||Oh(f);u=()=>new f(...D(o.deps))}return u}function Yu(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function A_(o){return!!o.\u0275providers}function Xp(o,a){for(const l of o)Array.isArray(l)?Xp(l,a):A_(l)?Xp(l.\u0275providers,a):a(l)}class M_{}class eg{resolveComponentFactory(a){throw function qw(o){const a=Error(`No component factory found for ${pe(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Fc=(()=>{class o{}return o.NULL=new eg,o})();function $S(){return Zu(dr(),Ne())}function Zu(o,a){return new Lc(Pr(o,a))}let Lc=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=$S,o})();function Yw(o){return o instanceof Lc?o.nativeElement:o}class zS{}let nF=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function rF(){const o=Ne(),l=dn(dr().index,o);return(ur(l)?l:o)[11]}(),o})(),x_=(()=>{class o{}return o.\u0275prov=on({token:o,providedIn:"root",factory:()=>null}),o})();class Zw{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Qw=new Zw("14.2.10"),R_={};function L_(o){return o.ngOriginalError}class Lh{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&L_(a);for(;l&&L_(l);)l=L_(l);return l||null}}const V_=new Map;let QS=0;const og="__ngContext__";function ti(o,a){ur(a)?(o[og]=a[20],function JS(o){V_.set(o[20],o)}(a)):o[og]=a}function rl(o){return o instanceof Function?o():o}var ua=(()=>((ua=ua||{})[ua.Important=1]="Important",ua[ua.DashCase=2]="DashCase",ua))();function $_(o,a){return undefined(o,a)}function td(o){const a=o[3];return mi(a)?a[3]:a}function cg(o){return u0(o[13])}function ug(o){return u0(o[4])}function u0(o){for(;null!==o&&!mi(o);)o=o[4];return o}function nd(o,a,l,u,f){if(null!=u){let g,v=!1;mi(u)?g=u:ur(u)&&(v=!0,u=u[0]);const w=Gn(u);0===o&&null!==l?null==f?_0(a,l,w):da(a,l,w,f||null,!0):1===o&&null!==l?da(a,l,w,f||null,!0):2===o?function fT(o,a,l){const u=fg(o,a);u&&function hT(o,a,l,u){o.removeChild(a,l,u)}(o,u,a,l)}(a,w,v):3===o&&a.destroyNode(w),null!=g&&function fF(o,a,l,u,f){const g=l[7];g!==Gn(l)&&nd(a,o,u,g,f);for(let w=10;w<l.length;w++){const I=l[w];Vc(I[1],I,o,a,u,g)}}(a,o,g,l,f)}}function dg(o,a,l){return o.createElement(a,l)}function p0(o,a){const l=o[9],u=l.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,Yn(f,-1)),l.splice(u,1)}function q_(o,a){if(o.length<=10)return;const l=10+a,u=o[l];if(u){const f=u[17];null!==f&&f!==o&&p0(f,u),a>0&&(o[l-1][4]=u[4]);const g=sr(o,10+a);!function W_(o,a){Vc(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(u[1],u);const v=g[19];null!==v&&v.detachView(g[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Uh(o,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&Vc(o,a,l,3,null,null),function dF(o){let a=o[13];if(!a)return hg(o[1],o);for(;a;){let l=null;if(ur(a))l=a[13];else{const u=a[10];u&&(l=u)}if(!l){for(;a&&!a[4]&&a!==o;)ur(a)&&hg(a[1],a),a=a[3];null===a&&(a=o),ur(a)&&hg(a[1],a),l=a&&a[4]}a=l}}(a)}}function hg(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function Y_(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let u=0;u<l.length;u+=2){const f=a[l[u]];if(!(f instanceof wi)){const g=l[u+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=f[g[v]],I=g[v+1];try{I.call(w)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function K_(o,a){const l=o.cleanup,u=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],w="function"==typeof v?v(a):Gn(a[v]),I=u[f=l[g+2]],M=l[g+3];"boolean"==typeof M?w.removeEventListener(l[g],I,M):M>=0?u[f=M]():u[f=-M].unsubscribe(),g+=2}else{const v=u[f=l[g+1]];l[g].call(v)}if(null!==u){for(let g=f+1;g<u.length;g++)(0,u[g])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&mi(a[3])){l!==a[3]&&p0(l,a);const u=a[19];null!==u&&u.detachView(o)}!function eT(o){V_.delete(o[20])}(a)}}function g0(o,a,l){return function m0(o,a,l){let u=a;for(;null!==u&&40&u.type;)u=(a=u).parent;if(null===u)return l[0];if(2&u.flags){const f=o.data[u.directiveStart].encapsulation;if(f===vt.None||f===vt.Emulated)return null}return Pr(u,l)}(o,a.parent,l)}function da(o,a,l,u,f){o.insertBefore(a,l,u,f)}function _0(o,a,l){o.appendChild(a,l)}function y0(o,a,l,u,f){null!==u?da(o,a,l,u,f):_0(o,a,l)}function fg(o,a){return o.parentNode(a)}function Wr(o,a,l){return Z_(o,a,l)}let Z_=function b0(o,a,l){return 40&o.type?Pr(o,l):null};function gg(o,a,l,u){const f=g0(o,u,a),g=a[11],w=Wr(u.parent||a[6],u,a);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)y0(g,f,l[I],w,!1);else y0(g,f,l,w,!1)}function mg(o,a){if(null!==a){const l=a.type;if(3&l)return Pr(a,o);if(4&l)return w0(-1,o[a.index]);if(8&l){const u=a.child;if(null!==u)return mg(o,u);{const f=o[a.index];return mi(f)?w0(-1,f):Gn(f)}}if(32&l)return $_(a,o)()||Gn(o[a.index]);{const u=Q_(o,a);return null!==u?Array.isArray(u)?u[0]:mg(td(o[16]),u):mg(o,a.next)}}return null}function Q_(o,a){return null!==a?o[16][6].projection[a.projection]:null}function w0(o,a){const l=10+o+1;if(l<a.length){const u=a[l],f=u[1].firstChild;if(null!==f)return mg(u,f)}return a[7]}function X_(o,a,l,u,f,g,v){for(;null!=l;){const w=u[l.index],I=l.type;if(v&&0===a&&(w&&ti(Gn(w),u),l.flags|=4),64!=(64&l.flags))if(8&I)X_(o,a,l.child,u,f,g,!1),nd(a,o,f,w,g);else if(32&I){const M=$_(l,u);let N;for(;N=M();)nd(a,o,f,N,g);nd(a,o,f,w,g)}else 16&I?jh(o,a,u,l,f,g):nd(a,o,f,w,g);l=v?l.projectionNext:l.next}}function Vc(o,a,l,u,f,g){X_(l,u,o.firstChild,a,f,g,!1)}function jh(o,a,l,u,f,g){const v=l[16],I=v[6].projection[u.projection];if(Array.isArray(I))for(let M=0;M<I.length;M++)nd(a,o,f,I[M],g);else X_(o,a,I,v[3],f,g,!0)}function Bc(o,a,l){o.setAttribute(a,"style",l)}function $h(o,a,l){""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l)}function pT(o,a,l){let u=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===u||o.charCodeAt(f+g)<=32)return f}l=f+1}}const J_="ng-template";function ey(o,a,l){let u=0;for(;u<o.length;){let f=o[u++];if(l&&"class"===f){if(f=o[u],-1!==pT(f.toLowerCase(),a,0))return!0}else if(1===f){for(;u<o.length&&"string"==typeof(f=o[u++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function I0(o){return 4===o.type&&o.value!==J_}function mT(o,a,l){return a===(4!==o.type||l?o.value:J_)}function _T(o,a,l){let u=4;const f=o.attrs||[],g=function pF(o){for(let a=0;a<o.length;a++)if($a(o[a]))return a;return o.length}(f);let v=!1;for(let w=0;w<a.length;w++){const I=a[w];if("number"!=typeof I){if(!v)if(4&u){if(u=2|1&u,""!==I&&!mT(o,I,l)||""===I&&1===a.length){if(Us(u))return!1;v=!0}}else{const M=8&u?I:a[++w];if(8&u&&null!==o.attrs){if(!ey(o.attrs,M,l)){if(Us(u))return!1;v=!0}continue}const B=yT(8&u?"class":I,f,I0(o),l);if(-1===B){if(Us(u))return!1;v=!0;continue}if(""!==M){let Y;Y=B>g?"":f[B+1].toLowerCase();const ie=8&u?Y:null;if(ie&&-1!==pT(ie,M,0)||2&u&&M!==Y){if(Us(u))return!1;v=!0}}}}else{if(!v&&!Us(u)&&!Us(I))return!1;if(v&&Us(I))continue;v=!1,u=I|1&u}}return Us(u)||v}function Us(o){return 0==(1&o)}function yT(o,a,l,u){if(null===a)return-1;let f=0;if(u||!l){let g=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=a[++f];for(;"string"==typeof w;)w=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function D0(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const u=o[l];if("number"==typeof u)return-1;if(u===a)return l;l++}return-1}(a,o)}function vT(o,a,l=!1){for(let u=0;u<a.length;u++)if(_T(o,a[u],l))return!0;return!1}function bT(o,a){e:for(let l=0;l<a.length;l++){const u=a[l];if(o.length===u.length){for(let f=0;f<o.length;f++)if(o[f]!==u[f])continue e;return!0}}return!1}function S0(o,a){return o?":not("+a.trim()+")":a}function T0(o){let a=o[0],l=1,u=2,f="",g=!1;for(;l<o.length;){let v=o[l];if("string"==typeof v)if(2&u){const w=o[++l];f+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?f+="."+v:4&u&&(f+=" "+v);else""!==f&&!Us(v)&&(a+=S0(g,f),f=""),u=v,g=g||!Us(u);l++}return""!==f&&(a+=S0(g,f)),a}const Wt={};function A0(o){M0(Qt(),Ne(),Un()+o,!1)}function M0(o,a,l,u){if(!u)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&Go(a,g,l)}else{const g=o.preOrderHooks;null!==g&&Wo(a,g,0,l)}hs(l)}function ry(o,a=null,l=null,u){const f=iy(o,a,l,u);return f.resolveInjectorInitializers(),f}function iy(o,a=null,l=null,u,f=new Set){const g=[l||xt,US(o)];return u=u||("object"==typeof o?void 0:pe(o)),new S_(g,a||Zp(),u||null,f)}let vo=(()=>{class o{static create(l,u){if(Array.isArray(l))return ry({name:""},u,l,"");{const f=l.name??"";return ry({name:f},l.parent,l.providers,f)}}}return o.THROW_IF_NOT_FOUND=ci,o.NULL=new Uw,o.\u0275prov=on({token:o,providedIn:"any",factory:()=>hn(Vw)}),o.__NG_ELEMENT_ID__=-1,o})();function Gh(o,a=et.Default){const l=Ne();return null===l?hn(o,a):Zo(dr(),l,te(o),a)}function NT(){throw new Error("invalid")}function ay(o,a){return o<<17|a<<2}function ha(o){return o>>17&32767}function P0(o){return 2|o}function zl(o){return(131068&o)>>2}function F0(o,a){return-131069&o|a<<2}function L0(o){return 1|o}function WT(o,a){const l=o.contentQueries;if(null!==l)for(let u=0;u<l.length;u+=2){const f=l[u],g=l[u+1];if(-1!==g){const v=o.data[g];vc(f),v.contentQueries(2,a[g],g)}}}function uy(o,a,l,u,f,g,v,w,I,M,N){const B=a.blueprint.slice();return B[0]=f,B[2]=76|u,(null!==N||o&&1024&o[2])&&(B[2]|=1024),Ra(B),B[3]=B[15]=o,B[8]=l,B[10]=v||o&&o[10],B[11]=w||o&&o[11],B[12]=I||o&&o[12]||null,B[9]=M||o&&o[9]||null,B[6]=g,B[20]=function XS(){return QS++}(),B[21]=N,B[16]=2==a.type?o[16]:B,B}function Wh(o,a,l,u,f){let g=o.data[a];if(null===g)g=function G0(o,a,l,u,f){const g=Ho(),v=Tl(),I=o.data[a]=function VF(o,a,l,u,f,g){return{type:l,index:u,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,a,u,f);return null===o.firstChild&&(o.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(o,a,l,u,f),function Cu(){return Vt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=u,g.attrs=f;const v=function Sl(){const o=Vt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Jr(g,!0),g}function qh(o,a,l,u){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(u),o.blueprint.push(u),o.data.push(null);return f}function W0(o,a,l){zo(a);try{const u=o.viewQuery;null!==u&&J0(1,u,l);const f=o.template;null!==f&&qT(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&WT(o,a),o.staticViewQueries&&J0(2,o.viewQuery,l);const g=o.components;null!==g&&function PF(o,a){for(let l=0;l<a.length;l++)Wl(o,a[l])}(a,g)}catch(u){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),u}finally{a[2]&=-5,xs()}}function dy(o,a,l,u){const f=a[2];if(128!=(128&f)){zo(a);try{Ra(a),function La(o){return Vt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&qT(o,a,l,2,u);const v=3==(3&f);if(v){const M=o.preOrderCheckHooks;null!==M&&Go(a,M,null)}else{const M=o.preOrderHooks;null!==M&&Wo(a,M,0,null),Mu(a,0)}if(function aA(o){for(let a=cg(o);null!==a;a=ug(a)){if(!a[2])continue;const l=a[9];for(let u=0;u<l.length;u++){const f=l[u],g=f[3];0==(512&f[2])&&Yn(g,1),f[2]|=512}}}(a),function X0(o){for(let a=cg(o);null!==a;a=ug(a))for(let l=10;l<a.length;l++){const u=a[l],f=u[1];Ms(u)&&dy(f,u,f.template,u[8])}}(a),null!==o.contentQueries&&WT(o,a),v){const M=o.contentCheckHooks;null!==M&&Go(a,M)}else{const M=o.contentHooks;null!==M&&Wo(a,M,1),Mu(a,1)}!function OF(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let u=0;u<l.length;u++){const f=l[u];if(f<0)hs(~f);else{const g=f,v=l[++u],w=l[++u];Iu(v,g),w(2,a[g])}}}finally{hs(-1)}}(o,a);const w=o.components;null!==w&&function NF(o,a){for(let l=0;l<a.length;l++)lA(o,a[l])}(a,w);const I=o.viewQuery;if(null!==I&&J0(2,I,u),v){const M=o.viewCheckHooks;null!==M&&Go(a,M)}else{const M=o.viewHooks;null!==M&&Wo(a,M,2),Mu(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Yn(a[3],-1))}finally{xs()}}}function qT(o,a,l,u,f){const g=Un(),v=2&u;try{hs(-1),v&&a.length>22&&M0(o,a,22,!1),l(u,f)}finally{hs(g)}}function KT(o,a,l){if(eo(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}function q0(o,a,l){!ro()||(function $F(o,a,l,u){const f=l.directiveStart,g=l.directiveEnd;o.firstCreatePass||ps(l,a),ti(u,a);const v=l.initialInputs;for(let w=f;w<g;w++){const I=o.data[w],M=oi(I);M&&KF(a,l,I);const N=Yi(a,o,w,l);ti(N,a),null!==v&&YF(0,w-f,N,I,0,v),M&&(dn(l.index,a)[8]=N)}}(o,a,l,Pr(l,a)),128==(128&l.flags)&&function zF(o,a,l){const u=l.directiveStart,f=l.directiveEnd,g=l.index,v=function oh(){return Vt.lFrame.currentDirectiveIndex}();try{hs(g);for(let w=u;w<f;w++){const I=o.data[w],M=a[w];$o(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&tA(I,M)}}finally{hs(-1),$o(v)}}(o,a,l))}function K0(o,a,l=Pr){const u=a.localNames;if(null!==u){let f=a.index+1;for(let g=0;g<u.length;g+=2){const v=u[g+1],w=-1===v?l(a,o):o[v];o[f++]=w}}}function YT(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Y0(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Y0(o,a,l,u,f,g,v,w,I,M){const N=22+u,B=N+f,Y=function FF(o,a){const l=[];for(let u=0;u<a;u++)l.push(u<o?null:Wt);return l}(N,B),ie="function"==typeof M?M():M;return Y[1]={type:o,blueprint:Y,template:l,queries:null,viewQuery:w,declTNode:a,data:Y.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:ie,incompleteFirstPass:!1}}function ZT(o,a,l,u){const f=py(a);null===l?f.push(u):(f.push(l),o.firstCreatePass&&gy(o).push(u,f.length-1))}function QT(o,a,l){for(let u in o)if(o.hasOwnProperty(u)){const f=o[u];(l=null===l?{}:l).hasOwnProperty(u)?l[u].push(a,f):l[u]=[a,f]}return l}function XT(o,a){const u=a.directiveEnd,f=o.data,g=a.attrs,v=[];let w=null,I=null;for(let M=a.directiveStart;M<u;M++){const N=f[M],B=N.inputs,Y=null===g||I0(a)?null:sA(B,g);v.push(Y),w=QT(B,M,w),I=QT(N.outputs,M,I)}null!==w&&(w.hasOwnProperty("class")&&(a.flags|=16),w.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=w,a.outputs=I}function Hs(o,a,l,u,f,g,v,w){const I=Pr(a,l);let N,M=a.inputs;!w&&null!=M&&(N=M[u])?(bg(o,l,N,u,f),wl(a)&&JT(l,a.index)):3&a.type&&(u=function BF(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(u),f=null!=v?v(f,a.value||"",u):f,g.setProperty(I,u,f))}function JT(o,a){const l=dn(a,o);16&l[2]||(l[2]|=32)}function Z0(o,a,l,u){let f=!1;if(ro()){const g=function GF(o,a,l){const u=o.directiveRegistry;let f=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];vT(l,v.selectors,!1)&&(f||(f=[]),so(ps(l,a),o,v.type),oi(v)?(nA(o,l),f.unshift(v)):f.push(v))}return f}(o,a,l),v=null===u?null:{"":-1};if(null!==g){f=!0,rA(l,o.data.length,g.length);for(let N=0;N<g.length;N++){const B=g[N];B.providersResolver&&B.providersResolver(B)}let w=!1,I=!1,M=qh(o,a,g.length,null);for(let N=0;N<g.length;N++){const B=g[N];l.mergedAttrs=za(l.mergedAttrs,B.hostAttrs),iA(o,l,a,M,B),qF(M,B,v),null!==B.contentQueries&&(l.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(l.flags|=128);const Y=B.type.prototype;!w&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),w=!0),!I&&(Y.ngOnChanges||Y.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),I=!0),M++}XT(o,l)}v&&function WF(o,a,l){if(a){const u=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new Ae(-301,!1);u.push(a[f],g)}}}(l,u,v)}return l.mergedAttrs=za(l.mergedAttrs,l.attrs),f}function eA(o,a,l,u,f,g){const v=g.hostBindings;if(v){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const I=~a.index;(function jF(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(w)!=I&&w.push(I),w.push(u,f,v)}}function tA(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function nA(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function qF(o,a,l){if(l){if(a.exportAs)for(let u=0;u<a.exportAs.length;u++)l[a.exportAs[u]]=o;oi(a)&&(l[""]=o)}}function rA(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function iA(o,a,l,u,f){o.data[u]=f;const g=f.factory||(f.factory=Nr(f.type)),v=new wi(g,oi(f),Gh);o.blueprint[u]=v,l[u]=v,eA(o,a,0,u,qh(o,l,f.hostVars,Wt),f)}function KF(o,a,l){const u=Pr(a,o),f=YT(l),g=o[10],v=vg(o,uy(o,f,null,l.onPush?32:16,u,a,g,g.createRenderer(u,l),null,null,null));o[a.index]=v}function il(o,a,l,u,f,g){const v=Pr(o,a);!function Q0(o,a,l,u,f,g,v){if(null==g)o.removeAttribute(a,f,l);else{const w=null==v?Ce(g):v(g,u||"",f);o.setAttribute(a,f,w,l)}}(a[11],v,g,o.value,l,u,f)}function YF(o,a,l,u,f,g){const v=g[a];if(null!==v){const w=u.setInput;for(let I=0;I<v.length;){const M=v[I++],N=v[I++],B=v[I++];null!==w?u.setInput(l,B,M,N):l[N]=B}}}function sA(o,a){let l=null,u=0;for(;u<a.length;){const f=a[u];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,o[f],a[u+1])),u+=2}else u+=2;else u+=4}return l}function hy(o,a,l,u){return new Array(o,!0,!1,a,null,0,u,l,null,null)}function lA(o,a){const l=dn(a,o);if(Ms(l)){const u=l[1];48&l[2]?dy(u,l,u.template,l[8]):l[5]>0&&Gl(l)}}function Gl(o){for(let u=cg(o);null!==u;u=ug(u))for(let f=10;f<u.length;f++){const g=u[f];if(Ms(g))if(512&g[2]){const v=g[1];dy(v,g,v.template,g[8])}else g[5]>0&&Gl(g)}const l=o[1].components;if(null!==l)for(let u=0;u<l.length;u++){const f=dn(l[u],o);Ms(f)&&f[5]>0&&Gl(f)}}function Wl(o,a){const l=dn(a,o),u=l[1];(function cA(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(u,l),W0(u,l,l[8])}function vg(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function sd(o){for(;o;){o[2]|=32;const a=td(o);if(hc(o)&&!a)return o;o=a}return null}function _r(o,a,l,u=!0){const f=a[10];f.begin&&f.begin();try{dy(o,a,o.template,l)}catch(v){throw u&&tE(a,v),v}finally{f.end&&f.end()}}function J0(o,a,l){vc(0),a(o,l)}function py(o){return o[7]||(o[7]=[])}function gy(o){return o.cleanup||(o.cleanup=[])}function eE(o,a,l){return(null===o||oi(o))&&(l=function wu(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(l[a.index])),l[11]}function tE(o,a){const l=o[9],u=l?l.get(Lh,null):null;u&&u.handleError(a)}function bg(o,a,l,u,f){for(let g=0;g<l.length;){const v=l[g++],w=l[g++],I=a[v],M=o.data[v];null!==M.setInput?M.setInput(I,f,u,w):I[w]=f}}function Kh(o,a,l){let u=l?o.styles:null,f=l?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const w=a[v];"number"==typeof w?g=w:1==g?f=we(f,w):2==g&&(u=we(u,w+": "+a[++v]+";"))}l?o.styles=u:o.stylesWithoutHost=u,l?o.classes=f:o.classesWithoutHost=f}function sl(o,a,l,u,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&u.push(Gn(g)),mi(g))for(let w=10;w<g.length;w++){const I=g[w],M=I[1].firstChild;null!==M&&sl(I[1],I,M,u)}const v=l.type;if(8&v)sl(o,a,l.child,u);else if(32&v){const w=$_(l,a);let I;for(;I=w();)u.push(I)}else if(16&v){const w=Q_(a,l);if(Array.isArray(w))u.push(...w);else{const I=td(a[16]);sl(I[1],I,w,u,!0)}}l=f?l.projectionNext:l.next}return u}class Yh{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return sl(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(mi(a)){const l=a[8],u=l?l.indexOf(this):-1;u>-1&&(q_(a,u),sr(l,u))}this._attachedToViewContainer=!1}Uh(this._lView[1],this._lView)}onDestroy(a){ZT(this._lView[1],this._lView,null,a)}markForCheck(){sd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){_r(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function f0(o,a){Vc(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=a}}class uA extends Yh{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;_r(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class my extends Fc{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=O(a);return new od(l,this.ngModule)}}function nE(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}class ZF{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,u){const f=this.injector.get(a,R_,u);return f!==R_||l===R_?f:this.parentInjector.get(a,l,u)}}class od extends M_{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function wT(o){return o.map(T0).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return nE(this.componentDef.inputs)}get outputs(){return nE(this.componentDef.outputs)}create(a,l,u,f){let g=(f=f||this.ngModule)instanceof ca?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new ZF(a,g):a,w=v.get(zS,null);if(null===w)throw new Ae(407,!1);const I=v.get(x_,null),M=w.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",B=u?function LF(o,a,l){return o.selectRootElement(a,l===vt.ShadowDom)}(M,u,this.componentDef.encapsulation):dg(M,N,function rE(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(N)),Y=this.componentDef.onPush?288:272,ie=Y0(0,null,null,1,0,null,null,null,null,null),Te=uy(null,ie,null,Y,null,null,w,M,I,v,null);let $e,Ke;zo(Te);try{const dt=function dA(o,a,l,u,f,g){const v=l[1];l[22]=o;const I=Wh(v,22,2,"#host",null),M=I.mergedAttrs=a.hostAttrs;null!==M&&(Kh(I,M,!0),null!==o&&(fs(f,o,M),null!==I.classes&&$h(f,o,I.classes),null!==I.styles&&Bc(f,o,I.styles)));const N=u.createRenderer(o,a),B=uy(l,YT(a),null,a.onPush?32:16,l[22],I,u,N,g||null,null,null);return v.firstCreatePass&&(so(ps(I,l),v,a.type),nA(v,I),rA(I,l.length,1)),vg(l,B),l[22]=B}(B,this.componentDef,Te,w,M);if(B)if(u)fs(M,B,["ng-version",Qw.full]);else{const{attrs:St,classes:xe}=function ET(o){const a=[],l=[];let u=1,f=2;for(;u<o.length;){let g=o[u];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++u]):8===f&&l.push(g);else{if(!Us(f))break;f=g}u++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);St&&fs(M,B,St),xe&&xe.length>0&&$h(M,B,xe.join(" "))}if(Ke=Vo(ie,22),void 0!==l){const St=Ke.projection=[];for(let xe=0;xe<this.ngContentSelectors.length;xe++){const kt=l[xe];St.push(null!=kt?Array.from(kt):null)}}$e=function XF(o,a,l,u){const f=l[1],g=function HF(o,a,l){const u=dr();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),iA(o,u,a,qh(o,a,1,null),l),XT(o,u));const f=Yi(a,o,u.directiveStart,u);ti(f,a);const g=Pr(u,a);return g&&ti(g,a),f}(f,l,a);if(o[8]=l[8]=g,null!==u)for(const w of u)w(g,a);if(a.contentQueries){const w=dr();a.contentQueries(1,g,w.directiveStart)}const v=dr();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(hs(v.index),eA(l[1],v,0,v.directiveStart,v.directiveEnd,a),tA(a,g)),g}(dt,this.componentDef,Te,[hA]),W0(ie,Te,null)}finally{xs()}return new iE(this.componentType,$e,Zu(Ke,Te),Te,Ke)}}class iE extends class Ww{}{constructor(a,l,u,f,g){super(),this.location=u,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new uA(f),this.componentType=a}setInput(a,l){const u=this._tNode.inputs;let f;if(null!==u&&(f=u[a])){const g=this._rootLView;bg(g[1],g,f,a,l),JT(g,this._tNode.index)}}get injector(){return new Xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function hA(){const o=dr();Al(Ne()[1],o)}function sE(o){let a=function fA(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const u=[o];for(;a;){let f;if(oi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ae(903,!1);f=a.\u0275dir}if(f){if(l){u.push(f);const v=o;v.inputs=oE(o.inputs),v.declaredInputs=oE(o.declaredInputs),v.outputs=oE(o.outputs);const w=f.hostBindings;w&&n1(o,w);const I=f.viewQuery,M=f.contentQueries;if(I&&e1(o,I),M&&t1(o,M),ce(o.inputs,f.inputs),ce(o.declaredInputs,f.declaredInputs),ce(o.outputs,f.outputs),oi(f)&&f.data.animation){const N=o.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(o),w===sE&&(l=!1)}}a=Object.getPrototypeOf(a)}!function JF(o){let a=0,l=null;for(let u=o.length-1;u>=0;u--){const f=o[u];f.hostVars=a+=f.hostVars,f.hostAttrs=za(f.hostAttrs,l=za(l,f.hostAttrs))}}(u)}function oE(o){return o===jr?{}:o===xt?[]:o}function e1(o,a){const l=o.viewQuery;o.viewQuery=l?(u,f)=>{a(u,f),l(u,f)}:a}function t1(o,a){const l=o.contentQueries;o.contentQueries=l?(u,f,g)=>{a(u,f,g),l(u,f,g)}:a}function n1(o,a){const l=o.hostBindings;o.hostBindings=l?(u,f)=>{a(u,f),l(u,f)}:a}let Eg=null;function zc(){if(!Eg){const o=Ft.Symbol;if(o&&o.iterator)Eg=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const u=a[l];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Eg=u)}}}return Eg}function Zh(o){return!!Cg(o)&&(Array.isArray(o)||!(o instanceof Map)&&zc()in o)}function Cg(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function fa(o,a,l){return o[a]=l}function Ci(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function lE(o,a,l,u){const f=Ne();return Ci(f,Va(),a)&&(Qt(),il(Hn(),f,o,a,l,u)),lE}function Jh(o,a,l,u){return Ci(o,Va(),l)?a+Ce(l)+u:Wt}function yy(o,a,l,u,f,g,v,w){const I=Ne(),M=Qt(),N=o+22,B=M.firstCreatePass?function hE(o,a,l,u,f,g,v,w,I){const M=a.consts,N=Wh(a,o,4,v||null,bi(M,w));Z0(a,l,N,bi(M,I)),Al(a,N);const B=N.tViews=Y0(2,N,u,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,N),B.queries=a.queries.embeddedTView(N)),N}(N,M,I,a,l,u,f,g,v):M.data[N];Jr(B,!1);const Y=I[11].createComment("");gg(M,I,Y,B),ti(Y,I),vg(I,I[N]=hy(Y,I,Y,B)),Aa(B)&&q0(M,I,B),null!=v&&K0(I,B,w)}function by(o,a,l){const u=Ne();return Ci(u,Va(),a)&&Hs(Qt(),Hn(),u,o,a,u[11],l,!1),by}function wy(o,a,l,u,f){const v=f?"class":"style";bg(o,l,a.inputs[v],v,u)}function Ig(o,a,l,u){const f=Ne(),g=Qt(),v=22+o,w=f[11],I=f[v]=dg(w,a,function Ec(){return Vt.lFrame.currentNamespace}()),M=g.firstCreatePass?function EA(o,a,l,u,f,g,v){const w=a.consts,M=Wh(a,o,2,f,bi(w,g));return Z0(a,l,M,bi(w,v)),null!==M.attrs&&Kh(M,M.attrs,!1),null!==M.mergedAttrs&&Kh(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(v,g,f,0,a,l,u):g.data[v];Jr(M,!0);const N=M.mergedAttrs;null!==N&&fs(w,I,N);const B=M.classes;null!==B&&$h(w,I,B);const Y=M.styles;return null!==Y&&Bc(w,I,Y),64!=(64&M.flags)&&gg(g,f,I,M),0===function Oa(){return Vt.lFrame.elementDepthCount}()&&ti(I,f),function Eu(){Vt.lFrame.elementDepthCount++}(),Aa(M)&&(q0(g,f,M),KT(g,M,f)),null!==u&&K0(f,M),Ig}function Dg(){let o=dr();Tl()?jo():(o=o.parent,Jr(o,!1));const a=o;!function Na(){Vt.lFrame.elementDepthCount--}();const l=Qt();return l.firstCreatePass&&(Al(l,o),eo(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function xl(o){return 0!=(16&o.flags)}(a)&&wy(l,a,Ne(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Rl(o){return 0!=(32&o.flags)}(a)&&wy(l,a,Ne(),a.stylesWithoutHost,!1),Dg}function cd(o,a,l,u){return Ig(o,a,l,u),Dg(),cd}function Sg(o,a,l){const u=Ne(),f=Qt(),g=o+22,v=f.firstCreatePass?function pE(o,a,l,u,f){const g=a.consts,v=bi(g,u),w=Wh(a,o,8,"ng-container",v);return null!==v&&Kh(w,v,!0),Z0(a,l,w,bi(g,f)),null!==a.queries&&a.queries.elementStart(a,w),w}(g,f,u,a,l):f.data[g];Jr(v,!0);const w=u[g]=u[11].createComment("");return gg(f,u,w,v),ti(w,u),Aa(v)&&(q0(f,u,v),KT(f,v,u)),null!=l&&K0(u,v),Sg}function Tg(){let o=dr();const a=Qt();return Tl()?jo():(o=o.parent,Jr(o,!1)),a.firstCreatePass&&(Al(a,o),eo(o)&&a.queries.elementEnd(o)),Tg}function Ey(){return Ne()}function Kc(o){return!!o&&"function"==typeof o.then}function mE(o){return!!o&&"function"==typeof o.subscribe}const Cy=mE;function Iy(o,a,l,u){const f=Ne(),g=Qt(),v=dr();return _E(g,f,f[11],v,o,a,0,u),Iy}function Dy(o,a){const l=dr(),u=Ne(),f=Qt();return _E(f,u,eE(yc(f.data),l,u),l,o,a),Dy}function _E(o,a,l,u,f,g,v,w){const I=Aa(u),N=o.firstCreatePass&&gy(o),B=a[8],Y=py(a);let ie=!0;if(3&u.type||w){const Ke=Pr(u,a),dt=w?w(Ke):Ke,St=Y.length,xe=w?Tn=>w(Gn(Tn[u.index])):u.index;let kt=null;if(!w&&I&&(kt=function o1(o,a,l,u){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===l&&f[g+1]===u){const w=a[7],I=f[g+2];return w.length>I?w[I]:null}"string"==typeof v&&(g+=2)}return null}(o,a,f,u.index)),null!==kt)(kt.__ngLastListenerFn__||kt).__ngNextListenerFn__=g,kt.__ngLastListenerFn__=g,ie=!1;else{g=rf(u,a,B,g,!1);const Tn=l.listen(dt,f,g);Y.push(g,Tn),N&&N.push(f,xe,St,St+1)}}else g=rf(u,a,B,g,!1);const Te=u.outputs;let $e;if(ie&&null!==Te&&($e=Te[f])){const Ke=$e.length;if(Ke)for(let dt=0;dt<Ke;dt+=2){const or=a[$e[dt]][$e[dt+1]].subscribe(g),js=Y.length;Y.push(g,or),N&&N.push(f,u.index,js,-(js+1))}}}function Ag(o,a,l,u){try{return!1!==l(u)}catch(f){return tE(o,f),!1}}function rf(o,a,l,u,f){return function g(v){if(v===Function)return u;sd(2&o.flags?dn(o.index,a):a);let I=Ag(a,0,u,v),M=g.__ngNextListenerFn__;for(;M;)I=Ag(a,0,M,v)&&I,M=M.__ngNextListenerFn__;return f&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function Sy(o=1){return function Rs(o){return(Vt.lFrame.contextLView=function Tu(o,a){for(;o>0;)a=a[15],o--;return a}(o,Vt.lFrame.contextLView))[8]}(o)}function CA(o,a){let l=null;const u=function _g(o){const a=o.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===u?vT(o,g,!0):bT(u,g))return f}else l=f}return l}function IA(o){const a=Ne()[16][6];if(!a.projection){const u=a.projection=uo(o?o.length:1,null),f=u.slice();let g=a.child;for(;null!==g;){const v=o?CA(g,o):0;null!==v&&(f[v]?f[v].projectionNext=g:u[v]=g,f[v]=g),g=g.next}}}function yE(o,a=0,l){const u=Ne(),f=Qt(),g=Wh(f,22+o,16,null,l||null);null===g.projection&&(g.projection=a),jo(),64!=(64&g.flags)&&function E0(o,a,l){jh(a[11],0,a,l,g0(o,l,a),Wr(l.parent||a[6],l,a))}(f,u,g)}function Yc(o,a,l,u,f){const g=Ne(),v=Jh(g,a,l,u);return v!==Wt&&Hs(Qt(),Hn(),g,o,v,g[11],f,!1),Yc}function TE(o,a,l,u,f){const g=o[l+1],v=null===a;let w=u?ha(g):zl(g),I=!1;for(;0!==w&&(!1===I||v);){const N=o[w+1];MA(o[w],a)&&(I=!0,o[w+1]=u?L0(N):P0(N)),w=u?ha(N):zl(N)}I&&(o[l+1]=u?P0(g):L0(g))}function MA(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Qi(o,a)>=0}function AE(o,a){return function pa(o,a,l,u){const f=Ne(),g=Qt(),v=function ds(o){const a=Vt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}(2);g.firstUpdatePass&&function My(o,a,l,u){const f=o.data;if(null===f[l+1]){const g=f[Un()],v=function Ay(o,a){return a>=o.expandoStartIndex}(o,l);(function UA(o,a){return 0!=(o.flags&(a?16:32))})(g,u)&&null===a&&!v&&(a=!1),a=function d1(o,a,l,u){const f=yc(o);let g=u?a.residualClasses:a.residualStyles;if(null===f)0===(u?a.classBindings:a.styleBindings)&&(l=Mg(l=ME(null,o,a,l,u),a.attrs,u),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(l=ME(f,o,a,l,u),null===g){let I=function h1(o,a,l){const u=l?a.classBindings:a.styleBindings;if(0!==zl(u))return o[ha(u)]}(o,a,u);void 0!==I&&Array.isArray(I)&&(I=ME(null,o,a,I[1],u),I=Mg(I,a.attrs,u),function f1(o,a,l,u){o[ha(l?a.classBindings:a.styleBindings)]=u}(o,a,u,I))}else g=function p1(o,a,l){let u;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)u=Mg(u,o[g].hostAttrs,l);return Mg(u,a.attrs,l)}(o,a,u)}return void 0!==g&&(u?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,u),function TA(o,a,l,u,f,g){let v=g?a.classBindings:a.styleBindings,w=ha(v),I=zl(v);o[u]=l;let N,M=!1;if(Array.isArray(l)){const B=l;N=B[1],(null===N||Qi(B,N)>0)&&(M=!0)}else N=l;if(f)if(0!==I){const Y=ha(o[w+1]);o[u+1]=ay(Y,w),0!==Y&&(o[Y+1]=F0(o[Y+1],u)),o[w+1]=function IF(o,a){return 131071&o|a<<17}(o[w+1],u)}else o[u+1]=ay(w,0),0!==w&&(o[w+1]=F0(o[w+1],u)),w=u;else o[u+1]=ay(I,0),0===w?w=u:o[I+1]=F0(o[I+1],u),I=u;M&&(o[u+1]=P0(o[u+1])),TE(o,N,u,!0),TE(o,N,u,!1),function AA(o,a,l,u,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&Qi(g,a)>=0&&(l[u+1]=L0(l[u+1]))}(a,N,o,u,g),v=ay(w,I),g?a.classBindings=v:a.styleBindings=v}(f,g,a,l,v,u)}}(g,o,v,u),a!==Wt&&Ci(f,v,a)&&function RE(o,a,l,u,f,g,v,w){if(!(3&a.type))return;const I=o.data,M=I[w+1];Ry(function LT(o){return 1==(1&o)}(M)?Rg(I,a,l,f,zl(M),v):void 0)||(Ry(g)||function FT(o){return 2==(2&o)}(M)&&(g=Rg(I,null,l,f,w,v)),function C0(o,a,l,u,f){if(a)f?o.addClass(l,u):o.removeClass(l,u);else{let g=-1===u.indexOf("-")?void 0:ua.DashCase;null==f?o.removeStyle(l,u,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=ua.Important),o.setStyle(l,u,f,g))}}(u,v,Ni(Un(),l),f,g))}(g,g.data[Un()],f,f[11],o,f[v+1]=function BA(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=pe(_s(o)))),o}(a,l),u,v)}(o,a,null,!0),AE}function ME(o,a,l,u,f){let g=null;const v=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<v&&(g=a[w],u=Mg(u,g.hostAttrs,f),g!==o);)w++;return null!==o&&(l.directiveStylingLast=w),u}function Mg(o,a,l){const u=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===u&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),it(o,v,!!l||a[++g]))}return void 0===o?null:o}function Rg(o,a,l,u,f,g){const v=null===a;let w;for(;f>0;){const I=o[f],M=Array.isArray(I),N=M?I[1]:I,B=null===N;let Y=l[f+1];Y===Wt&&(Y=B?xt:void 0);let ie=B?xc(Y,u):N===u?Y:void 0;if(M&&!Ry(ie)&&(ie=xc(I,u)),Ry(ie)&&(w=ie,v))return w;const Te=o[f+1];f=v?ha(Te):zl(Te)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(w=xc(I,u))}return w}function Ry(o){return void 0!==o}function HA(o,a=""){const l=Ne(),u=Qt(),f=o+22,g=u.firstCreatePass?Wh(u,f,1,a,null):u.data[f],v=l[f]=function G_(o,a){return o.createText(a)}(l[11],a);gg(u,l,v,g),Jr(g,!1)}function kE(o){return lf("",o,""),kE}function lf(o,a,l){const u=Ne(),f=Jh(u,o,a,l);return f!==Wt&&function Kl(o,a,l){const u=Ni(a,o);!function d0(o,a,l){o.setValue(a,l)}(o[11],u,l)}(u,Un(),f),lf}function Ly(o,a,l){const u=Ne();return Ci(u,Va(),a)&&Hs(Qt(),Hn(),u,o,a,u[11],l,!0),Ly}function Zl(o,a,l){const u=Ne();if(Ci(u,Va(),a)){const g=Qt(),v=Hn();Hs(g,v,u,o,a,eE(yc(g.data),v,u),l,!0)}return Zl}const ud=void 0;var v1=["en",[["a","p"],["AM","PM"],ud],[["AM","PM"],ud,ud],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ud,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ud,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ud,"{1} 'at' {0}",ud],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JA(o){const l=Math.floor(Math.abs(o)),u=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let hf={};function Vy(o){const a=function zE(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=$E(a);if(l)return l;const u=a.split("-")[0];if(l=$E(u),l)return l;if("en"===u)return v1;throw new Ae(701,!1)}function tM(o){return Vy(o)[Ot.PluralCase]}function $E(o){return o in hf||(hf[o]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[o]),hf[o]}var Ot=(()=>((Ot=Ot||{})[Ot.LocaleId=0]="LocaleId",Ot[Ot.DayPeriodsFormat=1]="DayPeriodsFormat",Ot[Ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ot[Ot.DaysFormat=3]="DaysFormat",Ot[Ot.DaysStandalone=4]="DaysStandalone",Ot[Ot.MonthsFormat=5]="MonthsFormat",Ot[Ot.MonthsStandalone=6]="MonthsStandalone",Ot[Ot.Eras=7]="Eras",Ot[Ot.FirstDayOfWeek=8]="FirstDayOfWeek",Ot[Ot.WeekendRange=9]="WeekendRange",Ot[Ot.DateFormat=10]="DateFormat",Ot[Ot.TimeFormat=11]="TimeFormat",Ot[Ot.DateTimeFormat=12]="DateTimeFormat",Ot[Ot.NumberSymbols=13]="NumberSymbols",Ot[Ot.NumberFormats=14]="NumberFormats",Ot[Ot.CurrencyCode=15]="CurrencyCode",Ot[Ot.CurrencySymbol=16]="CurrencySymbol",Ot[Ot.CurrencyName=17]="CurrencyName",Ot[Ot.Currencies=18]="Currencies",Ot[Ot.Directionality=19]="Directionality",Ot[Ot.PluralCase=20]="PluralCase",Ot[Ot.ExtraData=21]="ExtraData",Ot))();const dd="en-US";let Pg=dd;function Bg(o,a,l,u,f){if(o=te(o),Array.isArray(o))for(let g=0;g<o.length;g++)Bg(o[g],a,l,u,f);else{const g=Qt(),v=Ne();let w=Vs(o)?o:te(o.provide),I=Qp(o);const M=dr(),N=1048575&M.providerIndexes,B=M.directiveStart,Y=M.providerIndexes>>20;if(Vs(o)||!o.multi){const ie=new wi(I,f,Gh),Te=Xl(w,a,f?N:N+Y,B);-1===Te?(so(ps(M,v),g,w),_f(g,o,a.length),a.push(w),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(ie),v.push(ie)):(l[Te]=ie,v[Te]=ie)}else{const ie=Xl(w,a,N+Y,B),Te=Xl(w,a,N,N+Y),$e=ie>=0&&l[ie],Ke=Te>=0&&l[Te];if(f&&!Ke||!f&&!$e){so(ps(M,v),g,w);const dt=function AM(o,a,l,u,f){const g=new wi(o,l,Gh);return g.multi=[],g.index=a,g.componentProviders=0,dC(g,f,u&&!l),g}(f?Ug:TM,l.length,f,u,I);!f&&Ke&&(l[Te].providerFactory=dt),_f(g,o,a.length,0),a.push(w),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(dt),v.push(dt)}else _f(g,o,ie>-1?ie:Te,dC(l[f?Te:ie],I,!f&&u));!f&&u&&Ke&&l[Te].componentProviders++}}}function _f(o,a,l,u){const f=Vs(a),g=function zw(o){return!!o.useClass}(a);if(f||g){const I=(g?te(a.useClass):a).prototype.ngOnDestroy;if(I){const M=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const N=M.indexOf(l);-1===N?M.push(l,[u,I]):M[N+1].push(u,I)}else M.push(l,I)}}}function dC(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function Xl(o,a,l,u){for(let f=l;f<u;f++)if(a[f]===o)return f;return-1}function TM(o,a,l,u){return Ky(this.multi,[])}function Ug(o,a,l,u){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Yi(l,l[1],this.providerFactory.index,u);g=w.slice(0,v),Ky(f,g);for(let I=v;I<w.length;I++)g.push(w[I])}else g=[],Ky(f,g);return g}function Ky(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function fd(o,a=[]){return l=>{l.providersResolver=(u,f)=>function mf(o,a,l){const u=Qt();if(u.firstCreatePass){const f=oi(o);Bg(l,u.data,u.blueprint,f,!0),Bg(a,u.data,u.blueprint,f,!1)}}(u,f?f(o):o,a)}}class Zc{}class hC{}function MM(o,a){return new RM(o,a??null)}class RM extends Zc{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new my(this);const u=at(a);this._bootstrapComponents=rl(u.bootstrap),this._r3Injector=iy(a,l,[{provide:Zc,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver}],pe(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Yy extends hC{constructor(a){super(),this.moduleType=a}create(a){return new RM(this.moduleType,a)}}class kM extends Zc{constructor(a,l,u){super(),this.componentFactoryResolver=new my(this),this.instance=null;const f=new S_([...a,{provide:Zc,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver}],l||Zp(),u,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Zy(o,a,l=null){return new kM(o,a,l).injector}let OM=(()=>{class o{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const u=Hw(0,l.type),f=u.length>0?Zy([u],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=on({token:o,providedIn:"environment",factory:()=>new o(hn(ca))}),o})();function yf(o){o.getStandaloneInjector=a=>a.get(OM).getOrCreateStandaloneInjector(o)}function mC(o,a,l){const u=hr()+o,f=Ne();return f[u]===Wt?fa(f,u,l?a.call(l):a()):function Qh(o,a){return o[a]}(f,u)}function _C(o,a,l,u){return function yC(o,a,l,u,f,g){const v=a+l;return Ci(o,v,f)?fa(o,v+1,g?u.call(g,f):u(f)):function vf(o,a){const l=o[a];return l===Wt?void 0:l}(o,v+1)}(Ne(),hr(),o,a,l,u)}function rv(o){return a=>{setTimeout(o,void 0,a)}}const ma=class nv extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,u){let f=a,g=l||(()=>null),v=u;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),g=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(g=rv(g),f&&(f=rv(f)),v&&(v=rv(v)));const w=super.subscribe({next:f,error:g,complete:v});return a instanceof z.w0&&a.add(w),w}};function q1(){return this._results[zc()]()}class iv{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=zc(),u=iv.prototype;u[l]||(u[l]=q1)}get changes(){return this._changes||(this._changes=new ma)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const u=this;u.dirty=!1;const f=Rn(a);(this._changesDetected=!function an(o,a,l){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++){let f=o[u],g=a[u];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(u._results,f,l))&&(u._results=f,u.length=f.length,u.last=f[this.length-1],u.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let jg=(()=>{class o{}return o.__NG_ELEMENT_ID__=IC,o})();const CC=jg,XM=class extends CC{constructor(a,l,u){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=u}createEmbeddedView(a,l){const u=this._declarationTContainer.tViews,f=uy(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(u)),W0(u,f,a),new Yh(f)}};function IC(){return $g(dr(),Ne())}function $g(o,a){return 4&o.type?new XM(a,o,Zu(o,a)):null}let zg=(()=>{class o{}return o.__NG_ELEMENT_ID__=DC,o})();function DC(){return ex(dr(),Ne())}const JM=zg,sv=class extends JM{constructor(a,l,u){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=u}get element(){return Zu(this._hostTNode,this._hostLView)}get injector(){return new Xo(this._hostTNode,this._hostLView)}get parentInjector(){const a=Wa(this._hostTNode,this._hostLView);if(dh(a)){const l=ks(a,this._hostLView),u=fr(a);return new Xo(l[1].data[u+8],l)}return new Xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=ov(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,u){let f,g;"number"==typeof u?f=u:null!=u&&(f=u.index,g=u.injector);const v=a.createEmbeddedView(l||{},g);return this.insert(v,f),v}createComponent(a,l,u,f,g){const v=a&&!function gs(o){return"function"==typeof o}(a);let w;if(v)w=l;else{const B=l||{};w=B.index,u=B.injector,f=B.projectableNodes,g=B.environmentInjector||B.ngModuleRef}const I=v?a:new od(O(a)),M=u||this.parentInjector;if(!g&&null==I.ngModule){const Y=(v?M:this.parentInjector).get(ca,null);Y&&(g=Y)}const N=I.create(M,f,void 0,g);return this.insert(N.hostView,w),N}insert(a,l){const u=a._lView,f=u[1];if(function mc(o){return mi(o[3])}(u)){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const B=u[3],Y=new sv(B,B[6],B[3]);Y.detach(Y.indexOf(a))}}const g=this._adjustIndex(l),v=this._lContainer;!function uT(o,a,l,u){const f=10+u,g=l.length;u>0&&(l[f-1][4]=a),u<g-10?(a[4]=l[f],co(l,10+u,a)):(l.push(a),a[4]=null),a[3]=l;const v=a[17];null!==v&&l!==v&&function dT(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(v,a);const w=a[19];null!==w&&w.insertView(o),a[2]|=64}(f,u,v,g);const w=w0(g,v),I=u[11],M=fg(I,v[7]);return null!==M&&function h0(o,a,l,u,f,g){u[0]=f,u[6]=a,Vc(o,u,l,1,f,g)}(f,v[6],I,u,M,w),a.attachToViewContainerRef(),co(av(v),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=ov(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),u=q_(this._lContainer,l);u&&(sr(av(this._lContainer),l),Uh(u[1],u))}detach(a){const l=this._adjustIndex(a,-1),u=q_(this._lContainer,l);return u&&null!=sr(av(this._lContainer),l)?new Yh(u):null}_adjustIndex(a,l=0){return a??this.length+l}};function ov(o){return o[8]}function av(o){return o[8]||(o[8]=[])}function ex(o,a){let l;const u=a[o.index];if(mi(u))l=u;else{let f;if(8&o.type)f=Gn(u);else{const g=a[11];f=g.createComment("");const v=Pr(o,a);da(g,fg(g,v),f,function v0(o,a){return o.nextSibling(a)}(g,v),!1)}a[o.index]=l=hy(u,a,f,o),vg(a,l)}return new sv(l,o,a)}class Gg{constructor(a){this.queryList=a,this.matches=null}clone(){return new Gg(this.queryList)}setDirty(){this.queryList.setDirty()}}class ul{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const u=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<u;g++){const v=l.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new ul(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==hv(a,l).matches&&this.queries[l].setDirty()}}class Eo{constructor(a,l,u=null){this.predicate=a,this.flags=l,this.read=u}}class lv{constructor(a=[]){this.queries=a}elementStart(a,l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let u=0;u<this.length;u++){const f=null!==l?l.length:0,g=this.getByIndex(u).embeddedTView(a,f);g&&(g.indexInDeclarationView=u,null!==l?l.push(g):l=[g])}return null!==l?new lv(l):null}template(a,l){for(let u=0;u<this.queries.length;u++)this.queries[u].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Wg{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new Wg(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let u=a.parent;for(;null!==u&&8&u.type&&u.index!==l;)u=u.parent;return l===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const u=this.metadata.predicate;if(Array.isArray(u))for(let f=0;f<u.length;f++){const g=u[f];this.matchTNodeWithReadOption(a,l,nx(l,g)),this.matchTNodeWithReadOption(a,l,Ka(l,a,g,!1,!1))}else u===jg?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Ka(l,a,u,!1,!1))}matchTNodeWithReadOption(a,l,u){if(null!==u){const f=this.metadata.read;if(null!==f)if(f===Lc||f===zg||f===jg&&4&l.type)this.addMatch(l.index,-2);else{const g=Ka(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,u)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function nx(o,a){const l=o.localNames;if(null!==l)for(let u=0;u<l.length;u+=2)if(l[u]===a)return l[u+1];return null}function ix(o,a,l,u){return-1===l?function rx(o,a){return 11&o.type?Zu(o,a):4&o.type?$g(o,a):null}(a,o):-2===l?function qg(o,a,l){return l===Lc?Zu(a,o):l===jg?$g(a,o):l===zg?ex(a,o):void 0}(o,a,u):Yi(o,o[1],l,a)}function TC(o,a,l,u){const f=a[19].queries[u];if(null===f.matches){const g=o.data,v=l.matches,w=[];for(let I=0;I<v.length;I+=2){const M=v[I];w.push(M<0?null:ix(a,g[M],v[I+1],l.metadata.read))}f.matches=w}return f.matches}function _a(o,a,l,u){const f=o.queries.getByIndex(l),g=f.matches;if(null!==g){const v=TC(o,a,f,l);for(let w=0;w<g.length;w+=2){const I=g[w];if(I>0)u.push(v[w/2]);else{const M=g[w+1],N=a[-I];for(let B=10;B<N.length;B++){const Y=N[B];Y[17]===Y[3]&&_a(Y[1],Y,M,u)}if(null!==N[9]){const B=N[9];for(let Y=0;Y<B.length;Y++){const ie=B[Y];_a(ie[1],ie,M,u)}}}}}return u}function cv(o){const a=Ne(),l=Qt(),u=Ba();vc(u+1);const f=hv(l,u);if(o.dirty&&function gc(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?_a(l,a,u,[]):TC(l,a,f,u);o.reset(g,Yw),o.notifyOnChanges()}return!0}return!1}function hi(o,a,l){const u=Qt();u.firstCreatePass&&(dv(u,new Eo(o,a,l),-1),2==(2&a)&&(u.staticViewQueries=!0)),uv(u,Ne(),a)}function dl(o,a,l,u){const f=Qt();if(f.firstCreatePass){const g=dr();dv(f,new Eo(a,l,u),g.index),function MC(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}uv(f,Ne(),l)}function AC(){return function sx(o,a){return o[19].queries[a].queryList}(Ne(),Ba())}function uv(o,a,l){const u=new iv(4==(4&l));ZT(o,a,u,u.destroy),null===a[19]&&(a[19]=new ul),a[19].queries.push(new Gg(u))}function dv(o,a,l){null===o.queries&&(o.queries=new lv),o.queries.track(new Wg(a,l))}function hv(o,a){return o.queries.getByIndex(a)}function Iv(...o){}const UC=new Ln("Application Initializer");let Dv=(()=>{class o{constructor(l){this.appInits=l,this.resolve=Iv,this.reject=Iv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,f)=>{this.resolve=u,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(Kc(g))l.push(g);else if(Cy(g)){const v=new Promise((w,I)=>{g.subscribe({complete:w,error:I})});l.push(v)}}Promise.all(l).then(()=>{u()}).catch(f=>{this.reject(f)}),0===l.length&&u(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(hn(UC,8))},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const If=new Ln("AppId",{providedIn:"root",factory:function md(){return`${_d()}${_d()}${_d()}`}});function _d(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const HC=new Ln("Platform Initializer"),Tv=new Ln("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Df=new Ln("appBootstrapListener"),wx=new Ln("AnimationModuleType");let jC=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Sf=new Ln("LocaleId",{providedIn:"root",factory:()=>gr(Sf,et.Optional|et.SkipSelf)||function Ex(){return typeof $localize<"u"&&$localize.locale||dd}()}),Cx=new Ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nL{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Av=(()=>{class o{compileModuleSync(l){return new Yy(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const u=this.compileModuleSync(l),g=rl(at(l).declarations).reduce((v,w)=>{const I=O(w);return I&&v.push(new od(I)),v},[]);return new nL(u,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const im=(()=>Promise.resolve(0))();function sm(o){typeof Zone>"u"?im.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class vs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ma(!1),this.onMicrotaskEmpty=new ma(!1),this.onStable=new ma(!1),this.onError=new ma(!1),typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!u&&l,f.shouldCoalesceRunChangeDetection=u,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function zC(){let o=Ft.requestAnimationFrame,a=Ft.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function sL(o){const a=()=>{!function GC(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Ft,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,WC(o),o.isCheckStableRunning=!0,xv(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),WC(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,u,f,g,v,w)=>{try{return Ax(o),l.invokeTask(f,g,v,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),Mx(o)}},onInvoke:(l,u,f,g,v,w,I)=>{try{return Ax(o),l.invoke(f,g,v,w,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),Mx(o)}},onHasTask:(l,u,f,g)=>{l.hasTask(f,g),u===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,WC(o),xv(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,u,f,g)=>(l.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vs.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(vs.isInAngularZone())throw new Ae(909,!1)}run(a,l,u){return this._inner.run(a,l,u)}runTask(a,l,u,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,iL,Iv,Iv);try{return g.runTask(v,l,u)}finally{g.cancelTask(v)}}runGuarded(a,l,u){return this._inner.runGuarded(a,l,u)}runOutsideAngular(a){return this._outer.run(a)}}const iL={};function xv(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function WC(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Ax(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Mx(o){o._nesting--,xv(o)}class xx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ma,this.onMicrotaskEmpty=new ma,this.onStable=new ma,this.onError=new ma}run(a,l,u){return a.apply(l,u)}runGuarded(a,l,u){return a.apply(l,u)}runOutsideAngular(a){return a()}runTask(a,l,u,f){return a.apply(l,u)}}const Rv=new Ln(""),qC=new Ln("");let kv,KC=(()=>{class o{constructor(l,u,f){this._ngZone=l,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,kv||(function Rx(o){kv=o}(f),f.addToWindow(u)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vs.assertNotInAngularZone(),sm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sm(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,f){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,u,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,u,f){return[]}}return o.\u0275fac=function(l){return new(l||o)(hn(vs),hn(om),hn(qC))},o.\u0275prov=on({token:o,factory:o.\u0275fac}),o})(),om=(()=>{class o{constructor(){this._applications=new Map}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){return kv?.findTestabilityInTree(this,l,u)??null}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),fl=null;const YC=new Ln("AllowMultipleToken"),ZC=new Ln("PlatformDestroyListeners");class QC{constructor(a,l){this.name=a,this.token=l}}function Tf(o,a,l=[]){const u=`Platform: ${a}`,f=new Ln(u);return(g=[])=>{let v=Af();if(!v||v.injector.get(YC,!1)){const w=[...l,...g,{provide:f,useValue:!0}];o?o(w):function XC(o){if(fl&&!fl.get(YC,!1))throw new Ae(400,!1);fl=o;const a=o.get(Nv);(function Ov(o){const a=o.get(HC,null);a&&a.forEach(l=>l())})(o)}(function am(o=[],a){return vo.create({name:a,providers:[{provide:qp,useValue:"platform"},{provide:ZC,useValue:new Set([()=>fl=null])},...o]})}(w,u))}return function Fx(o){const a=Af();if(!a)throw new Ae(401,!1);return a}()}}function Af(){return fl?.get(Nv)??null}let Nv=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const f=function Pv(o,a){let l;return l="noop"===o?new xx:("zone.js"===o?void 0:o)||new vs(a),l}(u?.ngZone,function JC(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(u)),g=[{provide:vs,useValue:f}];return f.run(()=>{const v=vo.create({providers:g,parent:this.injector,name:l.moduleType.name}),w=l.create(v),I=w.injector.get(Lh,null);if(!I)throw new Ae(402,!1);return f.runOutsideAngular(()=>{const M=f.onError.subscribe({next:N=>{I.handleError(N)}});w.onDestroy(()=>{yd(this._modules,w),M.unsubscribe()})}),function eI(o,a,l){try{const u=l();return Kc(u)?u.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):u}catch(u){throw a.runOutsideAngular(()=>o.handleError(u)),u}}(I,f,()=>{const M=w.injector.get(Dv);return M.runInitializers(),M.donePromise.then(()=>(function WE(o){Kt(o,"Expected localeId to be defined"),"string"==typeof o&&(Pg=o.toLowerCase().replace(/_/g,"-"))}(w.injector.get(Sf,dd)||dd),this._moduleDoBootstrap(w),w))})})}bootstrapModule(l,u=[]){const f=Fv({},u);return function kx(o,a,l){const u=new Yy(l);return Promise.resolve(u)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const u=l.injector.get(lm);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>u.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Ae(403,!1);l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const l=this._injector.get(ZC,null);l&&(l.forEach(u=>u()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(hn(vo))},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function Fv(o,a){return Array.isArray(a)?a.reduce(Fv,o):{...o,...a}}let lm=(()=>{class o{constructor(l,u,f){this._zone=l,this._injector=u,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new P.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),v=new P.y(w=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{vs.assertNotInAngularZone(),sm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{vs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{I.unsubscribe(),M.unsubscribe()}});this.isStable=(0,le.T)(g,v.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,u){const f=l instanceof M_;if(!this._injector.get(Dv).done)throw!f&&Ve(l),new Ae(405,false);let v;v=f?l:this._injector.get(Fc).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const w=function Nx(o){return o.isBoundToModule}(v)?void 0:this._injector.get(Zc),M=v.create(vo.NULL,[],u||v.selector,w),N=M.location.nativeElement,B=M.injector.get(Rv,null);return B?.registerApplication(N),M.onDestroy(()=>{this.detachView(M.hostView),yd(this.components,M),B?.unregisterApplication(N)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new Ae(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;yd(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Df,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>yd(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Ae(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(l){return new(l||o)(hn(vs),hn(ca),hn(Lh))},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function yd(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let Lv=!0,nI=!1;function lL(){return nI=!0,Lv}function Vv(){if(nI)throw new Error("Cannot enable prod mode after platform setup.");Lv=!1}let Xc=(()=>{class o{}return o.__NG_ELEMENT_ID__=Bx,o})();function Bx(o){return function rI(o,a,l){if(wl(o)&&!l){const u=dn(o.index,a);return new Yh(u,u)}return 47&o.type?new Yh(a[16],a):null}(dr(),Ne(),16==(16&o))}class jx{constructor(){}supports(a){return Zh(a)}create(a){return new _L(a)}}const mL=(o,a)=>a;class _L{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||mL}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,u=this._removalsHead,f=0,g=null;for(;l||u;){const v=!u||l&&l.currentIndex<zx(u,f,g)?l:u,w=zx(v,f,g),I=v.currentIndex;if(v===u)f--,u=u._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{g||(g=[]);const M=w-f,N=I-f;if(M!=N){for(let Y=0;Y<M;Y++){const ie=Y<g.length?g[Y]:g[Y]=0,Te=ie+Y;N<=Te&&Te<M&&(g[Y]=ie+1)}g[v.previousIndex]=N-M}}w!==I&&a(v,w,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Zh(a))throw new Ae(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,l=this._itHead,u=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)g=a[w],v=this._trackByFn(w,g),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,g,v,w)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,w),u=!0),l=l._next}else f=0,function aE(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[zc()]();let u;for(;!(u=l.next()).done;)a(u.value)}}(a,w=>{v=this._trackByFn(f,w),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,w,v,f)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,v,f),u=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,u,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(u,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new yL(l,u),g,f),a}_verifyReinsertion(a,l,u,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,u),this._addToMoves(a,u),a}_moveAfter(a,l,u){return this._unlink(a),this._insertAfter(a,l,u),this._addToMoves(a,u),a}_addAfter(a,l,u){return this._insertAfter(a,l,u),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,u){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new $x),this._linkedRecords.put(a),a.currentIndex=u,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,u=a._next;return null===l?this._itHead=u:l._next=u,null===u?this._itTail=l:u._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $x),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class yL{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vL{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===l||l<=u.currentIndex)&&Object.is(u.trackById,a))return u;return null}remove(a){const l=a._prevDup,u=a._nextDup;return null===l?this._head=u:l._nextDup=u,null===u?this._tail=l:u._prevDup=l,null===this._head}}class $x{constructor(){this.map=new Map}put(a){const l=a.trackById;let u=this.map.get(l);u||(u=new vL,this.map.set(l,u)),u.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zx(o,a,l){const u=o.previousIndex;if(null===u)return u;let f=0;return l&&u<l.length&&(f=l[u]),u+a+f}class cI{constructor(){}supports(a){return a instanceof Map||Cg(a)}create(){return new Gx}}class Gx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Cg(a)))throw new Ae(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(u,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,u),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,u);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let u=l;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const u=a._prev;return l._next=a,l._prev=u,a._prev=l,u&&(u._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const u=new Wx(a);return this._records.set(a,u),u.currentValue=l,this._addToAdditions(u),u}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(u=>l(a[u],u))}}class Wx{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uI(){return new $v([new jx])}let $v=(()=>{class o{constructor(l){this.factories=l}static create(l,u){if(null!=u){const f=u.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:u=>o.create(l,u||uI()),deps:[[o,new ut,new Ie]]}}find(l){const u=this.factories.find(f=>f.supports(l));if(null!=u)return u;throw new Ae(901,!1)}}return o.\u0275prov=on({token:o,providedIn:"root",factory:uI}),o})();function dI(){return new zv([new cI])}let zv=(()=>{class o{constructor(l){this.factories=l}static create(l,u){if(u){const f=u.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:u=>o.create(l,u||dI()),deps:[[o,new ut,new Ie]]}}find(l){const u=this.factories.find(f=>f.supports(l));if(u)return u;throw new Ae(901,!1)}}return o.\u0275prov=on({token:o,providedIn:"root",factory:dI}),o})();const wL=Tf(null,"core",[]);let Kx=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(hn(lm))},o.\u0275mod=rn({type:o}),o.\u0275inj=jt({}),o})();function De(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(mt,Re,L)=>{L.d(Re,{Z:()=>Ae});var d=L(2090),z=L(4859),P=L(9681),le=L(1877);class he{constructor(Ce,_e){this._delegate=Ce,this.firebase=_e,(0,P._addComponent)(Ce,new z.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ce,_e=P._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const Je=this._delegate.container.getProvider(Ce);return!Je.isInitialized()&&"EXPLICIT"===(null===(Xe=Je.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&Je.initialize(),Je.getImmediate({identifier:_e})}_removeServiceInstance(Ce,_e=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(_e)}_addComponent(Ce){(0,P._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,P._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function we(){const ot=function pe(ot){const Ce={},_e={__esModule:!0,initializeApp:function Pe(ae,fe={}){const Ee=P.initializeApp(ae,fe);if((0,d.r3)(Ce,Ee.name))return Ce[Ee.name];const ee=new ot(Ee,_e);return Ce[Ee.name]=ee,ee},app:Je,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Se(ae){const fe=ae.name,Ee=fe.replace("-compat","");if(P._registerComponent(ae)&&"PUBLIC"===ae.type){const ee=(re=Je())=>{if("function"!=typeof re[Ee])throw ce.create("invalid-app-argument",{appName:fe});return re[Ee]()};void 0!==ae.serviceProps&&(0,d.ZB)(ee,ae.serviceProps),_e[Ee]=ee,ot.prototype[Ee]=function(...re){return this._getService.bind(this,fe).apply(this,ae.multipleInstances?re:[])}}return"PUBLIC"===ae.type?_e[Ee]:null},removeApp:function Xe(ae){delete Ce[ae]},useAsService:function We(ae,fe){return"serverAuth"===fe?null:fe},modularAPIs:P}};function Je(ae){if(!(0,d.r3)(Ce,ae=ae||P._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:ae});return Ce[ae]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function Oe(){return Object.keys(Ce).map(ae=>Ce[ae])}}),Je.App=ot,_e}(he);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Ce(_e){(0,d.ZB)(ot,_e)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ot}(),q=new le.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ae=K;!function Fe(ot){(0,P.registerVersion)("@firebase/app-compat","0.2.1",ot)}()},9681:(mt,Re,L)=>{L.r(Re),L.d(Re,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Gi,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>sn,_addOrOverwriteComponent:()=>on,_apps:()=>bn,_clearComponents:()=>$i,_components:()=>Nn,_getProvider:()=>jt,_registerComponent:()=>Zt,_removeServiceInstance:()=>Or,deleteApp:()=>Wi,getApp:()=>Kn,getApps:()=>Oi,initializeApp:()=>Qr,onLog:()=>er,registerVersion:()=>cr,setLogLevel:()=>Mn});var d=L(5861),z=L(4859),P=L(1877),le=L(2090),he=L(8766);class be{constructor(Me){this.container=Me}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function ce(nt){return"VERSION"===nt.getComponent()?.type}(rt)){const Tt=rt.getImmediate();return`${Tt.library}/${Tt.version}`}return null}).filter(rt=>rt).join(" ")}}const pe="@firebase/app",K=new P.Yd("@firebase/app"),Kt="[DEFAULT]",qe={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bn=new Map,Nn=new Map;function sn(nt,Me){try{nt.container.addComponent(Me)}catch(rt){K.debug(`Component ${Me.name} failed to register with FirebaseApp ${nt.name}`,rt)}}function on(nt,Me){nt.container.addOrOverwriteComponent(Me)}function Zt(nt){const Me=nt.name;if(Nn.has(Me))return K.debug(`There were multiple attempts to register component ${Me}.`),!1;Nn.set(Me,nt);for(const rt of bn.values())sn(rt,nt);return!0}function jt(nt,Me){const rt=nt.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),nt.container.getProvider(Me)}function Or(nt,Me,rt=Kt){jt(nt,Me).clearInstance(rt)}function $i(){Nn.clear()}const zn=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class zi{constructor(Me,rt,Tt){this._isDeleted=!1,this._options=Object.assign({},Me),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=Tt,this.container.addComponent(new z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Me){this.checkDestroyed(),this._automaticDataCollectionEnabled=Me}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Me){this._isDeleted=Me}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}}const Gi="9.16.0";function Qr(nt,Me={}){let rt=nt;"object"!=typeof Me&&(Me={name:Me});const Tt=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},Me),Rt=Tt.name;if("string"!=typeof Rt||!Rt)throw zn.create("bad-app-name",{appName:String(Rt)});if(rt||(rt=(0,le.aH)()),!rt)throw zn.create("no-options");const rn=bn.get(Rt);if(rn){if((0,le.vZ)(rt,rn.options)&&(0,le.vZ)(Tt,rn.config))return rn;throw zn.create("duplicate-app",{appName:Rt})}const W=new z.H0(Rt);for(const X of Nn.values())W.addComponent(X);const G=new zi(rt,Tt,W);return bn.set(Rt,G),G}function Kn(nt=Kt){const Me=bn.get(nt);if(!Me&&nt===Kt)return Qr();if(!Me)throw zn.create("no-app",{appName:nt});return Me}function Oi(){return Array.from(bn.values())}function Wi(nt){return et.apply(this,arguments)}function et(){return(et=(0,d.Z)(function*(nt){const Me=nt.name;bn.has(Me)&&(bn.delete(Me),yield Promise.all(nt.container.getProviders().map(rt=>rt.delete())),nt.isDeleted=!0)})).apply(this,arguments)}function cr(nt,Me,rt){var Tt;let Rt=null!==(Tt=qe[nt])&&void 0!==Tt?Tt:nt;rt&&(Rt+=`-${rt}`);const rn=Rt.match(/\s|\//),W=Me.match(/\s|\//);if(rn||W){const G=[`Unable to register library "${Rt}" with version "${Me}":`];return rn&&G.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),rn&&W&&G.push("and"),W&&G.push(`version name "${Me}" contains illegal characters (whitespace or "/")`),void K.warn(G.join(" "))}Zt(new z.wA(`${Rt}-version`,()=>({library:Rt,version:Me}),"VERSION"))}function er(nt,Me){if(null!==nt&&"function"!=typeof nt)throw zn.create("invalid-log-argument");(0,P.Am)(nt,Me)}function Mn(nt){(0,P.Ub)(nt)}const xn="firebase-heartbeat-store";let Pn=null;function Sn(){return Pn||(Pn=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(nt,Me)=>{0===Me&&nt.createObjectStore(xn)}}).catch(nt=>{throw zn.create("idb-open",{originalErrorMessage:nt.message})})),Pn}function vt(){return(vt=(0,d.Z)(function*(nt){try{return(yield Sn()).transaction(xn).objectStore(xn).get(tr(nt))}catch(Me){if(Me instanceof le.ZR)K.warn(Me.message);else{const rt=zn.create("idb-get",{originalErrorMessage:Me?.message});K.warn(rt.message)}}})).apply(this,arguments)}function Ft(nt,Me){return ri.apply(this,arguments)}function ri(){return(ri=(0,d.Z)(function*(nt,Me){try{const Tt=(yield Sn()).transaction(xn,"readwrite");return yield Tt.objectStore(xn).put(Me,tr(nt)),Tt.done}catch(rt){if(rt instanceof le.ZR)K.warn(rt.message);else{const Tt=zn.create("idb-set",{originalErrorMessage:rt?.message});K.warn(Tt.message)}}})).apply(this,arguments)}function tr(nt){return`${nt.name}!${nt.options.appId}`}class Xr{constructor(Me){this.container=Me,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new en(rt),this._heartbeatsCachePromise=this._storage.read().then(Tt=>(this._heartbeatsCache=Tt,Tt))}triggerHeartbeat(){var Me=this;return(0,d.Z)(function*(){const Tt=Me.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=Ut();if(null===Me._heartbeatsCache&&(Me._heartbeatsCache=yield Me._heartbeatsCachePromise),Me._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!Me._heartbeatsCache.heartbeats.some(rn=>rn.date===Rt))return Me._heartbeatsCache.heartbeats.push({date:Rt,agent:Tt}),Me._heartbeatsCache.heartbeats=Me._heartbeatsCache.heartbeats.filter(rn=>{const W=new Date(rn.date).valueOf();return Date.now()-W<=2592e6}),Me._storage.overwrite(Me._heartbeatsCache)})()}getHeartbeatsHeader(){var Me=this;return(0,d.Z)(function*(){if(null===Me._heartbeatsCache&&(yield Me._heartbeatsCachePromise),null===Me._heartbeatsCache||0===Me._heartbeatsCache.heartbeats.length)return"";const rt=Ut(),{heartbeatsToSend:Tt,unsentEntries:Rt}=function ii(nt,Me=1024){const rt=[];let Tt=nt.slice();for(const Rt of nt){const rn=rt.find(W=>W.agent===Rt.agent);if(rn){if(rn.dates.push(Rt.date),wr(rt)>Me){rn.dates.pop();break}}else if(rt.push({agent:Rt.agent,dates:[Rt.date]}),wr(rt)>Me){rt.pop();break}Tt=Tt.slice(1)}return{heartbeatsToSend:rt,unsentEntries:Tt}}(Me._heartbeatsCache.heartbeats),rn=(0,le.L)(JSON.stringify({version:2,heartbeats:Tt}));return Me._heartbeatsCache.lastSentHeartbeatDate=rt,Rt.length>0?(Me._heartbeatsCache.heartbeats=Rt,yield Me._storage.overwrite(Me._heartbeatsCache)):(Me._heartbeatsCache.heartbeats=[],Me._storage.overwrite(Me._heartbeatsCache)),rn})()}}function Ut(){return(new Date).toISOString().substring(0,10)}class en{constructor(Me){this.app=Me,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Me=this;return(0,d.Z)(function*(){return(yield Me._canUseIndexedDBPromise)&&(yield function yt(nt){return vt.apply(this,arguments)}(Me.app))||{heartbeats:[]}})()}overwrite(Me){var rt=this;return(0,d.Z)(function*(){var Tt;if(yield rt._canUseIndexedDBPromise){const rn=yield rt.read();return Ft(rt.app,{lastSentHeartbeatDate:null!==(Tt=Me.lastSentHeartbeatDate)&&void 0!==Tt?Tt:rn.lastSentHeartbeatDate,heartbeats:Me.heartbeats})}})()}add(Me){var rt=this;return(0,d.Z)(function*(){var Tt;if(yield rt._canUseIndexedDBPromise){const rn=yield rt.read();return Ft(rt.app,{lastSentHeartbeatDate:null!==(Tt=Me.lastSentHeartbeatDate)&&void 0!==Tt?Tt:rn.lastSentHeartbeatDate,heartbeats:[...rn.heartbeats,...Me.heartbeats]})}})()}}function wr(nt){return(0,le.L)(JSON.stringify({version:2,heartbeats:nt})).length}!function Vn(nt){Zt(new z.wA("platform-logger",Me=>new be(Me),"PRIVATE")),Zt(new z.wA("heartbeat",Me=>new Xr(Me),"PRIVATE")),cr(pe,"0.9.1",nt),cr(pe,"0.9.1","esm2017"),cr("fire-js","")}("")},4859:(mt,Re,L)=>{L.d(Re,{H0:()=>pe,wA:()=>P});var d=L(5861),z=L(2090);class P{constructor(K,q,te){this.name=K,this.instanceFactory=q,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const le="[DEFAULT]";class he{constructor(K,q){this.name=K,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const q=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(q)){const te=new z.BH;if(this.instancesDeferred.set(q,te),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:q});Ge&&te.resolve(Ge)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(K){var q;const te=this.normalizeInstanceIdentifier(K?.identifier),Ge=null!==(q=K?.optional)&&void 0!==q&&q;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Fe){if(Ge)return null;throw Fe}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function ce(we){return"EAGER"===we.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[q,te]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(q);try{const Fe=this.getOrInitializeService({instanceIdentifier:Ge});te.resolve(Fe)}catch{}}}}clearInstance(K=le){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,d.Z)(function*(){const q=Array.from(K.instances.values());yield Promise.all([...q.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...q.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=le){return this.instances.has(K)}getOptions(K=le){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:q={}}=K,te=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:te,options:q});for(const[Fe,Ae]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Fe)&&Ae.resolve(Ge);return Ge}onInit(K,q){var te;const Ge=this.normalizeInstanceIdentifier(q),Fe=null!==(te=this.onInitCallbacks.get(Ge))&&void 0!==te?te:new Set;Fe.add(K),this.onInitCallbacks.set(Ge,Fe);const Ae=this.instances.get(Ge);return Ae&&K(Ae,Ge),()=>{Fe.delete(K)}}invokeOnInitCallbacks(K,q){const te=this.onInitCallbacks.get(q);if(te)for(const Ge of te)try{Ge(K,q)}catch{}}getOrInitializeService({instanceIdentifier:K,options:q={}}){let te=this.instances.get(K);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(we=K,we===le?void 0:we),options:q}),this.instances.set(K,te),this.instancesOptions.set(K,q),this.invokeOnInitCallbacks(te,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,te)}catch{}var we;return te||null}normalizeInstanceIdentifier(K=le){return this.component?this.component.multipleInstances?K:le:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const q=this.getProvider(K.name);if(q.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);q.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const q=new he(K,this);return this.providers.set(K,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,Re,L)=>{L.d(Re,{Am:()=>we,Ub:()=>pe,Yd:()=>ce,in:()=>z});const d=[];var z=(()=>{return(K=z||(z={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",z;var K})();const P={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},le=z.INFO,he={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},be=(K,q,...te)=>{if(q<K.logLevel)return;const Ge=(new Date).toISOString(),Fe=he[q];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Fe](`[${Ge}]  ${K.name}:`,...te)};class ce{constructor(q){this.name=q,this._logLevel=le,this._logHandler=be,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in z))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?P[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...q),this._logHandler(this,z.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...q),this._logHandler(this,z.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,z.INFO,...q),this._logHandler(this,z.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,z.WARN,...q),this._logHandler(this,z.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...q),this._logHandler(this,z.ERROR,...q)}}function pe(K){d.forEach(q=>{q.setLogLevel(K)})}function we(K,q){for(const te of d){let Ge=null;q&&q.level&&(Ge=P[q.level]),te.userLogHandler=null===K?null:(Fe,Ae,...ot)=>{const Ce=ot.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");Ae>=(Ge??Fe.logLevel)&&K({level:z[Ae].toLowerCase(),message:Ce,args:ot,type:Fe.name})}}}},259:(mt,Re,L)=>{L.d(Re,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=L(9681);(0,d.registerVersion)("firebase","9.16.0","app")},9260:(mt,Re,L)=>{L.d(Re,{Z:()=>d.Z});var d=L(3942);d.Z.registerVersion("firebase","9.16.0","app-compat")},9568:(mt,Re,L)=>{L.r(Re);var d=L(5861),z=L(3942),P=L(1808),le=L(2090),ce=(L(9681),L(1877),L(4859));function pe(){return window}function q(){return(q=(0,d.Z)(function*(j,O,U){var oe;const{BuildInfo:Ve}=pe();(0,P.ap)(O.sessionId,"AuthEvent did not contain a session ID");const at=yield _e(O.sessionId),ft={};return(0,P.aq)()?ft.ibi=Ve.packageName:(0,P.ar)()?ft.apn=Ve.packageName:(0,P.as)(j,"operation-not-supported-in-this-environment"),Ve.displayName&&(ft.appDisplayName=Ve.displayName),ft.sessionId=at,(0,P.at)(j,U,O.type,void 0,null!==(oe=O.eventId)&&void 0!==oe?oe:void 0,ft)})).apply(this,arguments)}function Ge(){return(Ge=(0,d.Z)(function*(j){const{BuildInfo:O}=pe(),U={};(0,P.aq)()?U.iosBundleId=O.packageName:(0,P.ar)()?U.androidPackageName=O.packageName:(0,P.as)(j,"operation-not-supported-in-this-environment"),yield(0,P.au)(j,U)})).apply(this,arguments)}function ot(){return(ot=(0,d.Z)(function*(j,O,U){const{cordova:oe}=pe();let Ve=()=>{};try{yield new Promise((at,ft)=>{let ke=null;function Ue(){var Ht;at();const En=null===(Ht=oe.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof En&&En(),"function"==typeof U?.close&&U.close()}function Lt(){ke||(ke=window.setTimeout(()=>{ft((0,P.aw)(j,"redirect-cancelled-by-user"))},2e3))}function wn(){"visible"===document?.visibilityState&&Lt()}O.addPassiveListener(Ue),document.addEventListener("resume",Lt,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",wn,!1),Ve=()=>{O.removePassiveListener(Ue),document.removeEventListener("resume",Lt,!1),document.removeEventListener("visibilitychange",wn,!1),ke&&window.clearTimeout(ke)}})}finally{Ve()}})).apply(this,arguments)}function _e(j){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,d.Z)(function*(j){const O=Je(j),U=yield crypto.subtle.digest("SHA-256",O);return Array.from(new Uint8Array(U)).map(Ve=>Ve.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Je(j){if((0,P.ap)(/[0-9a-zA-Z]+/.test(j),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(j);const O=new ArrayBuffer(j.length),U=new Uint8Array(O);for(let oe=0;oe<j.length;oe++)U[oe]=j.charCodeAt(oe);return U}class Oe extends P.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(O=>{this.resolveInialized=O})}addPassiveListener(O){this.passiveListeners.add(O)}removePassiveListener(O){this.passiveListeners.delete(O)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(O){return this.resolveInialized(),this.passiveListeners.forEach(U=>U(O)),super.onEvent(O)}initialized(){var O=this;return(0,d.Z)(function*(){yield O.initPromise})()}}function ae(j){return fe.apply(this,arguments)}function fe(){return(fe=(0,d.Z)(function*(j){const O=yield re()._get(me(j));return O&&(yield re()._remove(me(j))),O})).apply(this,arguments)}function ee(){const j=[],O="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let U=0;U<20;U++){const oe=Math.floor(Math.random()*O.length);j.push(O.charAt(oe))}return j.join("")}function re(){return(0,P.az)(P.b)}function me(j){return(0,P.aA)("authEvent",j.config.apiKey,j.name)}function He(j){if(!j?.includes("?"))return{};const[O,...U]=j.split("?");return(0,le.zd)(U.join("?"))}function qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Zt(){var j;return(null===(j=self?.location)||void 0===j?void 0:j.protocol)||null}function Or(j=(0,le.z$)()){return!("file:"!==Zt()&&"ionic:"!==Zt()&&"capacitor:"!==Zt()||!j.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gi(){try{const j=self.localStorage,O=P.aI();if(j)return j.setItem(O,"1"),j.removeItem(O),!function zi(j=(0,le.z$)()){return function Zr(){return(0,le.w1)()&&11===document?.documentMode}()||function zn(j=(0,le.z$)()){return/Edge\/\d+/.test(j)}(j)}()||(0,le.hl)()}catch{return Qr()&&(0,le.hl)()}return!1}function Qr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kn(){return(function jt(){return"http:"===Zt()||"https:"===Zt()}()||(0,le.ru)()||Or())&&!function $i(){return(0,le.b$)()||(0,le.UG)()}()&&Gi()&&!Qr()}function Oi(){return Or()&&typeof document<"u"}function et(){return(et=(0,d.Z)(function*(){return!!Oi()&&new Promise(j=>{const O=setTimeout(()=>{j(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(O),j(!0)})})})).apply(this,arguments)}const er={LOCAL:"local",NONE:"none",SESSION:"session"},Mn=P.ax,Ar="persistence";function xn(j){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(j){yield j._initializationPromise;const O=yt(),U=P.aA(Ar,j.config.apiKey,j.name);O&&O.setItem(U,j._getPersistence())})).apply(this,arguments)}function yt(){var j;try{return(null===(j=function cr(){return typeof window<"u"?window:null}())||void 0===j?void 0:j.sessionStorage)||null}catch{return null}}const vt=P.ax;class Ft{constructor(){this.browserResolver=P.az(P.k),this.cordovaResolver=P.az(class un{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(O){var U=this;return(0,d.Z)(function*(){const oe=O._key();let Ve=U.eventManagers.get(oe);return Ve||(Ve=new Oe(O),U.eventManagers.set(oe,Ve),U.attachCallbackListeners(O,Ve)),Ve})()}_openPopup(O){(0,P.as)(O,"operation-not-supported-in-this-environment")}_openRedirect(O,U,oe,Ve){var at=this;return(0,d.Z)(function*(){!function Ce(j){var O,U,oe,Ve,at,ft,ke,Ue,Lt,wn;const Ht=pe();(0,P.ax)("function"==typeof(null===(O=Ht?.universalLinks)||void 0===O?void 0:O.subscribe),j,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(U=Ht?.BuildInfo)||void 0===U?void 0:U.packageName)<"u",j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(at=null===(Ve=null===(oe=Ht?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===Ve?void 0:Ve.browsertab)||void 0===at?void 0:at.openUrl),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Ue=null===(ke=null===(ft=Ht?.cordova)||void 0===ft?void 0:ft.plugins)||void 0===ke?void 0:ke.browsertab)||void 0===Ue?void 0:Ue.isAvailable),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(wn=null===(Lt=Ht?.cordova)||void 0===Lt?void 0:Lt.InAppBrowser)||void 0===wn?void 0:wn.open),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(O);const ft=yield at._initialize(O);yield ft.initialized(),ft.resetRedirect(),(0,P.aD)(),yield at._originValidation(O);const ke=function Se(j,O,U=null){return{type:O,eventId:U,urlResponse:null,sessionId:ee(),postBody:null,tenantId:j.tenantId,error:(0,P.aw)(j,"no-auth-event")}}(O,oe,Ve);yield function We(j,O){return re()._set(me(j),O)}(O,ke);const Ue=yield function K(j,O,U){return q.apply(this,arguments)}(O,ke,U),Lt=yield function Fe(j){const{cordova:O}=pe();return new Promise(U=>{O.plugins.browsertab.isAvailable(oe=>{let Ve=null;oe?O.plugins.browsertab.openUrl(j):Ve=O.InAppBrowser.open(j,(0,P.av)()?"_blank":"_system","location=yes"),U(Ve)})})}(Ue);return function Ae(j,O,U){return ot.apply(this,arguments)}(O,ft,Lt)})()}_isIframeWebStorageSupported(O,U){throw new Error("Method not implemented.")}_originValidation(O){const U=O._key();return this.originValidationPromises[U]||(this.originValidationPromises[U]=function te(j){return Ge.apply(this,arguments)}(O)),this.originValidationPromises[U]}attachCallbackListeners(O,U){const{universalLinks:oe,handleOpenURL:Ve,BuildInfo:at}=pe(),ft=setTimeout((0,d.Z)(function*(){yield ae(O),U.onEvent(qe())}),500),ke=function(){var wn=(0,d.Z)(function*(Ht){clearTimeout(ft);const En=yield ae(O);let ss=null;En&&Ht?.url&&(ss=function Ee(j,O){var U,oe;const Ve=function je(j){const O=He(j),U=O.link?decodeURIComponent(O.link):void 0,oe=He(U).link,Ve=O.deep_link_id?decodeURIComponent(O.deep_link_id):void 0;return He(Ve).link||Ve||oe||U||j}(O);if(Ve.includes("/__/auth/callback")){const at=He(Ve),ft=at.firebaseError?function de(j){try{return JSON.parse(j)}catch{return null}}(decodeURIComponent(at.firebaseError)):null,ke=null===(oe=null===(U=ft?.code)||void 0===U?void 0:U.split("auth/"))||void 0===oe?void 0:oe[1],Ue=ke?(0,P.aw)(ke):null;return Ue?{type:j.type,eventId:j.eventId,tenantId:j.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:j.type,eventId:j.eventId,tenantId:j.tenantId,sessionId:j.sessionId,urlResponse:Ve,postBody:null}}return null}(En,Ht.url)),U.onEvent(ss||qe())});return function(En){return wn.apply(this,arguments)}}();typeof oe<"u"&&"function"==typeof oe.subscribe&&oe.subscribe(null,ke);const Ue=Ve,Lt=`${at.packageName.toLowerCase()}://`;pe().handleOpenURL=function(){var wn=(0,d.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(Lt)&&ke({url:Ht}),"function"==typeof Ue)try{Ue(Ht)}catch(En){console.error(En)}});return function(Ht){return wn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(O){var U=this;return(0,d.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._initialize(O)})()}_openPopup(O,U,oe,Ve){var at=this;return(0,d.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openPopup(O,U,oe,Ve)})()}_openRedirect(O,U,oe,Ve){var at=this;return(0,d.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openRedirect(O,U,oe,Ve)})()}_isIframeWebStorageSupported(O,U){this.assertedUnderlyingResolver._isIframeWebStorageSupported(O,U)}_originValidation(O){return this.assertedUnderlyingResolver._originValidation(O)}get _shouldInitProactively(){return Oi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var O=this;return(0,d.Z)(function*(){if(O.underlyingResolver)return;const U=yield function Wi(){return et.apply(this,arguments)}();O.underlyingResolver=U?O.cordovaResolver:O.browserResolver})()}}function ri(j){return j.unwrap()}function jr(j){return Xr(j)}function Xr(j){const{_tokenResponse:O}=j instanceof le.ZR?j.customData:j;if(!O)return null;if(!(j instanceof le.ZR)&&"temporaryProof"in O&&"phoneNumber"in O)return P.P.credentialFromResult(j);const U=O.providerId;if(!U||U===P.o.PASSWORD)return null;let oe;switch(U){case P.o.GOOGLE:oe=P.Q;break;case P.o.FACEBOOK:oe=P.N;break;case P.o.GITHUB:oe=P.T;break;case P.o.TWITTER:oe=P.W;break;default:const{oauthIdToken:Ve,oauthAccessToken:at,oauthTokenSecret:ft,pendingToken:ke,nonce:Ue}=O;return at||ft||Ve||ke?ke?U.startsWith("saml.")?P.aL._create(U,ke):P.J._fromParams({providerId:U,signInMethod:U,pendingToken:ke,idToken:Ve,accessToken:at}):new P.U(U).credential({idToken:Ve,accessToken:at,rawNonce:Ue}):null}return j instanceof le.ZR?oe.credentialFromError(j):oe.credentialFromResult(j)}function Ut(j,O){return O.catch(U=>{throw U instanceof le.ZR&&function xt(j,O){var U;const oe=null===(U=O.customData)||void 0===U?void 0:U._tokenResponse;if("auth/multi-factor-auth-required"===O?.code)O.resolver=new wr(j,P.an(j,O));else if(oe){const Ve=Xr(O),at=O;Ve&&(at.credential=Ve,at.tenantId=oe.tenantId||void 0,at.email=oe.email||void 0,at.phoneNumber=oe.phoneNumber||void 0)}}(j,U),U}).then(U=>{const Ve=U.user;return{operationType:U.operationType,credential:jr(U),additionalUserInfo:P.al(U),user:Vn.getOrCreate(Ve)}})}function ii(j,O){return en.apply(this,arguments)}function en(){return(en=(0,d.Z)(function*(j,O){const U=yield O;return{verificationId:U.verificationId,confirm:oe=>Ut(j,U.confirm(oe))}})).apply(this,arguments)}class wr{constructor(O,U){this.resolver=U,this.auth=function tr(j){return j.wrapped()}(O)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(O){return Ut(ri(this.auth),this.resolver.resolveSignIn(O))}}class Vn{constructor(O){this._delegate=O,this.multiFactor=P.ao(O)}static getOrCreate(O){return Vn.USER_MAP.has(O)||Vn.USER_MAP.set(O,new Vn(O)),Vn.USER_MAP.get(O)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(O){return this._delegate.getIdTokenResult(O)}getIdToken(O){return this._delegate.getIdToken(O)}linkAndRetrieveDataWithCredential(O){return this.linkWithCredential(O)}linkWithCredential(O){var U=this;return(0,d.Z)(function*(){return Ut(U.auth,P.Z(U._delegate,O))})()}linkWithPhoneNumber(O,U){var oe=this;return(0,d.Z)(function*(){return ii(oe.auth,P.l(oe._delegate,O,U))})()}linkWithPopup(O){var U=this;return(0,d.Z)(function*(){return Ut(U.auth,P.d(U._delegate,O,Ft))})()}linkWithRedirect(O){var U=this;return(0,d.Z)(function*(){return yield xn(P.aE(U.auth)),P.g(U._delegate,O,Ft)})()}reauthenticateAndRetrieveDataWithCredential(O){return this.reauthenticateWithCredential(O)}reauthenticateWithCredential(O){var U=this;return(0,d.Z)(function*(){return Ut(U.auth,P._(U._delegate,O))})()}reauthenticateWithPhoneNumber(O,U){return ii(this.auth,P.r(this._delegate,O,U))}reauthenticateWithPopup(O){return Ut(this.auth,P.e(this._delegate,O,Ft))}reauthenticateWithRedirect(O){var U=this;return(0,d.Z)(function*(){return yield xn(P.aE(U.auth)),P.h(U._delegate,O,Ft)})()}sendEmailVerification(O){return P.ab(this._delegate,O)}unlink(O){var U=this;return(0,d.Z)(function*(){return yield P.ak(U._delegate,O),U})()}updateEmail(O){return P.ag(this._delegate,O)}updatePassword(O){return P.ah(this._delegate,O)}updatePhoneNumber(O){return P.u(this._delegate,O)}updateProfile(O){return P.af(this._delegate,O)}verifyBeforeUpdateEmail(O,U){return P.ac(this._delegate,O,U)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vn.USER_MAP=new WeakMap;const nt=P.ax;let Me=(()=>{class j{constructor(U,oe){if(this.app=U,oe.isInitialized())return this._delegate=oe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ve}=U.options;nt(Ve,"invalid-api-key",{appName:U.name}),nt(Ve,"invalid-api-key",{appName:U.name});const at=typeof window<"u"?Ft:void 0;this._delegate=oe.initialize({options:{persistence:Tt(Ve,U.name),popupRedirectResolver:at}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(U){this._delegate.languageCode=U}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(U){this._delegate.tenantId=U}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(U,oe){P.G(this._delegate,U,oe)}applyActionCode(U){return P.a2(this._delegate,U)}checkActionCode(U){return P.a3(this._delegate,U)}confirmPasswordReset(U,oe){return P.a1(this._delegate,U,oe)}createUserWithEmailAndPassword(U,oe){var Ve=this;return(0,d.Z)(function*(){return Ut(Ve._delegate,P.a5(Ve._delegate,U,oe))})()}fetchProvidersForEmail(U){return this.fetchSignInMethodsForEmail(U)}fetchSignInMethodsForEmail(U){return P.aa(this._delegate,U)}isSignInWithEmailLink(U){return P.a8(this._delegate,U)}getRedirectResult(){var U=this;return(0,d.Z)(function*(){nt(Kn(),U._delegate,"operation-not-supported-in-this-environment");const oe=yield P.j(U._delegate,Ft);return oe?Ut(U._delegate,Promise.resolve(oe)):{credential:null,user:null}})()}addFrameworkForLogging(U){!function bn(j,O){(0,P.aE)(j)._logFramework(O)}(this._delegate,U)}onAuthStateChanged(U,oe,Ve){const{next:at,error:ft,complete:ke}=rt(U,oe,Ve);return this._delegate.onAuthStateChanged(at,ft,ke)}onIdTokenChanged(U,oe,Ve){const{next:at,error:ft,complete:ke}=rt(U,oe,Ve);return this._delegate.onIdTokenChanged(at,ft,ke)}sendSignInLinkToEmail(U,oe){return P.a7(this._delegate,U,oe)}sendPasswordResetEmail(U,oe){return P.a0(this._delegate,U,oe||void 0)}setPersistence(U){var oe=this;return(0,d.Z)(function*(){let Ve;switch(function qs(j,O){Mn(Object.values(er).includes(O),j,"invalid-persistence-type"),(0,le.b$)()?Mn(O!==er.SESSION,j,"unsupported-persistence-type"):(0,le.UG)()?Mn(O===er.NONE,j,"unsupported-persistence-type"):Qr()?Mn(O===er.NONE||O===er.LOCAL&&(0,le.hl)(),j,"unsupported-persistence-type"):Mn(O===er.NONE||Gi(),j,"unsupported-persistence-type")}(oe._delegate,U),U){case er.SESSION:Ve=P.a;break;case er.LOCAL:Ve=(yield P.az(P.i)._isAvailable())?P.i:P.b;break;case er.NONE:Ve=P.L;break;default:return P.as("argument-error",{appName:oe._delegate.name})}return oe._delegate.setPersistence(Ve)})()}signInAndRetrieveDataWithCredential(U){return this.signInWithCredential(U)}signInAnonymously(){return Ut(this._delegate,P.X(this._delegate))}signInWithCredential(U){return Ut(this._delegate,P.Y(this._delegate,U))}signInWithCustomToken(U){return Ut(this._delegate,P.$(this._delegate,U))}signInWithEmailAndPassword(U,oe){return Ut(this._delegate,P.a6(this._delegate,U,oe))}signInWithEmailLink(U,oe){return Ut(this._delegate,P.a9(this._delegate,U,oe))}signInWithPhoneNumber(U,oe){return ii(this._delegate,P.s(this._delegate,U,oe))}signInWithPopup(U){var oe=this;return(0,d.Z)(function*(){return nt(Kn(),oe._delegate,"operation-not-supported-in-this-environment"),Ut(oe._delegate,P.c(oe._delegate,U,Ft))})()}signInWithRedirect(U){var oe=this;return(0,d.Z)(function*(){return nt(Kn(),oe._delegate,"operation-not-supported-in-this-environment"),yield xn(oe._delegate),P.f(oe._delegate,U,Ft)})()}updateCurrentUser(U){return this._delegate.updateCurrentUser(U)}verifyPasswordResetCode(U){return P.a4(this._delegate,U)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return j.Persistence=er,j})();function rt(j,O,U){let oe=j;"function"!=typeof j&&({next:oe,error:O,complete:U}=j);const Ve=oe;return{next:ft=>Ve(ft&&Vn.getOrCreate(ft)),error:O,complete:U}}function Tt(j,O){const U=function Sn(j,O){const U=yt();if(!U)return[];const oe=P.aA(Ar,j,O);switch(U.getItem(oe)){case er.NONE:return[P.L];case er.LOCAL:return[P.i,P.a];case er.SESSION:return[P.a];default:return[]}}(j,O);if(typeof self<"u"&&!U.includes(P.i)&&U.push(P.i),typeof window<"u")for(const oe of[P.b,P.a])U.includes(oe)||U.push(oe);return U.includes(P.L)||U.push(P.L),U}class Rt{constructor(){this.providerId="phone",this._delegate=new P.P(ri(z.Z.auth()))}static credential(O,U){return P.P.credential(O,U)}verifyPhoneNumber(O,U){return this._delegate.verifyPhoneNumber(O,U)}unwrap(){return this._delegate}}Rt.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Rt.PROVIDER_ID=P.P.PROVIDER_ID;const rn=P.ax;class W{constructor(O,U,oe=z.Z.app()){var Ve;rn(null===(Ve=oe.options)||void 0===Ve?void 0:Ve.apiKey,"invalid-api-key",{appName:oe.name}),this._delegate=new P.R(O,U,oe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function X(j){j.INTERNAL.registerComponent(new ce.wA("auth-compat",O=>{const U=O.getProvider("app-compat").getImmediate(),oe=O.getProvider("auth");return new Me(U,oe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:Rt,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:W,TwitterAuthProvider:P.W,Auth:Me,AuthCredential:P.H,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),j.registerVersion("@firebase/auth-compat","0.3.1")}(z.Z)},8766:(mt,Re,L)=>{L.d(Re,{Lj:()=>Pe,X3:()=>Je});var d=L(5861);let P,le;const ce=new WeakMap,pe=new WeakMap,we=new WeakMap,K=new WeakMap,q=new WeakMap;let Fe={get(fe,Ee,ee){if(fe instanceof IDBTransaction){if("done"===Ee)return pe.get(fe);if("objectStoreNames"===Ee)return fe.objectStoreNames||we.get(fe);if("store"===Ee)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return _e(fe[Ee])},set:(fe,Ee,ee)=>(fe[Ee]=ee,!0),has:(fe,Ee)=>fe instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in fe};function Ce(fe){return"function"==typeof fe?function ot(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function be(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...Ee){return fe.apply(Xe(this),Ee),_e(ce.get(this))}:function(...Ee){return _e(fe.apply(Xe(this),Ee))}:function(Ee,...ee){const re=fe.call(Xe(this),Ee,...ee);return we.set(re,Ee.sort?Ee.sort():[Ee]),_e(re)}}(fe):(fe instanceof IDBTransaction&&function Ge(fe){if(pe.has(fe))return;const Ee=new Promise((ee,re)=>{const me=()=>{fe.removeEventListener("complete",de),fe.removeEventListener("error",je),fe.removeEventListener("abort",je)},de=()=>{ee(),me()},je=()=>{re(fe.error||new DOMException("AbortError","AbortError")),me()};fe.addEventListener("complete",de),fe.addEventListener("error",je),fe.addEventListener("abort",je)});pe.set(fe,Ee)}(fe),((fe,Ee)=>Ee.some(ee=>fe instanceof ee))(fe,function he(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,Fe):fe)}function _e(fe){if(fe instanceof IDBRequest)return function te(fe){const Ee=new Promise((ee,re)=>{const me=()=>{fe.removeEventListener("success",de),fe.removeEventListener("error",je)},de=()=>{ee(_e(fe.result)),me()},je=()=>{re(fe.error),me()};fe.addEventListener("success",de),fe.addEventListener("error",je)});return Ee.then(ee=>{ee instanceof IDBCursor&&ce.set(ee,fe)}).catch(()=>{}),q.set(Ee,fe),Ee}(fe);if(K.has(fe))return K.get(fe);const Ee=Ce(fe);return Ee!==fe&&(K.set(fe,Ee),q.set(Ee,fe)),Ee}const Xe=fe=>q.get(fe);function Je(fe,Ee,{blocked:ee,upgrade:re,blocking:me,terminated:de}={}){const je=indexedDB.open(fe,Ee),He=_e(je);return re&&je.addEventListener("upgradeneeded",_t=>{re(_e(je.result),_t.oldVersion,_t.newVersion,_e(je.transaction))}),ee&&je.addEventListener("blocked",()=>ee()),He.then(_t=>{de&&_t.addEventListener("close",()=>de()),me&&_t.addEventListener("versionchange",()=>me())}).catch(()=>{}),He}function Pe(fe,{blocked:Ee}={}){const ee=indexedDB.deleteDatabase(fe);return Ee&&ee.addEventListener("blocked",()=>Ee()),_e(ee).then(()=>{})}const Oe=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],We=new Map;function ae(fe,Ee){if(!(fe instanceof IDBDatabase)||Ee in fe||"string"!=typeof Ee)return;if(We.get(Ee))return We.get(Ee);const ee=Ee.replace(/FromIndex$/,""),re=Ee!==ee,me=Se.includes(ee);if(!(ee in(re?IDBIndex:IDBObjectStore).prototype)||!me&&!Oe.includes(ee))return;const de=function(){var je=(0,d.Z)(function*(He,..._t){const un=this.transaction(He,me?"readwrite":"readonly");let Kt=un.store;return re&&(Kt=Kt.index(_t.shift())),(yield Promise.all([Kt[ee](..._t),me&&un.done]))[0]});return function(_t){return je.apply(this,arguments)}}();return We.set(Ee,de),de}!function Ae(fe){Fe=fe(Fe)}(fe=>({...fe,get:(Ee,ee,re)=>ae(Ee,ee)||fe.get(Ee,ee,re),has:(Ee,ee)=>!!ae(Ee,ee)||fe.has(Ee,ee)}))},5861:(mt,Re,L)=>{function d(P,le,he,be,ce,pe,we){try{var K=P[pe](we),q=K.value}catch(te){return void he(te)}K.done?le(q):Promise.resolve(q).then(be,ce)}function z(P){return function(){var le=this,he=arguments;return new Promise(function(be,ce){var pe=P.apply(le,he);function we(q){d(pe,be,ce,we,K,"next",q)}function K(q){d(pe,be,ce,we,K,"throw",q)}we(void 0)})}}L.d(Re,{Z:()=>z})}},mt=>{mt(mt.s=3499)}]);